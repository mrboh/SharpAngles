try{Object.defineProperty(Error.prototype,"message",{enumerable:!0})}catch(e){}var IntelliFactory={Runtime:{Class:function(n,t){function i(){}i.prototype=n;for(var r in t)i[r]=t[r];return i},Define:function(n,t){function i(n,t){var u,f,e;for(u in t)if(f=typeof n[u],e=typeof t[u],f=="object"&&e=="object")i(n[u],t[u]);else if(f=="undefined"||r)n[u]=t[u];else throw new Error("Name conflict: "+u);}var r=!!this.overwrite;i(n,t)},Field:function(n){var t,i=!1;return function(){return i||(i=!0,t=n()),t}},For:function(n,t,i){for(var r=n;r<=t;r++)i(r)},ForEach:function(n,t){for(var i in n)t(i)},New:function(n,t){var i=new n;for(var r in t)r in i||(i[r]=t[r]);return i},OnInit:function(n){"init"in this||(this.init=[]);this.init.push(n)},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Inherit:function(n,t){var r=n.prototype,i;n.prototype=new t;for(i in r)n.prototype[i]=r[i]},Safe:function(n){return n===undefined?{}:n},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])},Throw:function(n){throw n;},Tupled:function(n){return function(t){return arguments.length>1?n(arguments):n(t)}},Try:function(n,t){try{return n()}catch(i){return t(i)}},TryFinally:function(n,t){try{return n()}finally{t()}},While:function(n,t){while(n())t()}}};Date.now||(Date.now=function(){return(new Date).getTime()});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V;$.Define($$,{IntelliFactory:{WebSharper:{AggregateException:$.Class({},{New:function($innerExceptions){var $0=this,$this=this;return $$.e=new $$.Error("AggregateException"),$$.e.InnerExceptions=$innerExceptions,$$.e;}}),Arrays:{Find:function(W,X){var Y,Z,_0;Y=b.tryFind(W,X);if(Y.$==0){Z=c.FailWith("KeyNotFoundException");}else{_0=Y.$0;Z=_0;}return Z;},FindIndex:function(_1,_2){var _3,_4,_5;_3=b.tryFindIndex(_1,_2);if(_3.$==0){_4=c.FailWith("KeyNotFoundException");}else{_5=_3.$0;_4=_5;}return _4;},Pick:function(_6,_7){var _8,_9,_;_8=b.tryPick(_6,_7);if(_8.$==0){_9=c.FailWith("KeyNotFoundException");}else{_=_8.$0;_9=_;}return _9;},average:function(ba){return d(b.sum(ba))/d(e.GetLength(ba));},averageBy:function(ba,bb){return d(b.sumBy(ba,bb))/d(e.GetLength(bb));},blit:function(bc,bd,be,bf,bg){var bh;b.checkRange(bc,bd,bg);b.checkRange(be,bf,bg);for(bh=0;bh<=bg-1;bh++){e.SetArray(be,bf+bh,e.GetArray(bc,bd+bh));}return;},checkLength:function(bi,bj){return e.GetLength(bi)!==e.GetLength(bj)?c.FailWith("Arrays differ in length."):null;},checkRange:function(bk,bl,bm){return((bm<0?true:bl<0)?true:e.GetLength(bk)<bl+bm)?c.FailWith("Index was outside the bounds of the array."):null;},choose:function(bn,bo){var bp,bq,br,bs,bt;bp=[];for(bq=0;bq<=e.GetLength(bo)-1;bq++){br=bn(e.GetArray(bo,bq));if(br.$==0){bs=null;}else{bt=br.$0;bs=bp.push(bt);}}return bp;},collect:function(bu,bv){return f.prototype.concat.apply([],b.map(bu,bv));},concat:function(bw){return f.prototype.concat.apply([],b.ofSeq(bw));},create:function(bx,by){var bz,bA;bz=f(bx);for(bA=0;bA<=bx-1;bA++){e.SetArray(bz,bA,by);}return bz;},exists2:function(bB,bC,bD){b.checkLength(bC,bD);return g.exists2(bB,bC,bD);},fill:function(bE,bF,bG,bH){var bI;b.checkRange(bE,bF,bG);for(bI=bF;bI<=bF+bG-1;bI++){e.SetArray(bE,bI,bH);}return;},filter:function(bJ,bK){var bL,bM;bL=[];for(bM=0;bM<=e.GetLength(bK)-1;bM++){bJ(e.GetArray(bK,bM))?bL.push(e.GetArray(bK,bM)):null;}return bL;},fold:function(bN,bO,bP){var bQ,bR;bQ=bO;for(bR=0;bR<=e.GetLength(bP)-1;bR++){bQ=(bN(bQ))(e.GetArray(bP,bR));}return bQ;},fold2:function(bS,bT,bU,bV){var bW,bX;b.checkLength(bU,bV);bW=bT;for(bX=0;bX<=bU.length-1;bX++){bW=((bS(bW))(e.GetArray(bU,bX)))(e.GetArray(bV,bX));}return bW;},foldBack:function(bY,bZ,b0){var b1,b2,b3;b1=b0;b2=e.GetLength(bZ);for(b3=1;b3<=b2;b3++){b1=(bY(e.GetArray(bZ,b2-b3)))(b1);}return b1;},foldBack2:function(b4,b5,b6,b7){var b8,b9,b_;b.checkLength(b5,b6);b8=e.GetLength(b5);b9=b7;for(b_=1;b_<=b8;b_++){b9=((b4(e.GetArray(b5,b8-b_)))(e.GetArray(b6,b8-b_)))(b9);}return b9;},forall2:function(b$,ca,cb){b.checkLength(ca,cb);return g.forall2(b$,ca,cb);},init:function(cc,cd){var ce,cf;cc<0?c.FailWith("Negative size given."):null;ce=f(cc);for(cf=0;cf<=cc-1;cf++){e.SetArray(ce,cf,cd(cf));}return ce;},iter:function(cg,ch){var ci;for(ci=0;ci<=e.GetLength(ch)-1;ci++){cg(e.GetArray(ch,ci));}return;},iter2:function(cj,ck,cl){var cm;b.checkLength(ck,cl);for(cm=0;cm<=e.GetLength(ck)-1;cm++){(cj(e.GetArray(ck,cm)))(e.GetArray(cl,cm));}return;},iteri:function(cn,co){var cp;for(cp=0;cp<=e.GetLength(co)-1;cp++){(cn(cp))(e.GetArray(co,cp));}return;},iteri2:function(cq,cr,cs){var ct;b.checkLength(cr,cs);for(ct=0;ct<=e.GetLength(cr)-1;ct++){((cq(ct))(e.GetArray(cr,ct)))(e.GetArray(cs,ct));}return;},map:function(cu,cv){var cw,cx;cw=f(e.GetLength(cv));for(cx=0;cx<=e.GetLength(cv)-1;cx++){e.SetArray(cw,cx,cu(e.GetArray(cv,cx)));}return cw;},map2:function(cy,cz,cA){var cB,cC;b.checkLength(cz,cA);cB=f(e.GetLength(cA));for(cC=0;cC<=e.GetLength(cA)-1;cC++){e.SetArray(cB,cC,(cy(e.GetArray(cz,cC)))(e.GetArray(cA,cC)));}return cB;},mapi:function(cD,cE){var cF,cG;cF=f(e.GetLength(cE));for(cG=0;cG<=e.GetLength(cE)-1;cG++){e.SetArray(cF,cG,(cD(cG))(e.GetArray(cE,cG)));}return cF;},mapi2:function(cH,cI,cJ){var cK,cL;b.checkLength(cI,cJ);cK=f(e.GetLength(cI));for(cL=0;cL<=e.GetLength(cI)-1;cL++){e.SetArray(cK,cL,((cH(cL))(e.GetArray(cI,cL)))(e.GetArray(cJ,cL)));}return cK;},max:function(cM){return b.reduce(function(cN){return function(cO){return c.Max(cN,cO);};},cM);},maxBy:function(cP,cQ){return b.reduce(function(cR){return function(cS){return h.Compare(cP(cR),cP(cS))===1?cR:cS;};},cQ);},min:function(cT){return b.reduce(function(cU){return function(cV){return c.Min(cU,cV);};},cT);},minBy:function(cW,cX){return b.reduce(function(cY){return function(cZ){return h.Compare(cW(cY),cW(cZ))===-1?cY:cZ;};},cX);},nonEmpty:function(c0){return e.GetLength(c0)===0?c.FailWith("The input array was empty."):null;},ofSeq:function(c1){var c2,c3;c2=[];c3=i.Get(c1);while(c3.MoveNext()){c2.push(c3.get_Current());}return c2;},partition:function(c4,c5){var c6,c7,c8;c6=[];c7=[];for(c8=0;c8<=e.GetLength(c5)-1;c8++){c4(e.GetArray(c5,c8))?c6.push(e.GetArray(c5,c8)):c7.push(e.GetArray(c5,c8));}return[c6,c7];},permute:function(c9,c_){var c$,da;c$=f(e.GetLength(c_));for(da=0;da<=e.GetLength(c_)-1;da++){e.SetArray(c$,c9(da),e.GetArray(c_,da));}return c$;},reduce:function(db,dc){var dd,de;b.nonEmpty(dc);dd=e.GetArray(dc,0);for(de=1;de<=e.GetLength(dc)-1;de++){dd=(db(dd))(e.GetArray(dc,de));}return dd;},reduceBack:function(df,dg){var dh,di,dj;b.nonEmpty(dg);dh=e.GetLength(dg);di=e.GetArray(dg,dh-1);for(dj=2;dj<=dh;dj++){di=(df(e.GetArray(dg,dh-dj)))(di);}return di;},reverse:function(dk,dl,dm){var dn;dn=b.sub(dk,dl,dm).slice().reverse();return b.blit(dn,0,dk,dl,e.GetLength(dn));},scan:function(_do,dp,dq){var dr,ds;dr=f(1+e.GetLength(dq));e.SetArray(dr,0,dp);for(ds=0;ds<=e.GetLength(dq)-1;ds++){e.SetArray(dr,ds+1,(_do(e.GetArray(dr,ds)))(e.GetArray(dq,ds)));}return dr;},scanBack:function(dt,du,dv){var dw,dx,dy;dw=e.GetLength(du);dx=f(1+dw);e.SetArray(dx,dw,dv);for(dy=0;dy<=dw-1;dy++){e.SetArray(dx,dw-dy-1,(dt(e.GetArray(du,dw-dy-1)))(e.GetArray(dx,dw-dy)));}return dx;},sort:function(dz){return b.sortBy(function(dA){return dA;},dz);},sortBy:function(dB,dC){var dD;dD=$.Tupled(function(dE){var dF,dG;dF=dE[0];dG=dE[1];return c.Compare(dB(dF),dB(dG));});return dC.slice().sort(dD);},sortInPlace:function(dH){return b.sortInPlaceBy(function(dI){return dI;},dH);},sortInPlaceBy:function(dJ,dK){var dL;dL=$.Tupled(function(dM){var dN,dO;dN=dM[0];dO=dM[1];return c.Compare(dJ(dN),dJ(dO));});return dK.sort(dL);},sortInPlaceWith:function(dP,dQ){var dR;dR=$.Tupled(function(dS){var dT,dU;dT=dS[0];dU=dS[1];return(dP(dT))(dU);});return dQ.sort(dR);},sortWith:function(dV,dW){var dX;dX=$.Tupled(function(dY){var dZ,d0;dZ=dY[0];d0=dY[1];return(dV(dZ))(d0);});return dW.slice().sort(dX);},sub:function(d1,d2,d3){b.checkRange(d1,d2,d3);return d1.slice(d2,d2+d3);},sum:function($arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$arr[i];return sum;},sumBy:function($f,$arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$f($arr[i]);return sum;},tryFind:function(d4,d5){var d6,d7;d6={$:0};d7=0;while(d7<e.GetLength(d5)?d6.$==0:false){d4(e.GetArray(d5,d7))?d6={$:1,$0:e.GetArray(d5,d7)}:null;d7=d7+1;}return d6;},tryFindIndex:function(d8,d9){var d_,d$;d_={$:0};d$=0;while(d$<e.GetLength(d9)?d_.$==0:false){d8(e.GetArray(d9,d$))?d_={$:1,$0:d$}:null;d$=d$+1;}return d_;},tryPick:function(ea,eb){var ec,ed,ee;ec={$:0};ed=0;while(ed<e.GetLength(eb)?ec.$==0:false){ee=ea(e.GetArray(eb,ed));ee.$==1?ec=ee:null;ed=ed+1;}return ec;},unzip:function(ef){var eg,eh,ei,ej,ek,el;eg=[];eh=[];for(ei=0;ei<=e.GetLength(ef)-1;ei++){ej=e.GetArray(ef,ei);ek=ej[1];el=ej[0];eg.push(el);eh.push(ek);}return[eg,eh];},unzip3:function(em){var en,eo,ep,eq,er,es,et,eu;en=[];eo=[];ep=[];for(eq=0;eq<=e.GetLength(em)-1;eq++){er=e.GetArray(em,eq);es=er[2];et=er[1];eu=er[0];en.push(eu);eo.push(et);ep.push(es);}return[en,eo,ep];},zip:function(ev,ew){var ex,ey;b.checkLength(ev,ew);ex=f(ev.length);for(ey=0;ey<=e.GetLength(ev)-1;ey++){e.SetArray(ex,ey,[e.GetArray(ev,ey),e.GetArray(ew,ey)]);}return ex;},zip3:function(ez,eA,eB){var eC,eD;b.checkLength(ez,eA);b.checkLength(eA,eB);eC=f(ez.length);for(eD=0;eD<=e.GetLength(ez)-1;eD++){e.SetArray(eC,eD,[e.GetArray(ez,eD),e.GetArray(eA,eD),e.GetArray(eB,eD)]);}return eC;}},Arrays2D:{copy:function(eE){return j.init(eE.length,eE.length?eE[0].length:0,function(eF){return function(eG){return e.GetArray2D(eE,eF,eG);};});},init:function(eH,eI,eJ){var eK,eL,eM;eK=j.zeroCreate(eH,eI);for(eL=0;eL<=eH-1;eL++){for(eM=0;eM<=eI-1;eM++){e.SetArray2D(eK,eL,eM,(eJ(eL))(eM));}}return eK;},iter:function(eN,eO){var eP,eQ,eR,eS;eP=eO.length;eQ=eO.length?eO[0].length:0;for(eR=0;eR<=eP-1;eR++){for(eS=0;eS<=eQ-1;eS++){eN(e.GetArray2D(eO,eR,eS));}}return;},iteri:function(eT,eU){var eV,eW,eX,eY;eV=eU.length;eW=eU.length?eU[0].length:0;for(eX=0;eX<=eV-1;eX++){for(eY=0;eY<=eW-1;eY++){((eT(eX))(eY))(e.GetArray2D(eU,eX,eY));}}return;},map:function(eZ,e0){return j.init(e0.length,e0.length?e0[0].length:0,function(e1){return function(e2){return eZ(e.GetArray2D(e0,e1,e2));};});},mapi:function(e3,e4){return j.init(e4.length,e4.length?e4[0].length:0,function(e5){return function(e6){return((e3(e5))(e6))(e.GetArray2D(e4,e5,e6));};});},zeroCreate:function(e7,e8){return e.Array2DZeroCreate(e7,e8);}},AsyncProxy:$.Class({},{get_CancellationToken:function(){return k.GetCT();},get_DefaultCancellationToken:function(){return k.defCTS().contents;}}),CancellationTokenSource:$.Class({Cancel:function(){var e9,e_,fc,fd;if(!this.c){this.c=true;e_=function(e$){var fa,fb;try{e$(null);fa={$:0};}catch(fb){fa={$:1,$0:fb};}return fa;};fc=this.r;fd=b.choose(e_,fc);e9=e.GetLength(fd)>0?c.Raise(l.New(fd)):null;}else{e9=null;}return e9;},Cancel1:function(fe){var ff,fg,fh,fj;if(!fe){ff=this.Cancel();}else{if(!this.c){this.c=true;fh=function(fi){return fi(null);};fj=this.r;fg=b.iter(fh,fj);}else{fg=null;}ff=fg;}return ff;},CancelAfter:function(fk){var fl,fm,fo,fq=this;if(!this.c){fm=this.pending;m.iter(function(fn){return n(fn);},fm);fo=o(function(){return fq.Cancel();},fk);fl=void(this.pending={$:1,$0:fo});}else{fl=null;}return fl;},get_IsCancellationRequested:function(){return this.c;}},{CreateLinkedTokenSource:function(fr){var fs,ft;fs=p.New();ft=function(fu){var fv,fx;fv=function(){return fs.Cancel();};fx=k.Register(fu,function(){return fv();});return;};return b.iter(ft,fr);},CreateLinkedTokenSource1:function(fz,fA){return p.CreateLinkedTokenSource([fz,fA]);},New:function(){var fB;fB=$.New(this,{});fB.c=false;fB.pending={$:0};fB.r=[];return fB;}}),Char:$.Class({},{GetNumericValue:function(fC){return(fC>=48?fC<=57:false)?d(fC)-d(48):-1;},IsControl:function(fD){return(fD>=0?fD<=31:false)?true:fD>=128?fD<=159:false;},IsDigit:function(fE){return fE>=48?fE<=57:false;},IsLetter:function(fF){return(fF>=65?fF<=90:false)?true:fF>=97?fF<=122:false;},IsLetterOrDigit:function(fG){return q.IsLetter(fG)?true:q.IsDigit(fG);},IsLower:function(fH){return fH>=97?fH<=122:false;},IsUpper:function(fI){return fI>=65?fI<=90:false;},IsWhiteSpace:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c).match(/\s/)!==null;},Parse:function(fJ){return fJ.length===1?fJ.charCodeAt(0):c.FailWith("String must be exactly one character long.");}}),Concurrency:{AwaitEvent:function(fK){var fL;fL=function(fM){var fN,fO,fP,fQ,fR,fS;fN=function(){return r.subscribeTo(fK,function(fU){var fV;s.Force(fO).Dispose();s.Force(fQ).Dispose();fV=function(){return fM.k.call(null,{$:0,$0:fU});};return k.scheduler().Fork(fV);});};fO=s.Create(fN);fP=function(){return k.Register(fM.ct,function(){var fZ;s.Force(fO).Dispose();fZ=function(){return fM.k.call(null,{$:2,$0:new t("OperationCanceledException")});};return k.scheduler().Fork(fZ);});};fQ=s.Create(fP);fR=s.Force(fO);fS=s.Force(fQ);return null;};return k.checkCancel(fL);},Bind:function(f1,f2){var f3;f3=function(f4){return f1({k:function(f5){var f6,f7,f8,ga;if(f5.$==0){f7=f5.$0;f8=function(){var f_,f$;try{f_=(f2(f7))(f4);}catch(f$){f_=f4.k.call(null,{$:1,$0:f$});}return f_;};f6=k.scheduler().Fork(f8);}else{ga=function(){return f4.k.call(null,f5);};f6=k.scheduler().Fork(ga);}return f6;},ct:f4.ct});};return k.checkCancel(f3);},Catch:function(gc){var gd;gd=function(ge){var gf,gk;try{gf=gc({k:function(gg){var gh,gi,gj;if(gg.$==0){gi=gg.$0;gh=ge.k.call(null,{$:0,$0:{$:0,$0:gi}});}else{if(gg.$==1){gj=gg.$0;gh=ge.k.call(null,{$:0,$0:{$:1,$0:gj}});}else{gh=ge.k.call(null,gg);}}return gh;},ct:ge.ct});}catch(gk){gf=ge.k.call(null,{$:0,$0:{$:1,$0:gk}});}return gf;};return k.checkCancel(gd);},Combine:function(gl,gm){return k.Bind(gl,function(){return gm;});},Delay:function(go){var gp;gp=function(gq){var gr,gs;try{gr=(go(null))(gq);}catch(gs){gr=gq.k.call(null,{$:1,$0:gs});}return gr;};return k.checkCancel(gp);},For:function(gt,gu){var gv;gv=i.Get(gt);return k.While(function(){return gv.MoveNext();},k.Delay(function(){return gu(gv.get_Current());}));},FromContinuations:function(gy){var gz;gz=function(gA){var gB,gC;gB={contents:false};gC=function(gD){var gE;if(gB.contents){gE=c.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");}else{gB.contents=true;gE=k.scheduler().Fork(gD);}return gE;};return gy([function(gF){return gC(function(){return gA.k.call(null,{$:0,$0:gF});});},function(gH){return gC(function(){return gA.k.call(null,{$:1,$0:gH});});},function(gJ){return gC(function(){return gA.k.call(null,{$:2,$0:gJ});});}]);};return k.checkCancel(gz);},GetCT:$.Field(function(){var gL;gL=function(gM){return gM.k.call(null,{$:0,$0:gM.ct});};return k.checkCancel(gL);}),Ignore:function(gN){return k.Bind(gN,function(){return k.Return(null);});},OnCancel:function(gP){var gQ;gQ=function(gR){return gR.k.call(null,{$:0,$0:k.Register(gR.ct,gP)});};return k.checkCancel(gQ);},Parallel:function(gS){var gT,gU,gV;gT=b.ofSeq(gS);if(e.GetLength(gT)===0){gU=k.Return([]);}else{gV=function(gW){var gX,gY,gZ,g0;gX=gT.length;gY={contents:gX};gZ=b.create(gX,undefined);g0=function(g1){return function(g2){var g3,g4,g5,g6,g7,g8,g9,g_,g$;g3=[gY.contents,g2];if(g3[0]===0){g4=null;}else{if(g3[0]===1){if(g3[1].$==0){g6=g3[1].$0;e.SetArray(gZ,g1,g6);gY.contents=0;g5=gW.k.call(null,{$:0,$0:gZ});}else{g3[0];g7=g3[1];gY.contents=0;g5=gW.k.call(null,g7);}g4=g5;}else{if(g3[1].$==0){g9=g3[1].$0;g_=g3[0];e.SetArray(gZ,g1,g9);g8=void(gY.contents=g_-1);}else{g3[0];g$=g3[1];gY.contents=0;g8=gW.k.call(null,g$);}g4=g8;}}return g4;};};return b.iteri(function(ha){return function(hb){var hc;hc=function(){return hb({k:g0(ha),ct:gW.ct});};return k.scheduler().Fork(hc);};},gT);};gU=k.checkCancel(gV);}return gU;},Register:function(he,hf){var hg;hg=he.r.push(hf)-1;return{Dispose:function(){return e.SetArray(he.r,hg,function(){});}};},Return:function(hj){var hk;hk=function(hl){return hl.k.call(null,{$:0,$0:hj});};return k.checkCancel(hk);},Scheduler:$.Class({Fork:function(hm){var hn,ho,hq=this;this.robin.push(hm);if(this.idle){this.idle=false;ho=o(function(){return hq.tick();},0);hn=void ho;}else{hn=null;}return hn;},tick:function(){var hr,hs,ht,hu,hv,hw,hy=this;hr=u.now();hs=true;while(hs){ht=this.robin.length;if(ht===0){this.idle=true;hu=hs=false;}else{(this.robin.shift())(null);if(u.now()-hr>40){hw=o(function(){return hy.tick();},0);hv=hs=false;}else{hv=null;}hu=hv;}}return;}},{New:function(){var hz;hz=$.New(this,{});hz.idle=true;hz.robin=[];return hz;}}),Sleep:function(hA){var hB;hB=function(hC){var hD,hE,hF,hG,hH,hI;hD=function(){return o(function(){var hL;s.Force(hG).Dispose();hL=function(){return hC.k.call(null,{$:0,$0:null});};return k.scheduler().Fork(hL);},hA);};hE=s.Create(hD);hF=function(){return k.Register(hC.ct,function(){var hP;n(s.Force(hE));hP=function(){return hC.k.call(null,{$:2,$0:new t("OperationCanceledException")});};return k.scheduler().Fork(hP);});};hG=s.Create(hF);hH=s.Force(hE);hI=s.Force(hG);return null;};return k.checkCancel(hB);},Start:function(hR,hS){return k.StartWithContinuations(hR,function(){},function(hU){var hV;hV=[hU];return v?v.log.apply(v,["WebSharper: Uncaught asynchronous exception"].concat(hV)):undefined;},function(){},hS);},StartChild:function(hX){var hY;hY=function(hZ){var h0,h1,h2,h5,h_;h0={contents:{$:0}};h1=[];h2=function(){return hX({k:function(h4){h0.contents={$:1,$0:h4};while(h1.length>0){(h1.shift())(h4);}return;},ct:hZ.ct});};k.scheduler().Fork(h2);h5=function(h6){var h7,h8,h9;h7=h0.contents;if(h7.$==0){h8=h1.push(h6.k);}else{h9=h7.$0;h8=h6.k.call(null,h9);}return h8;};h_=k.checkCancel(h5);return hZ.k.call(null,{$:0,$0:h_});};return k.checkCancel(hY);},StartWithContinuations:function(h$,ia,ib,ic,id){var ie,_if;ie=c.DefaultArg(id,k.defCTS().contents);_if=function(){return h$({k:function(ih){var ii,ij,ik,il;if(ih.$==1){ij=ih.$0;ii=ib(ij);}else{if(ih.$==2){ik=ih.$0;ii=ic(ik);}else{il=ih.$0;ii=ia(il);}}return ii;},ct:ie});};return k.scheduler().Fork(_if);},TryCancelled:function(im,_in){var io;io=function(ip){return im({k:function(iq){var ir,is;if(iq.$==2){is=iq.$0;_in(is);ir=ip.k.call(null,iq);}else{ir=ip.k.call(null,iq);}return ir;},ct:ip.ct});};return k.checkCancel(io);},TryFinally:function(it,iu){var iv;iv=function(iw){return it({k:function(ix){var iy,iz;try{iu(null);iy=iw.k.call(null,ix);}catch(iz){iy=iw.k.call(null,{$:1,$0:iz});}return iy;},ct:iw.ct});};return k.checkCancel(iv);},TryWith:function(iA,iB){var iC;iC=function(iD){return iA({k:function(iE){var iF,iG,iH,iI,iJ;if(iE.$==0){iG=iE.$0;iF=iD.k.call(null,{$:0,$0:iG});}else{if(iE.$==1){iH=iE.$0;try{iI=(iB(iH))(iD);}catch(iJ){iI=iD.k.call(null,iE);}iF=iI;}else{iF=iD.k.call(null,iE);}}return iF;},ct:iD.ct});};return k.checkCancel(iC);},Using:function(iK,iL){return k.TryFinally(iL(iK),function(){return iK.Dispose();});},While:function(iN,iO){return iN(null)?k.Bind(iO,function(){return k.While(iN,iO);}):k.Return(null);},checkCancel:function(iQ){return function(iR){return iR.ct.c?iR.k.call(null,{$:2,$0:new t("OperationCanceledException")}):iQ(iR);};},defCTS:$.Field(function(){return{contents:p.New()};}),scheduler:$.Field(function(){return w.New();})},Control:{createEvent:function(iS,iT,iU){return{AddHandler:iS,RemoveHandler:iT,Subscribe:function(iV){var iW;iW=iU(function(){return function(iY){return iV.OnNext.call(null,iY);};});iS(iW);return{Dispose:function(){return iT(iW);}};}};}},DateTimeHelpers:{AddMonths:function(i0,i1){var i2;i2=new u(i0);return(new u(i2.getFullYear(),i2.getMonth()+i1,i2.getDate(),i2.getHours(),i2.getMinutes(),i2.getSeconds(),i2.getMilliseconds())).getTime();},AddYears:function(i3,i4){var i5;i5=new u(i3);return(new u(i5.getFullYear()+i4,i5.getMonth(),i5.getDate(),i5.getHours(),i5.getMinutes(),i5.getSeconds(),i5.getMilliseconds())).getTime();},DatePortion:function(i6){var i7;i7=new u(i6);return(new u(i7.getFullYear(),i7.getMonth(),i7.getDate())).getTime();},TimePortion:function(i8){var i9;i9=new u(i8);return(((24*0+i9.getHours())*60+i9.getMinutes())*60+i9.getSeconds())*1000+i9.getMilliseconds();}},Enumerable:{Of:function(i_){return{GetEnumerator:i_};}},Enumerator:{Get:function(i$){var ja,jb,jh,ji;if(i$ instanceof $$.Array){jb=function(jc){var jd,je,jf,jg;jd=jc.s;if(jd<e.GetLength(i$)){jf=e.GetArray(i$,jd);jc.c=jf;jg=jd+1;jc.s=jg;je=true;}else{je=false;}return je;};ja=x.New(0,null,jb);}else{if(h.Equals(typeof i$,"string")){ji=function(jj){var jk,jl,jm,jn;jk=jj.s;if(jk<i$.length){jm=i$.charCodeAt(jk);jj.c=jm;jn=jk+1;jj.s=jn;jl=true;}else{jl=false;}return jl;};jh=x.New(0,null,ji);}else{jh=i$.GetEnumerator();}ja=jh;}return ja;},T:$.Class({MoveNext:function(){return this.n.call(null,this);},get_Current:function(){return this.c;}},{New:function(jo,jp,jq){var jr;jr=$.New(this,{});jr.s=jo;jr.c=jp;jr.n=jq;return jr;}})},ExtraTopLevelOperatorsProxy:{array2D:function(js){var jt,jv,jw;jt=function(ju){return b.ofSeq(ju);};jv=g.map(jt,js);jw=b.ofSeq(jv);jw.dims=2;return jw;}},Guid:$.Class({},{NewGuid:function(){var $0=this,$this=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=$$.Math.random()*16|0,v=c=="x"?r:r&0x3|0x8;return v.toString(16);});}}),Html:{Client:{Activator:{Activate:$.Field(function(){var jx,jy;if(A.hasDocument()){jy=B.getElementById("websharper-data");jx=jy?C(B).ready(function(){var jA,jB,jC,jD;jA=jy.getAttribute("content");jB=D.Activate(E.parse(jA));jC=G.GetFields(jB);jD=$.Tupled(function(jE){var jF,jG,jH,jI;jF=jE[0];jG=jE[1];jH=jG.get_Body();jI=B.getElementById(jF);return jH.ReplaceInDom(jI);});return b.iter(jD,jC);}):null;}else{jx=null;}return jx;}),hasDocument:function(){var $0=this,$this=this;return typeof $$.document!=="undefined";}},HtmlContentExtensions:{"IControlBody.SingleNode.Static":function(jJ){return I.New(jJ);},SingleNode:$.Class({ReplaceInDom:function(jK){var jL;jL=this.node.parentNode.replaceChild(this.node,jK);return;}},{New:function(jM){var jN;jN=$.New(this,{});jN.node=jM;return jN;}})}}},IntrinsicFunctionProxy:{Array2DZeroCreate:function(jO,jP){var jQ;jQ=b.init(jO,function(){return f(jP);});jQ.dims=2;return jQ;},BoundsCheck:function(jS,jT){return(jT<0?true:jT>=e.GetLength(jS))?c.Raise(new t("IndexOutOfRangeException")):null;},BoundsCheck2D:function(jU,jV,jW){return(((jV<0?true:jW<0)?true:jV>=jU.length)?true:jW>=(jU.length?jU[0].length:0))?c.Raise(new t("IndexOutOfRangeException")):null;},GetArray:function(jX,jY){e.BoundsCheck(jX,jY);return jX[jY];},GetArray2D:function(jZ,j0,j1){e.BoundsCheck2D(jZ,j0,j1);return jZ[j0][j1];},GetArray2DSub:function(j2,j3,j4,j5,j6){var j7,j8,j9,j_,j$;j7=j5<0?0:j5;j8=j6<0?0:j6;j9=e.Array2DZeroCreate(j7,j8);for(j_=0;j_<=j7-1;j_++){for(j$=0;j$<=j8-1;j$++){e.SetArray2D(j9,j_,j$,e.GetArray2D(j2,j3+j_,j4+j$));}}return j9;},GetArraySub:function(ka,kb,kc){var kd,ke;kd=f(kc);for(ke=0;ke<=kc-1;ke++){e.SetArray(kd,ke,e.GetArray(ka,kb+1));}return kd;},GetLength:function(kf){var kg;kg=kf.dims;return kg===2?kf.length*kf.length:kf.length;},SetArray:function(kh,ki,kj){e.BoundsCheck(kh,ki);kh[ki]=kj;return;},SetArray2D:function(kk,kl,km,kn){e.BoundsCheck2D(kk,kl,km);kk[kl][km]=kn;return;},SetArray2DSub:function(ko,kp,kq,kr,ks,kt){var ku,kv;for(ku=0;ku<=kr-1;ku++){for(kv=0;kv<=ks-1;kv++){e.SetArray2D(ko,kp+ku,kq+kv,e.GetArray2D(kt,ku,kv));}}return;},SetArraySub:function(kw,kx,ky,kz){var kA;for(kA=0;kA<=ky-1;kA++){e.SetArray(kw,kx+kA,e.GetArray(kz,kA));}return;}},JavaScript:{JSModule:{Delete:function($x,$field){var $0=this,$this=this;return delete $x[$field];},ForEach:function($x,$iter){var $0=this,$this=this;for(var k in $x){if($iter(k))break;}},GetFieldNames:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push(k);return r;},GetFieldValues:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push($o[k]);return r;},GetFields:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push([k,$o[k]]);return r;},Log:function($x){var $0=this,$this=this;if($$.console)$$.console.log($x);},LogMore:function($args){var $0=this,$this=this;if($$.console)$$.console.log.apply($$.console,$args);}},Pervasives:{NewFromList:function(kB){var kC,kD,kE,kF,kG;kC={};kD=i.Get(kB);while(kD.MoveNext()){kE=kD.get_Current();kF=kE[1];kG=kE[0];kC[kG]=kF;}return kC;}}},Json:{Activate:function(kH){var kI,kJ,kK;kI=kH.$TYPES;for(kJ=0;kJ<=e.GetLength(kI)-1;kJ++){e.SetArray(kI,kJ,D.lookup(e.GetArray(kI,kJ)));}kK=function(kL){var kM,kN,kO,kP,kQ,kR;if(h.Equals(kL,null)){kM=kL;}else{kN=typeof kL;if(kN==="object"){if(kL instanceof $$.Array){kP=D.shallowMap(kK,kL);}else{kQ=D.shallowMap(kK,kL.$V);kR=kL.$T;kP=h.Equals(typeof kR,"undefined")?kQ:D.restore(e.GetArray(kI,kR),kQ);}kO=kP;}else{kO=kL;}kM=kO;}return kM;};return kK(kH.$DATA);},lookup:function(kS){var kT,kU,kV,kW,kX,kY;kT=e.GetLength(kS);kU=$$;kV=0;while(kV<kT){kW=e.GetArray(kS,kV);kX=kU[kW];if(!h.Equals(typeof kX,undefined)){kU=kX;kY=kV=kV+1;}else{kY=c.FailWith("Invalid server reply. Failed to find type: "+kW);}}return kU;},restore:function(kZ,k0){var k1;k1=new kZ();G.ForEach(k0,function(k2){k1[k2]=k0[k2];return false;});return k1;},shallowMap:function(k3,k4){var k5,k6,k7,k8;if(k4 instanceof $$.Array){k5=b.map(k3,k4);}else{k6=typeof k4;if(k6==="object"){k8={};G.ForEach(k4,function(k9){k8[k9]=k3(k4[k9]);return false;});k7=k8;}else{k7=k4;}k5=k7;}return k5;}},Lazy:{Create:function(k_){var k$,la;k$={value:undefined,created:false,eval:k_};la=function(){var lc;if(k$.created){lc=k$.value;}else{k$.created=true;k$.value=k_(null);lc=k$.value;}return lc;};k$.eval=la;return k$;},CreateFromValue:function(ld){return{value:ld,created:true,eval:function(){return ld;},eval:function(){return ld;}};},Force:function(lg){return lg.eval.call(null,null);}},List:{T:$.Class({GetEnumerator:function(){var lh;lh=function(li){var lj,lk,ll,lm;lj=li.s;if(lj.$==0){lk=false;}else{ll=lj.$1;lm=lj.$0;li.c=lm;li.s=ll;lk=true;}return lk;};return x.New(this,null,lh);},get_Item:function(ln){return g.nth(ln,this);},get_Length:function(){return g.length(this);}},{Construct:function(lo,lp){return $.New(K,{$:1,$0:lo,$1:lp});},get_Nil:function(){return $.New(K,{$:0});}}),append:function(lq,lr){return J.ofSeq(g.append(lq,lr));},choose:function(ls,lt){return J.ofSeq(g.choose(ls,lt));},collect:function(lu,lv){return J.ofSeq(g.collect(lu,lv));},concat:function(lw){return J.ofSeq(g.concat(lw));},exists2:function(lx,ly,lz){return b.exists2(lx,b.ofSeq(ly),b.ofSeq(lz));},filter:function(lA,lB){return J.ofSeq(g.filter(lA,lB));},fold2:function(lC,lD,lE,lF){return b.fold2(lC,lD,b.ofSeq(lE),b.ofSeq(lF));},foldBack:function(lG,lH,lI){return b.foldBack(lG,b.ofSeq(lH),lI);},foldBack2:function(lJ,lK,lL,lM){return b.foldBack2(lJ,b.ofSeq(lK),b.ofSeq(lL),lM);},forall2:function(lN,lO,lP){return b.forall2(lN,b.ofSeq(lO),b.ofSeq(lP));},head:function(lQ){var lR,lS;if(lQ.$==1){lS=lQ.$0;lR=lS;}else{lR=c.FailWith("The input list was empty.");}return lR;},init:function(lT,lU){return J.ofArray(b.init(lT,lU));},iter2:function(lV,lW,lX){return b.iter2(lV,b.ofSeq(lW),b.ofSeq(lX));},iteri2:function(lY,lZ,l0){return b.iteri2(lY,b.ofSeq(lZ),b.ofSeq(l0));},map:function(l1,l2){return J.ofSeq(g.map(l1,l2));},map2:function(l3,l4,l5){return J.ofArray(b.map2(l3,b.ofSeq(l4),b.ofSeq(l5)));},map3:function(l6,l7,l8,l9){var l_;l_=b.map2(function(l$){return function(ma){return l$(ma);};},b.map2(l6,b.ofSeq(l7),b.ofSeq(l8)),b.ofSeq(l9));return J.ofArray(l_);},mapi:function(mb,mc){return J.ofSeq(g.mapi(mb,mc));},mapi2:function(md,me,mf){return J.ofArray(b.mapi2(md,b.ofSeq(me),b.ofSeq(mf)));},max:function(mg){return g.reduce(function(mh){return function(mi){return c.Max(mh,mi);};},mg);},maxBy:function(mj,mk){return g.reduce(function(ml){return function(mm){return h.Compare(mj(ml),mj(mm))===1?ml:mm;};},mk);},min:function(mn){return g.reduce(function(mo){return function(mp){return c.Min(mo,mp);};},mn);},minBy:function(mq,mr){return g.reduce(function(ms){return function(mt){return h.Compare(mq(ms),mq(mt))===-1?ms:mt;};},mr);},ofArray:function(mu){var mv,mw;mv=$.New(K,{$:0});for(mw=0;mw<=e.GetLength(mu)-1;mw++){mv=$.New(K,{$:1,$0:e.GetArray(mu,e.GetLength(mu)-mw-1),$1:mv});}return mv;},ofSeq:function(mx){var my,mz,mA;my=[];mz=i.Get(mx);while(mz.MoveNext()){my.unshift(mz.get_Current());}mA=my.slice(0);mA.reverse();return J.ofArray(mA);},partition:function(mB,mC){var mD,mE,mF;mD=b.partition(mB,b.ofSeq(mC));mE=mD[1];mF=mD[0];return[J.ofArray(mF),J.ofArray(mE)];},permute:function(mG,mH){return J.ofArray(b.permute(mG,b.ofSeq(mH)));},reduceBack:function(mI,mJ){return b.reduceBack(mI,b.ofSeq(mJ));},replicate:function(mK,mL){return J.ofArray(b.create(mK,mL));},rev:function(mM){var mN;mN=b.ofSeq(mM);mN.reverse();return J.ofArray(mN);},scan:function(mO,mP,mQ){return J.ofSeq(g.scan(mO,mP,mQ));},scanBack:function(mR,mS,mT){return J.ofArray(b.scanBack(mR,b.ofSeq(mS),mT));},sort:function(mU){var mV;mV=b.ofSeq(mU);b.sortInPlace(mV);return J.ofArray(mV);},sortBy:function(mW,mX){return J.sortWith(function(mY){return function(mZ){return c.Compare(mW(mY),mW(mZ));};},mX);},sortWith:function(m0,m1){var m2;m2=b.ofSeq(m1);b.sortInPlaceWith(m0,m2);return J.ofArray(m2);},tail:function(m3){var m4,m5;if(m3.$==1){m5=m3.$1;m4=m5;}else{m4=c.FailWith("The input list was empty.");}return m4;},unzip:function(m6){var m7,m8,m9,m_,m$,na;m7=[];m8=[];m9=i.Get(m6);while(m9.MoveNext()){m_=m9.get_Current();m$=m_[1];na=m_[0];m7.push(na);m8.push(m$);}return[J.ofArray(m7.slice(0)),J.ofArray(m8.slice(0))];},unzip3:function(nb){var nc,nd,ne,nf,ng,nh,ni,nj;nc=[];nd=[];ne=[];nf=i.Get(nb);while(nf.MoveNext()){ng=nf.get_Current();nh=ng[2];ni=ng[1];nj=ng[0];nc.push(nj);nd.push(ni);ne.push(nh);}return[J.ofArray(nc.slice(0)),J.ofArray(nd.slice(0)),J.ofArray(ne.slice(0))];},zip:function(nk,nl){return J.ofArray(b.zip(b.ofSeq(nk),b.ofSeq(nl)));},zip3:function(nm,nn,no){return J.ofArray(b.zip3(b.ofSeq(nm),b.ofSeq(nn),b.ofSeq(no)));}},OperatorIntrinsics:{GetArraySlice:function(np,nq,nr){var ns,nt,nu,nv,nw,nx,ny,nz;ns=[nq,nr];if(ns[0].$==0){if(ns[1].$==1){nv=ns[1].$0;nu=np.slice(0,nv+1);}else{nu=[];}nt=nu;}else{if(ns[1].$==0){nx=ns[0].$0;nw=np.slice(nx);}else{ny=ns[1].$0;nz=ns[0].$0;nw=np.slice(nz,ny+1);}nt=nw;}return nt;},GetArraySlice2D:function(nA,nB,nC,nD,nE){var nF,nG,nH,nI,nJ,nK,nL,nM,nN,nO,nP,nQ,nR,nS;if(nB.$==1){nH=nB.$0;nG=nH;}else{nG=0;}nF=nG;if(nD.$==1){nK=nD.$0;nJ=nK;}else{nJ=0;}nI=nJ;if(nC.$==1){nN=nC.$0;nM=nN;}else{nM=nA.length-1;}nL=nM;if(nE.$==1){nQ=nE.$0;nP=nQ;}else{nP=(nA.length?nA[0].length:0)-1;}nO=nP;nR=nL-nF+1;nS=nO-nI+1;return e.GetArray2DSub(nA,nF,nI,nR,nS);},GetArraySlice2DFixed1:function(nT,nU,nV,nW){var nX,nY,nZ,n0,n1,n2,n3,n4,n5;if(nV.$==1){nZ=nV.$0;nY=nZ;}else{nY=0;}nX=nY;if(nW.$==1){n2=nW.$0;n1=n2;}else{n1=(nT.length?nT[0].length:0)-1;}n0=n1;n3=n0-nX+1;n4=f(n3);for(n5=0;n5<=n3-1;n5++){e.SetArray(n4,n5,e.GetArray2D(nT,nU,nX+n5));}return n4;},GetArraySlice2DFixed2:function(n6,n7,n8,n9){var n_,n$,oa,ob,oc,od,oe,of,og;if(n7.$==1){oa=n7.$0;n$=oa;}else{n$=0;}n_=n$;if(n8.$==1){od=n8.$0;oc=od;}else{oc=n6.length-1;}ob=oc;oe=ob-n_+1;of=f(oe);for(og=0;og<=oe-1;og++){e.SetArray(of,og,e.GetArray2D(n6,n_+og,n9));}return of;},GetStringSlice:function(oh,oi,oj){var ok,ol,om,on,oo,op,oq,or;ok=[oi,oj];if(ok[0].$==0){if(ok[1].$==1){on=ok[1].$0;om=oh.slice(0,on+1);}else{om="";}ol=om;}else{if(ok[1].$==0){op=ok[0].$0;oo=oh.slice(op);}else{oq=ok[1].$0;or=ok[0].$0;oo=oh.slice(or,oq+1);}ol=oo;}return ol;},SetArraySlice:function(os,ot,ou,ov){var ow,ox,oy,oz,oA,oB;if(ot.$==1){oy=ot.$0;ox=oy;}else{ox=0;}ow=ox;if(ou.$==1){oB=ou.$0;oA=oB;}else{oA=e.GetLength(os)-1;}oz=oA;return e.SetArraySub(os,ow,oz-ow+1,ov);},SetArraySlice2D:function(oC,oD,oE,oF,oG,oH){var oI,oJ,oK,oL,oM,oN,oO,oP,oQ,oR,oS,oT;if(oD.$==1){oK=oD.$0;oJ=oK;}else{oJ=0;}oI=oJ;if(oF.$==1){oN=oF.$0;oM=oN;}else{oM=0;}oL=oM;if(oE.$==1){oQ=oE.$0;oP=oQ;}else{oP=oC.length-1;}oO=oP;if(oG.$==1){oT=oG.$0;oS=oT;}else{oS=(oC.length?oC[0].length:0)-1;}oR=oS;return e.SetArray2DSub(oC,oI,oL,oO-oI+1,oR-oL+1,oH);},SetArraySlice2DFixed1:function(oU,oV,oW,oX,oY){var oZ,o0,o1,o2,o3,o4,o5,o6;if(oW.$==1){o1=oW.$0;o0=o1;}else{o0=0;}oZ=o0;if(oX.$==1){o4=oX.$0;o3=o4;}else{o3=(oU.length?oU[0].length:0)-1;}o2=o3;o5=o2-oZ+1;for(o6=0;o6<=o5-1;o6++){e.SetArray2D(oU,oV,oZ+o6,e.GetArray(oY,o6));}return;},SetArraySlice2DFixed2:function(o7,o8,o9,o_,o$){var pa,pb,pc,pd,pe,pf,pg,ph;if(o8.$==1){pc=o8.$0;pb=pc;}else{pb=0;}pa=pb;if(o9.$==1){pf=o9.$0;pe=pf;}else{pe=o7.length-1;}pd=pe;pg=pd-pa+1;for(ph=0;ph<=pg-1;ph++){e.SetArray2D(o7,pa+ph,o_,e.GetArray(o$,ph));}return;}},Operators:{Compare:function(pi,pj){return h.Compare(pi,pj);},Decrement:function(pk){pk.contents=pk.contents-1;},DefaultArg:function(pl,pm){var pn,po;if(pl.$==0){pn=pm;}else{po=pl.$0;pn=po;}return pn;},FailWith:function(pp){return c.Raise(new t(pp));},Increment:function(pq){pq.contents=pq.contents+1;},KeyValue:function(pr){return[pr.K,pr.V];},Max:function(ps,pt){return h.Compare(ps,pt)===1?ps:pt;},Min:function(pu,pv){return h.Compare(pu,pv)===-1?pu:pv;},Pown:function(pw,px){var py;py=function(pz){var pA,pB,pC;if(pz===1){pA=pw;}else{if(pz%2===0){pC=py(pz/2>>0);pB=pC*pC;}else{pB=pw*py(pz-1);}pA=pB;}return pA;};return py(px);},Raise:function($e){var $0=this,$this=this;throw $e;},Sign:function(pD){return pD===0?0:pD<0?-1:1;},Truncate:function(pE){return pE<0?L.ceil(pE):L.floor(pE);},Using:function(pF,pG){var pH;try{pH=pG(pF);}finally{pF.Dispose();}return pH;},range:function(pI,pJ){return g.init(1+pJ-pI,function(pK){return pK+pI;});},step:function(pL,pM,pN){var pO,pP,pR,pT;pO=c.Sign(pM);pP=function(pQ){return pO*(pN-pQ)>=0;};pR=g.initInfinite(function(pS){return pL+pS*pM;});pT=g.takeWhile(pP,pR);return pT;}},Option:{bind:function(pU,pV){var pW,pX;if(pV.$==0){pW={$:0};}else{pX=pV.$0;pW=pU(pX);}return pW;},exists:function(pY,pZ){var p0,p1;if(pZ.$==0){p0=false;}else{p1=pZ.$0;p0=pY(p1);}return p0;},fold:function(p2,p3,p4){var p5,p6;if(p4.$==0){p5=p3;}else{p6=p4.$0;p5=(p2(p3))(p6);}return p5;},foldBack:function(p7,p8,p9){var p_,p$;if(p8.$==0){p_=p9;}else{p$=p8.$0;p_=(p7(p$))(p9);}return p_;},forall:function(qa,qb){var qc,qd;if(qb.$==0){qc=true;}else{qd=qb.$0;qc=qa(qd);}return qc;},iter:function(qe,qf){var qg,qh;if(qf.$==0){qg=null;}else{qh=qf.$0;qg=qe(qh);}return qg;},map:function(qi,qj){var qk,ql;if(qj.$==0){qk={$:0};}else{ql=qj.$0;qk={$:1,$0:qi(ql)};}return qk;},toArray:function(qm){var qn,qo;if(qm.$==0){qn=[];}else{qo=qm.$0;qn=[qo];}return qn;},toList:function(qp){var qq,qr;if(qp.$==0){qq=$.New(K,{$:0});}else{qr=qp.$0;qq=J.ofArray([qr]);}return qq;}},PrintfHelpers:{padNumLeft:function(qs,qt){var qu,qv,qw,qx;qu=e.GetArray(qs,0);if((qu===" "?true:qu==="+")?true:qu==="-"){qw=qs.substr(1);qx=qt-1;qv=qu+M.PadLeftWith(qw,qx,48);}else{qv=M.PadLeftWith(qs,qt,48);}return qv;},plusForPos:function(qy,qz){return 0<=qy?"+"+qz:qz;},plusForPos0:function(qA,qB){return 0<=qA?"+"+qB:qB;},prettyPrint:function(qD){var qE,qO,qP,qQ,qR,qS,qU;qE=function(qF){var qG,qH,qI,qJ,qN;qG=$$.String(qF);if(qG==="[object Object]"){qI=G.GetFields(qF);qJ=$.Tupled(function(qK){var qL,qM;qL=qK[0];qM=qK[1];return qL+" = "+N.prettyPrint(qM);});qN=b.map(qJ,qI);qH="{"+M.concat("; ",qN)+"}";}else{qH=qG;}return qH;};qO=typeof qD;if(qO=="string"){qP="\""+qD+"\"";}else{if(qO=="object"){if(qD instanceof $$.Array){qS=function(qT){return N.prettyPrint(qT);};qU=b.map(qS,qD);qR="[|"+M.concat("; ",qU)+"|]";}else{qR=qE(qD);}qQ=qR;}else{qQ=$$.String(qD);}qP=qQ;}return qP;},printArray:function(qV,qW){var qX;qX=b.map(qV,qW);return"[|"+M.concat("; ",qX)+"|]";},printArray2D:function(qY,qZ){var q0;q0=g.delay(function(){var q2;q2=qZ.length?qZ[0].length:0;return g.map(function(q3){var q4;q4=g.delay(function(){return g.map(function(q6){return qY(e.GetArray2D(qZ,q3,q6));},c.range(0,q2-1));});return M.concat("; ",q4);},c.range(0,qZ.length-1));});return"[["+M.concat("][",q0)+"]]";},printList:function(q7,q8){var q9;q9=g.map(q7,q8);return"["+M.concat("; ",q9)+"]";},spaceForPos:function(q_,q$){return 0<=q_?" "+q$:q$;},toSafe:function(ra){return ra==null?"":ra;}},Queue:{Clear:function(rb){return rb.splice(0,e.GetLength(rb));},Contains:function(rc,rd){return g.exists(function(re){return h.Equals(rd,re);},rc);},CopyTo:function(rf,rg,rh){return b.blit(rf,0,rg,rh,e.GetLength(rf));}},Random:$.Class({Next:function(){return L.floor(L.random()*2147483648);},Next1:function(ri){return ri<0?c.FailWith("'maxValue' must be greater than zero."):L.floor(L.random()*ri);},Next2:function(rj,rk){var rl,rm;if(rj>rk){rl=c.FailWith("'minValue' cannot be greater than maxValue.");}else{rm=rk-rj;rl=rj+L.floor(L.random()*rm);}return rl;},NextBytes:function(rn){var ro;for(ro=0;ro<=e.GetLength(rn)-1;ro++){e.SetArray(rn,ro,L.floor(L.random()*256));}return;}},{New:function(){return $.New(this,{});}}),Remoting:{AjaxProvider:$.Field(function(){return P.New();}),AjaxRemotingProvider:$.Class({},{Async:function(rp,rq){var rr,rs,rt;rr=O.makeHeaders(rp);rs=O.makePayload(rq);rt=function(){var rv,rw;rv=Q.get_CancellationToken();rw=function(rx){var ry,rQ;ry=$.Tupled(function(rz){var rA,rB,rC,rD,rE,rH,rJ,rM,rP;rA=rz[0];rB=rz[1];rC=rz[2];rD={contents:true};rE=function(){var rG;if(rD.contents){rD.contents=false;rG=rC(new t("OperationCanceledException"));}else{rG=null;}return rG;};rH=k.Register(rx,function(){return rE();});rJ=function(rK){var rL;if(rD.contents){rD.contents=false;rH.Dispose();rL=rA(D.Activate(E.parse(rK)));}else{rL=null;}return rL;};rM=function(rN){var rO;if(rD.contents){rD.contents=false;rH.Dispose();rO=rB(rN);}else{rO=null;}return rO;};rP=O.EndPoint();return O.AjaxProvider().Async(rP,rr,rs,rJ,rM);});rQ=k.FromContinuations(ry);return rQ;};return k.Bind(rv,rw);};return k.Delay(rt);},Send:function(rR,rS){var rT,rU,rV;rT=R.Async(rR,rS);rU=k.Ignore(rT);rV={$:0};return k.Start(rU,rV);},Sync:function(rW,rX){var rY,rZ,r0,r1;rY=O.EndPoint();rZ=O.makeHeaders(rW);r0=O.makePayload(rX);r1=O.AjaxProvider().Sync(rY,rZ,r0);return D.Activate(E.parse(r1));}}),EndPoint:$.Field(function(){return"?";}),UseHttps:function(){var r2,r3,r4,r5,r6,r7;try{r3=S.location.href;if(!M.StartsWith(r3,"https://")){r5=S.location.href;r6=M.Replace(r5,"http://","https://");O.EndPoint=function(){return r6;};r4=true;}else{r4=false;}r2=r4;}catch(r7){r2=false;}return r2;},XhrProvider:$.Class({Async:function(r8,r9,r_,r$,sa){return O.ajax(true,r8,r9,r_,r$,sa);},Sync:function(sb,sc,sd){var se;se={contents:undefined};O.ajax(false,sb,sc,sd,function(sf){se.contents=sf;},function(sg){return c.Raise(sg);});return se.contents;}},{New:function(){return $.New(this,{});}}),ajax:function($async,$url,$headers,$data,$ok,$err){var $0=this,$this=this;var xhr=new $$.XMLHttpRequest();xhr.withCredentials=true;xhr.open("POST",$url,$async);for(var h in $headers){xhr.setRequestHeader(h,$headers[h]);}function k(){if(xhr.status==200){$ok(xhr.responseText);}else{var msg="Response status is not 200: ";$err(new $$.Error(msg+xhr.status));}}if("onload"in xhr){xhr.onload=xhr.onerror=xhr.onabort=k;}else{xhr.onreadystatechange=function(){if(xhr.readyState==4){k();}};}xhr.send($data);},makeHeaders:function(sh){var si;si={};si["content-type"]="application/json";si["x-websharper-rpc"]=sh;return si;},makePayload:function(sj){return E.stringify(sj);}},Seq:{append:function(sk,sl){return T.Of(function(){var sn,so;sn=i.Get(sk);so=function(sp){var sq,sr,ss,st,su,sv;if(sp.s.MoveNext()){sr=sp.s.get_Current();sp.c=sr;sq=true;}else{if(sp.s===sn){st=i.Get(sl);sp.s=st;if(st.MoveNext()){sv=st.get_Current();sp.c=sv;su=true;}else{su=false;}ss=su;}else{ss=false;}sq=ss;}return sq;};return x.New(sn,null,so);});},average:function(sw){var sx,sC,sD;sx=g.fold($.Tupled(function(sy){var sz,sA;sz=sy[0];sA=sy[1];return function(sB){return[sz+1,sA+sB];};}),[0,0],sw);sC=sx[1];sD=sx[0];return sC/sD;},averageBy:function(sE,sF){var sG,sL,sM;sG=g.fold($.Tupled(function(sH){var sI,sJ;sI=sH[0];sJ=sH[1];return function(sK){return[sI+1,sJ+sE(sK)];};}),[0,0],sF);sL=sG[1];sM=sG[0];return sL/sM;},cache:function(sN){var sO,sP,sQ;sO=[];sP=i.Get(sN);sQ=function(){var sS;sS=function(sT){var sU,sV,sW,sX,sY,sZ;if(sT.s+1<sO.length){sV=sT.s+1;sT.s=sV;sW=sO[sT.s];sT.c=sW;sU=true;}else{if(sP.MoveNext()){sY=sT.s+1;sT.s=sY;sZ=sP.get_Current();sT.c=sZ;sO.push(sT.get_Current());sX=true;}else{sX=false;}sU=sX;}return sU;};return x.New(0,null,sS);};return T.Of(sQ);},choose:function(s0,s1){var s2;s2=function(s3){var s4,s5,s6;s4=s0(s3);if(s4.$==0){s5=$.New(K,{$:0});}else{s6=s4.$0;s5=J.ofArray([s6]);}return s5;};return g.collect(s2,s1);},collect:function(s7,s8){return g.concat(g.map(s7,s8));},compareWith:function(s9,s_,s$){var ta,tb,tc,td,te;ta=i.Get(s_);tb=i.Get(s$);tc=0;td=true;while(td?tc===0:false){te=[ta.MoveNext(),tb.MoveNext()];te[0]?te[1]?tc=(s9(ta.get_Current()))(tb.get_Current()):tc=1:te[1]?tc=-1:td=false;}return tc;},concat:function(tf){return T.Of(function(){var th,ti;th=i.Get(tf);ti=function(tj){var tk,tl,tm,tn,to,tp;tk=tj.s;if(h.Equals(tk,null)){if(th.MoveNext()){tn=i.Get(th.get_Current());tj.s=tn;tm=ti(tj);}else{tm=false;}tl=tm;}else{if(tk.MoveNext()){tp=tk.get_Current();tj.c=tp;to=true;}else{tj.s=null;to=ti(tj);}tl=to;}return tl;};return x.New(null,null,ti);});},countBy:function(tq,tr){var ts;ts=function(){var tu,tv,tw,tx,ty,tz,tA,tC,tD;tu={};tv=i.Get(tr);tw=[];while(tv.MoveNext()){tx=tq(tv.get_Current());ty=h.Hash(tx);if(tu.hasOwnProperty(ty)){tz=void(tu[ty]=tu[ty]+1);}else{tw.push(tx);tz=void(tu[ty]=1);}}tA=function(tB){return[tB,tu[h.Hash(tB)]];};tC=tw.slice(0);tD=b.map(tA,tC);return tD;};return g.delay(ts);},delay:function(tE){return T.Of(function(){return i.Get(tE(null));});},distinct:function(tG){return g.distinctBy(function(tH){return tH;},tG);},distinctBy:function(tI,tJ){var tK;tK=function(){var tM,tN,tO;tM=i.Get(tJ);tN={};tO=function(tP){var tQ,tR,tS,tV,tX,tY,tZ;if(tM.MoveNext()){tR=tM.get_Current();tS=function(tT){var tU;tU=tI(tT);return h.Hash(tU);};tV=function(tW){return tN.hasOwnProperty(tS(tW));};tX=tV(tR);while(tX?tM.MoveNext():false){tR=tM.get_Current();tX=tV(tR);}if(tX){tY=false;}else{tN[tS(tR)]=null;tZ=tR;tP.c=tZ;tY=true;}tQ=tY;}else{tQ=false;}return tQ;};return x.New(null,null,tO);};return T.Of(tK);},empty:function(){return[];},enumFinally:function(t0,t1){return T.Of(function(){var t3,t4,t5,t6;try{t4=i.Get(t0);}catch(t5){t1(null);t4=c.Raise(t5);}t3=t4;t6=function(t7){var t8,t9,t_,t$;try{if(t3.MoveNext()){t_=t3.get_Current();t7.c=t_;t9=true;}else{t1(null);t9=false;}t8=t9;}catch(t$){t1(null);t8=c.Raise(t$);}return t8;};return x.New(null,null,t6);});},enumUsing:function(ua,ub){return ub(ua);},enumWhile:function(uc,ud){return T.Of(function(){var uf,up;uf=function(ug){var uh,ui,uj,uk,ul,um,un,uo;uh=ug.s;if(uh.$==1){uj=uh.$0;if(uj.MoveNext()){ul=uj.get_Current();ug.c=ul;uk=true;}else{um={$:0};ug.s=um;uk=uf(ug);}ui=uk;}else{if(uc(null)){uo={$:1,$0:i.Get(ud)};ug.s=uo;un=uf(ug);}else{un=false;}ui=un;}return ui;};up={$:0};return x.New(up,null,uf);});},exists:function(uq,ur){var us,ut;us=i.Get(ur);ut=false;while(!ut?us.MoveNext():false){ut=uq(us.get_Current());}return ut;},exists2:function(uu,uv,uw){var ux,uy,uz;ux=i.Get(uv);uy=i.Get(uw);uz=false;while((!uz?ux.MoveNext():false)?uy.MoveNext():false){uz=(uu(ux.get_Current()))(uy.get_Current());}return uz;},filter:function(uA,uB){var uC;uC=function(){var uE,uF;uE=i.Get(uB);uF=function(uG){var uH,uI,uJ,uK,uL;uH=uE.MoveNext();uI=uE.get_Current();uJ=false;while(uH){if(uA(uI)){uL=uI;uG.c=uL;uJ=true;uK=uH=false;}else{uK=uE.MoveNext()?uI=uE.get_Current():uH=false;}}return uJ;};return x.New(null,null,uF);};return T.Of(uC);},find:function(uM,uN){var uO,uP,uQ;uO=g.tryFind(uM,uN);if(uO.$==0){uP=c.FailWith("KeyNotFoundException");}else{uQ=uO.$0;uP=uQ;}return uP;},findIndex:function(uR,uS){var uT,uU,uV;uT=g.tryFindIndex(uR,uS);if(uT.$==0){uU=c.FailWith("KeyNotFoundException");}else{uV=uT.$0;uU=uV;}return uU;},fold:function(uW,uX,uY){var uZ,u0;uZ=uX;u0=i.Get(uY);while(u0.MoveNext()){uZ=(uW(uZ))(u0.get_Current());}return uZ;},forall:function(u1,u2){return!g.exists(function(u3){return!u1(u3);},u2);},forall2:function(u4,u5,u6){return!g.exists2(function(u7){return function(u8){return!(u4(u7))(u8);};},u5,u6);},groupBy:function(u9,u_){return g.delay(function(){var va,vb,vc,vd,ve,vf,vg;va={};vb={};vc=[];vd=i.Get(u_);while(vd.MoveNext()){ve=vd.get_Current();vf=u9(ve);vg=h.Hash(vf);!va.hasOwnProperty(vg)?vc.push(vf):null;vb[vg]=vf;va.hasOwnProperty(vg)?va[vg].push(ve):void(va[vg]=[ve]);}return b.map(function(vh){return[vh,va[h.Hash(vh)]];},vc);});},head:function(vi){var vj;vj=i.Get(vi);return vj.MoveNext()?vj.get_Current():g.insufficient();},init:function(vk,vl){return g.take(vk,g.initInfinite(vl));},initInfinite:function(vm){var vn;vn=function(){var vp;vp=function(vq){var vr,vs;vr=vm(vq.s);vq.c=vr;vs=vq.s+1;vq.s=vs;return true;};return x.New(0,null,vp);};return T.Of(vn);},insufficient:function(){return c.FailWith("The input sequence has an insufficient number of elements.");},isEmpty:function(vt){var vu;vu=i.Get(vt);return!vu.MoveNext();},iter:function(vv,vw){return g.iteri(function(){return function(vy){return vv(vy);};},vw);},iter2:function(vz,vA,vB){var vC,vD;vC=i.Get(vA);vD=i.Get(vB);while(vC.MoveNext()?vD.MoveNext():false){(vz(vC.get_Current()))(vD.get_Current());}return;},iteri:function(vE,vF){var vG,vH;vG=0;vH=i.Get(vF);while(vH.MoveNext()){(vE(vG))(vH.get_Current());vG=vG+1;}return;},length:function(vI){var vJ,vK;vJ=0;vK=i.Get(vI);while(vK.MoveNext()){vJ=vJ+1;}return vJ;},map:function(vL,vM){var vN;vN=function(){var vP,vQ;vP=i.Get(vM);vQ=function(vR){var vS,vT;if(vP.MoveNext()){vT=vL(vP.get_Current());vR.c=vT;vS=true;}else{vS=false;}return vS;};return x.New(null,null,vQ);};return T.Of(vN);},mapi:function(vU,vV){return g.mapi2(vU,g.initInfinite(function(vW){return vW;}),vV);},mapi2:function(vX,vY,vZ){var v0;v0=function(){var v2,v3,v4;v2=i.Get(vY);v3=i.Get(vZ);v4=function(v5){var v6,v7;if(v2.MoveNext()?v3.MoveNext():false){v7=(vX(v2.get_Current()))(v3.get_Current());v5.c=v7;v6=true;}else{v6=false;}return v6;};return x.New(null,null,v4);};return T.Of(v0);},max:function(v8){return g.reduce(function(v9){return function(v_){return h.Compare(v9,v_)>=0?v9:v_;};},v8);},maxBy:function(v$,wa){return g.reduce(function(wb){return function(wc){return h.Compare(v$(wb),v$(wc))>=0?wb:wc;};},wa);},min:function(wd){return g.reduce(function(we){return function(wf){return h.Compare(we,wf)<=0?we:wf;};},wd);},minBy:function(wg,wh){return g.reduce(function(wi){return function(wj){return h.Compare(wg(wi),wg(wj))<=0?wi:wj;};},wh);},nth:function(wk,wl){var wm,wn;wk<0?c.FailWith("negative index requested"):null;wm=-1;wn=i.Get(wl);while(wm<wk){!wn.MoveNext()?g.insufficient():null;wm=wm+1;}return wn.get_Current();},pairwise:function(wo){var wp,wr;wp=function(wq){return[e.GetArray(wq,0),e.GetArray(wq,1)];};wr=g.windowed(2,wo);return g.map(wp,wr);},pick:function(ws,wt){var wu,wv,ww;wu=g.tryPick(ws,wt);if(wu.$==0){wv=c.FailWith("KeyNotFoundException");}else{ww=wu.$0;wv=ww;}return wv;},readOnly:function(wx){return T.Of(function(){return i.Get(wx);});},reduce:function(wz,wA){var wB,wC;wB=i.Get(wA);!wB.MoveNext()?c.FailWith("The input sequence was empty"):null;wC=wB.get_Current();while(wB.MoveNext()){wC=(wz(wC))(wB.get_Current());}return wC;},scan:function(wD,wE,wF){var wG;wG=function(){var wI,wJ;wI=i.Get(wF);wJ=function(wK){var wL,wM,wN;if(wK.s){if(wI.MoveNext()){wN=(wD(wK.get_Current()))(wI.get_Current());wK.c=wN;wM=true;}else{wM=false;}wL=wM;}else{wK.c=wE;wK.s=true;wL=true;}return wL;};return x.New(false,null,wJ);};return T.Of(wG);},skip:function(wO,wP){return T.Of(function(){var wR,wS;wR=i.Get(wP);for(wS=1;wS<=wO;wS++){!wR.MoveNext()?g.insufficient():null;}return wR;});},skipWhile:function(wT,wU){return T.Of(function(){var wW,wX,wY,wZ,w0;wW=i.Get(wU);wX=true;while(wW.MoveNext()?wT(wW.get_Current()):false){wX=false;}if(wX){wZ=g.empty();wY=i.Get(wZ);}else{w0=function(w1){var w2,w3,w4,w5;if(w1.s){w1.s=false;w3=wW.get_Current();w1.c=w3;w2=true;}else{w4=wW.MoveNext();w5=wW.get_Current();w1.c=w5;w2=w4;}return w2;};wY=x.New(true,null,w0);}return wY;});},sort:function(w6){return g.sortBy(function(w7){return w7;},w6);},sortBy:function(w8,w9){return g.delay(function(){var w$;w$=b.ofSeq(w9);b.sortInPlaceBy(w8,w$);return w$;});},sum:function(xa){return g.fold(function(xb){return function(xc){return xb+xc;};},0,xa);},sumBy:function(xd,xe){return g.fold(function(xf){return function(xg){return xf+xd(xg);};},0,xe);},take:function(xh,xi){return T.Of(function(){var xk,xl;xk=i.Get(xi);xl=function(xm){var xn,xo,xp,xq;if(xm.s>=xh){xn=false;}else{if(xk.MoveNext()){xp=xm.s+1;xm.s=xp;xq=xk.get_Current();xm.c=xq;xo=true;}else{xk.Dispose();xm.s=xh;xo=false;}xn=xo;}return xn;};return x.New(0,null,xl);});},takeWhile:function(xr,xs){return g.delay(function(){return g.enumUsing(i.Get(xs),function(xu){return g.enumWhile(function(){return xu.MoveNext()?xr(xu.get_Current()):false;},g.delay(function(){return[xu.get_Current()];}));});});},toArray:function(xx){var xy,xz,xA;xy=[];xz=i.Get(xx);while(xz.MoveNext()){xA=xz.get_Current();xy.push(xA);}return xy.slice(0);},toList:function(xB){return J.ofSeq(xB);},truncate:function(xC,xD){return g.delay(function(){return g.enumUsing(i.Get(xD),function(xF){var xG;xG={contents:0};return g.enumWhile(function(){return xF.MoveNext()?xG.contents<xC:false;},g.delay(function(){c.Increment(xG);return[xF.get_Current()];}));});});},tryFind:function(xJ,xK){var xL,xM,xN;xL=i.Get(xK);xM={$:0};while(xM.$==0?xL.MoveNext():false){xN=xL.get_Current();xJ(xN)?xM={$:1,$0:xN}:null;}return xM;},tryFindIndex:function(xO,xP){var xQ,xR,xS,xT;xQ=i.Get(xP);xR=true;xS=0;while(xR?xQ.MoveNext():false){xT=xQ.get_Current();xO(xT)?xR=false:xS=xS+1;}return xR?{$:0}:{$:1,$0:xS};},tryPick:function(xU,xV){var xW,xX;xW=i.Get(xV);xX={$:0};while(h.Equals(xX,{$:0})?xW.MoveNext():false){xX=xU(xW.get_Current());}return xX;},unfold:function(xY,xZ){var x0;x0=function(){var x2;x2=function(x3){var x4,x5,x6,x7;x4=xY(x3.s);if(x4.$==0){x5=false;}else{x6=x4.$0[0];x7=x4.$0[1];x3.c=x6;x3.s=x7;x5=true;}return x5;};return x.New(xZ,null,x2);};return T.Of(x0);},windowed:function(x8,x9){x8<=0?c.FailWith("The input must be non-negative."):null;return g.delay(function(){return g.enumUsing(i.Get(x9),function(x$){var ya;ya=[];return g.append(g.enumWhile(function(){return ya.length<x8?x$.MoveNext():false;},g.delay(function(){ya.push(x$.get_Current());return g.empty();})),g.delay(function(){return ya.length===x8?g.append([ya.slice(0)],g.delay(function(){return g.enumWhile(function(){return x$.MoveNext();},g.delay(function(){ya.shift();ya.push(x$.get_Current());return[ya.slice(0)];}));})):g.empty();}));});});},zip:function(yh,yi){return g.mapi2(function(yj){return function(yk){return[yj,yk];};},yh,yi);},zip3:function(yl,ym,yn){return g.mapi2(function(yo){return $.Tupled(function(yp){var yq,yr;yq=yp[0];yr=yp[1];return[yo,yq,yr];});},yl,g.zip(ym,yn));}},Stack:{Clear:function(ys){return ys.splice(0,e.GetLength(ys));},Contains:function(yt,yu){return g.exists(function(yv){return h.Equals(yu,yv);},yt);},CopyTo:function(yw,yx,yy){return b.blit(yx,0,yx,yy,e.GetLength(yw));}},Strings:{Compare:function(yz,yA){return c.Compare(yz,yA);},CopyTo:function(yB,yC,yD,yE,yF){return b.blit(M.ToCharArray(yB),yC,yD,yE,yF);},EndsWith:function($x,$s){var $0=this,$this=this;return $x.substring($x.length-$s.length)==$s;},IndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.indexOf($$.String.fromCharCode($c),$i);},Insert:function($x,$index,$s){var $0=this,$this=this;return $x.substring(0,$index-1)+$s+$x.substring($index);},IsNullOrEmpty:function($x){var $0=this,$this=this;return $x==null||$x=="";},Join:function($sep,$values){var $0=this,$this=this;return $values.join($sep);},LastIndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.lastIndexOf($$.String.fromCharCode($c),$i);},PadLeft:function(yG,yH){return M.PadLeftWith(yG,yH,32);},PadLeftWith:function($s,$n,$c){var $0=this,$this=this;return $$.Array($n-$s.length+1).join($$.String.fromCharCode($c))+$s;},PadRight:function(yI,yJ){return M.PadRightWith(yI,yJ,32);},PadRightWith:function($s,$n,$c){var $0=this,$this=this;return $s+$$.Array($n-$s.length+1).join($$.String.fromCharCode($c));},RegexEscape:function($s){var $0=this,$this=this;return $s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");},Remove:function($x,$ix,$ct){var $0=this,$this=this;return $x.substring(0,$ix)+$x.substring($ix+$ct);},Replace:function(yK,yL,yM){var yN;yN=function(yO){var yP,yQ,yR,yS,yT;yP=yO.indexOf(yL);if(yP!==-1){yR=M.ReplaceOnce(yO,yL,yM);yS=yP+yM.length;yT=yP+yM.length;yQ=M.Substring(yR,0,yT)+yN(yR.substring(yS));}else{yQ=yO;}return yQ;};return yN(yK);},ReplaceChar:function(yU,yV,yW){return M.Replace(yU,U.fromCharCode(yV),U.fromCharCode(yW));},ReplaceOnce:function($string,$search,$replace){var $0=this,$this=this;return $string.replace($search,$replace);},Split:function(yX,yY,yZ){var y0;y0=M.SplitWith(yX,yY);return yZ===1?b.filter(function(y1){return y1!=="";},y0):y0;},SplitChars:function(y2,y3,y4){var y5;y5="["+M.RegexEscape(U.fromCharCode.apply(undefined,y3))+"]";return M.Split(y2,new V(y5),y4);},SplitStrings:function(y6,y7,y8){var y9;y9=M.concat("|",b.map(function(y_){return M.RegexEscape(y_);},y7));return M.Split(y6,new V(y9),y8);},SplitWith:function($str,$pat){var $0=this,$this=this;return $str.split($pat);},StartsWith:function($t,$s){var $0=this,$this=this;return $t.substring(0,$s.length)==$s;},Substring:function($s,$ix,$ct){var $0=this,$this=this;return $s.substr($ix,$ct);},ToCharArray:function(y$){return b.init(y$.length,function(za){return y$.charCodeAt(za);});},ToCharArrayRange:function(zb,zc,zd){return b.init(zd,function(ze){return zb.charCodeAt(zc+ze);});},Trim:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"").replace(/\s+$/,"");},TrimEnd:function($s){var $0=this,$this=this;return $s.replace(/\s+$/,"");},TrimStart:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"");},collect:function(zf,zg){return b.init(zg.length,function(zh){return zf(zg.charCodeAt(zh));}).join("");},concat:function(zi,zj){return g.toArray(zj).join(zi);},exists:function(zk,zl){return g.exists(zk,M.protect(zl));},forall:function(zm,zn){return g.forall(zm,M.protect(zn));},init:function(zo,zp){return b.init(zo,zp).join("");},iter:function(zq,zr){return g.iter(zq,M.protect(zr));},iteri:function(zs,zt){return g.iteri(zs,M.protect(zt));},length:function(zu){return M.protect(zu).length;},map:function(zv,zw){return M.collect(function(zx){return U.fromCharCode(zv(zx));},M.protect(zw));},mapi:function(zy,zz){return g.toArray(g.mapi(function(zA){return function(zB){return U.fromCharCode((zy(zA))(zB));};},zz)).join("");},protect:function(zC){return zC===null?"":zC;},replicate:function(zD,zE){return M.init(zD,function(){return zE;});}},Unchecked:{Compare:function(zG,zH){var zI,zJ,zK,zL;if(zG===zH){zI=0;}else{zJ=typeof zG;if(zJ==="undefined"){zL=typeof zH;zK=zL==="undefined"?0:-1;}else{zK=zJ==="function"?c.FailWith("Cannot compare function values."):zJ==="boolean"?zG<zH?-1:1:zJ==="number"?zG<zH?-1:1:zJ==="string"?zG<zH?-1:1:zG===null?-1:zH===null?1:"CompareTo"in zG?zG.CompareTo(zH):(zG instanceof f?zH instanceof f:false)?h.compareArrays(zG,zH):(zG instanceof u?zH instanceof u:false)?h.compareDates(zG,zH):h.compareArrays(G.GetFields(zG),G.GetFields(zH));}zI=zK;}return zI;},Equals:function(zM,zN){var zO,zP;if(zM===zN){zO=true;}else{zP=typeof zM;zO=zP==="object"?zM===null?false:zN===null?false:"Equals"in zM?zM.Equals(zN):(zM instanceof f?zN instanceof f:false)?h.arrayEquals(zM,zN):(zM instanceof u?zN instanceof u:false)?h.dateEquals(zM,zN):h.arrayEquals(G.GetFields(zM),G.GetFields(zN)):false;}return zO;},Hash:function(zQ){var zR;zR=typeof zQ;return zR==="function"?0:zR==="boolean"?zQ?1:0:zR==="number"?zQ:zR==="string"?h.hashString(zQ):zR==="object"?zQ==null?0:zQ instanceof f?h.hashArray(zQ):h.hashObject(zQ):0;},arrayEquals:function(zS,zT){var zU,zV,zW;if(e.GetLength(zS)===e.GetLength(zT)){zV=true;zW=0;while(zV?zW<e.GetLength(zS):false){!h.Equals(e.GetArray(zS,zW),e.GetArray(zT,zW))?zV=false:null;zW=zW+1;}zU=zV;}else{zU=false;}return zU;},compareArrays:function(zX,zY){var zZ,z0,z1,z2;if(e.GetLength(zX)<e.GetLength(zY)){zZ=-1;}else{if(e.GetLength(zX)>e.GetLength(zY)){z0=1;}else{z1=0;z2=0;while(z1===0?z2<e.GetLength(zX):false){z1=h.Compare(e.GetArray(zX,z2),e.GetArray(zY,z2));z2=z2+1;}z0=z1;}zZ=z0;}return zZ;},compareDates:function(z3,z4){return c.Compare(z3.getTime(),z4.getTime());},dateEquals:function(z5,z6){return z5.getTime()===z6.getTime();},hashArray:function(z7){var z8,z9;z8=-34948909;for(z9=0;z9<=e.GetLength(z7)-1;z9++){z8=h.hashMix(z8,h.Hash(e.GetArray(z7,z9)));}return z8;},hashMix:function(z_,z$){return(z_<<5)+z_+z$;},hashObject:function(Aa){var Ab,Ac,Af;if("GetHashCode"in Aa){Ab=Aa.GetHashCode();}else{Ac=function(Ad,Ae){return h.hashMix(Ad,Ae);};Af={contents:0};G.ForEach(Aa,function(Ag){Af.contents=Ac(Ac(Af.contents,h.hashString(Ag)),h.Hash(Aa[Ag]));return false;});Ab=Af.contents;}return Ab;},hashString:function(Ah){var Ai,Aj,Ak;if(Ah===null){Ai=0;}else{Aj=5381;for(Ak=0;Ak<=Ah.length-1;Ak++){Aj=h.hashMix(Aj,Ah.charCodeAt(Ak)<<0);}Ai=Aj;}return Ai;}},Util:{addListener:function(Al,Am){Al.Subscribe(r.observer(Am));},observer:function(An){return{OnCompleted:function(){},OnError:function(){},OnNext:An};},subscribeTo:function(Aq,Ar){return Aq.Subscribe(r.observer(Ar));}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Arrays);c=$.Safe(a.Operators);d=$.Safe($$.Number);e=$.Safe(a.IntrinsicFunctionProxy);f=$.Safe($$.Array);g=$.Safe(a.Seq);h=$.Safe(a.Unchecked);i=$.Safe(a.Enumerator);j=$.Safe(a.Arrays2D);k=$.Safe(a.Concurrency);l=$.Safe(a.AggregateException);m=$.Safe(a.Option);n=$.Safe($$.clearTimeout);o=$.Safe($$.setTimeout);p=$.Safe(a.CancellationTokenSource);q=$.Safe(a.Char);r=$.Safe(a.Util);s=$.Safe(a.Lazy);t=$.Safe($$.Error);u=$.Safe($$.Date);v=$.Safe($$.console);w=$.Safe(k.Scheduler);x=$.Safe(i.T);y=$.Safe(a.Html);z=$.Safe(y.Client);A=$.Safe(z.Activator);B=$.Safe($$.document);C=$.Safe($$.jQuery);D=$.Safe(a.Json);E=$.Safe($$.JSON);F=$.Safe(a.JavaScript);G=$.Safe(F.JSModule);H=$.Safe(z.HtmlContentExtensions);I=$.Safe(H.SingleNode);J=$.Safe(a.List);K=$.Safe(J.T);L=$.Safe($$.Math);M=$.Safe(a.Strings);N=$.Safe(a.PrintfHelpers);O=$.Safe(a.Remoting);P=$.Safe(O.XhrProvider);Q=$.Safe(a.AsyncProxy);R=$.Safe(O.AjaxRemotingProvider);S=$.Safe($$.window);T=$.Safe(a.Enumerable);U=$.Safe($$.String);return V=$.Safe($$.RegExp);});$.OnLoad(function(){O.EndPoint();O.AjaxProvider();A.Activate();k.scheduler();k.defCTS();k.GetCT();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{IntelliFactory:{WebSharper:{Testing:{Assert:{For:function(r,s,t){var u,v,w;u=s.Base;for(v=0;v<=b.GetLength(u)-1;v++){t(b.GetArray(s.Base,v));}for(w=1;w<=r;w++){t(s.Next.call(null,null));}return;},Raises:function(x){var y,z;try{x(null);y=c(false,"Assert raises exception test failed.");}catch(z){y=c(true,"Pass.");}return y;}},Pervasives:{Is:function(A,B){var C,D;if(!d.Equals(A,B)){D=[A,B];if(e){e.log.apply(e,["Equality test failed."].concat(D));}C=c(false,"Equality test failed.");}else{C=c(true,"Pass.");}return C;},Isnt:function(E,F){var G,H;if(d.Equals(E,F)){H=[E,F];if(e){e.log.apply(e,["Inequality test failed."].concat(H));}G=c(false,"Inequality test failed.");}else{G=c(true,"Pass.");}return G;},Test:function(I){return h.New(I);},TestBuilder:$.Class({Delay:function(J){return i(this.name,J);},Zero:function(){return null;}},{New:function(K){var L;L=$.New(this,{});L.name=K;return L;}})},Random:{ArrayOf:function(M){return{Base:[[]],Next:function(){var O;O=j.Natural().Next.call(null,null)%100;return k.init(O,function(){return M.Next.call(null,null);});}};},Boolean:$.Field(function(){return{Base:[true,false],Next:function(){return j.StandardUniform().Next.call(null,null)>0.5;}};}),Const:function(R){return{Base:[R],Next:function(){return R;}};},Exponential:function(T){return{Base:[],Next:function(){var V;V=j.StandardUniform().Next.call(null,null);return-l.log(1-V)/T;}};},Float:$.Field(function(){return{Base:[0],Next:function(){var X;X=j.Boolean().Next.call(null,null)?1:-1;return X*j.Exponential(0.1).Next.call(null,null);}};}),FloatExhaustive:$.Field(function(){return{Base:[0,m,n,-n],Next:function(){return j.Float().Next.call(null,null);}};}),FloatWithin:function(Z,_0){return{Base:[Z,_0],Next:function(){return Z+(_0-Z)*l.random();}};},Implies:function(_2,_3){return!_2?true:_3;},Imply:function(_4,_5){return j.Implies(_4,_5);},Int:$.Field(function(){return{Base:[0,1,-1],Next:function(){return l.round(j.Float().Next.call(null,null));}};}),ListOf:function(_7){var _8,_;_8=function(_9){return o.ofArray(_9);};_=j.ArrayOf(_7);return j.Map(_8,_);},Map:function(ba,bb){var bc;bc=bb.Next;return{Base:k.map(ba,bb.Base),Next:function(bd){return ba(bc(bd));}};},Mix:function(bd,be){var bf;bf={contents:false};return{Base:bd.Base.concat(be.Base),Next:function(){bf.contents=!bf.contents;return bf.contents?bd.Next.call(null,null):be.Next.call(null,null);}};},Natural:$.Field(function(){var bh;bh=j.Int().Next;return{Base:[0,1],Next:function(bi){var bj;bj=bh(bi);return l.abs(bj);}};}),OneOf:function(bk){var bl;bl=j.Within(1,b.GetLength(bk));return{Base:bk,Next:function(){return b.GetArray(bk,bl.Next.call(null,null)-1);}};},OptionOf:function(bn){return j.Mix(j.Const({$:0}),j.Map(function(bo){return{$:1,$0:bo};},bn));},StandardUniform:$.Field(function(){return{Base:[],Next:function(){return l.random();}};}),String:$.Field(function(){return{Base:[""],Next:function(){var br,bs;br=j.Natural().Next.call(null,null)%100;bs=k.init(br,function(){return j.Int().Next.call(null,null)%256;});return p.fromCharCode.apply(undefined,bs);}};}),StringExhaustive:$.Field(function(){return{Base:[null,""],Next:j.String().Next};}),Tuple2Of:function(bu,bv){return{Base:q.toArray(q.delay(function(){return q.collect(function(bx){return q.map(function(by){return[bx,by];},bv.Base);},bu.Base);})),Next:function(){return[bu.Next.call(null,null),bv.Next.call(null,null)];}};},Tuple3Of:function(bA,bB,bC){return{Base:q.toArray(q.delay(function(){return q.collect(function(bE){return q.collect(function(bF){return q.map(function(bG){return[bE,bF,bG];},bC.Base);},bB.Base);},bA.Base);})),Next:function(){return[bA.Next.call(null,null),bB.Next.call(null,null),bC.Next.call(null,null)];}};},Within:function(bI,bJ){return{Base:[bI,bJ],Next:function(){return j.Natural().Next.call(null,null)%(bJ-bI)+bI;}};}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.IntrinsicFunctionProxy);c=$.Safe($$.ok);d=$.Safe(a.Unchecked);e=$.Safe($$.console);f=$.Safe(a.Testing);g=$.Safe(f.Pervasives);h=$.Safe(g.TestBuilder);i=$.Safe($$.test);j=$.Safe(f.Random);k=$.Safe(a.Arrays);l=$.Safe($$.Math);m=$.Safe($$.NaN);n=$.Safe($$.Infinity);o=$.Safe(a.List);p=$.Safe($$.String);return q=$.Safe(a.Seq);});$.OnLoad(function(){j.StringExhaustive();j.String();j.StandardUniform();j.Natural();j.Int();j.FloatExhaustive();j.Float();j.Boolean();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;$.Define($$,{IntelliFactory:{WebSharper:{Html:{Client:{Attribute:$.Class({get_Body:function(){var u;u=this.HtmlProvider.CreateAttribute(this.Name);u.value=this.Value;return u;}},{New:function(v){var w;w=$.New(this,e.New());w.HtmlProvider=v;return w;},New1:function(x,y,z){var A;A=d.New(x);A.Name=y;A.Value=z;return A;}}),AttributeBuilder:$.Class({Class:function(B){return this.NewAttr("class",B);},NewAttr:function(C,D){var E;E=d.New1(this.HtmlProvider,C,D);return E;}},{New:function(F){var G;G=$.New(this,{});G.HtmlProvider=F;return G;}}),Default:{A:function(H){var I;I=f.Tags();return I.NewTag("a",H);},Action:function(J){var K;K=f.Attr();return K.NewAttr("action",J);},Align:function(L){var M;M=f.Attr();return M.NewAttr("align",L);},Alt:function(N){var O;O=f.Attr();return O.NewAttr("alt",N);},Attr:$.Field(function(){return g.Attr();}),B:function(P){var Q;Q=f.Tags();return Q.NewTag("b",P);},Body:function(R){var S;S=f.Tags();return S.NewTag("body",R);},Br:function(T){var U;U=f.Tags();return U.NewTag("br",T);},Button:function(V){var W;W=f.Tags();return W.NewTag("button",V);},Code:function(X){var Y;Y=f.Tags();return Y.NewTag("code",X);},Deprecated:$.Field(function(){return g.DeprecatedHtml();}),Div:function(Z){return f.Tags().Div(Z);},Em:function(_0){var _1;_1=f.Tags();return _1.NewTag("em",_0);},Form:function(_2){var _3;_3=f.Tags();return _3.NewTag("form",_2);},H1:function(_4){var _5;_5=f.Tags();return _5.NewTag("h1",_4);},H2:function(_6){var _7;_7=f.Tags();return _7.NewTag("h2",_6);},H3:function(_8){var _9;_9=f.Tags();return _9.NewTag("h3",_8);},H4:function(_){var ba;ba=f.Tags();return ba.NewTag("h4",_);},HRef:function(ba){var bb;bb=f.Attr();return bb.NewAttr("href",ba);},Head:function(bc){var bd;bd=f.Tags();return bd.NewTag("head",bc);},Height:function(be){var bf;bf=f.Attr();return bf.NewAttr("height",be);},Hr:function(bg){var bh;bh=f.Tags();return bh.NewTag("hr",bg);},I:function(bi){var bj;bj=f.Tags();return bj.NewTag("i",bi);},IFrame:function(bk){var bl;bl=f.Tags();return bl.NewTag("iframe",bk);},Id:function(bm){var bn;bn=f.Attr();return bn.NewAttr("id",bm);},Img:function(bo){var bp;bp=f.Tags();return bp.NewTag("img",bo);},Input:function(bq){var br;br=f.Tags();return br.NewTag("input",bq);},LI:function(bs){var bt;bt=f.Tags();return bt.NewTag("li",bs);},Name:function(bu){var bv;bv=f.Attr();return bv.NewAttr("name",bu);},NewAttr:function(bw){return function(bx){return f.Attr().NewAttr(bw,bx);};},OL:function(by){var bz;bz=f.Tags();return bz.NewTag("ol",by);},OnLoad:function(bA){return g.HtmlProvider().OnDocumentReady(bA);},P:function(bB){var bC;bC=f.Tags();return bC.NewTag("p",bB);},Pre:function(bD){var bE;bE=f.Tags();return bE.NewTag("pre",bD);},RowSpan:function(bF){var bG;bG=f.Attr();return bG.NewAttr("rowspan",bF);},Script:function(bH){var bI;bI=f.Tags();return bI.NewTag("script",bH);},Select:function(bJ){var bK;bK=f.Tags();return bK.NewTag("select",bJ);},Selected:function(bL){var bM;bM=f.Attr();return bM.NewAttr("selected",bL);},Span:function(bN){var bO;bO=f.Tags();return bO.NewTag("span",bN);},Src:function(bP){var bQ;bQ=f.Attr();return bQ.NewAttr("src",bP);},TBody:function(bR){var bS;bS=f.Tags();return bS.NewTag("tbody",bR);},TD:function(bT){var bU;bU=f.Tags();return bU.NewTag("td",bT);},TFoot:function(bV){var bW;bW=f.Tags();return bW.NewTag("tfoot",bV);},TH:function(bX){var bY;bY=f.Tags();return bY.NewTag("th",bX);},THead:function(bZ){var b0;b0=f.Tags();return b0.NewTag("thead",bZ);},TR:function(b1){var b2;b2=f.Tags();return b2.NewTag("tr",b1);},Table:function(b3){var b4;b4=f.Tags();return b4.NewTag("table",b3);},Tags:$.Field(function(){return g.Tags();}),Text:function(b5){return f.Tags().text(b5);},TextArea:function(b6){var b7;b7=f.Tags();return b7.NewTag("textarea",b6);},UL:function(b8){var b9;b9=f.Tags();return b9.NewTag("ul",b8);},VAlign:function(b_){var b$;b$=f.Attr();return b$.NewAttr("valign",b_);},Width:function(ca){var cb;cb=f.Attr();return cb.NewAttr("width",ca);}},DeprecatedAttributeBuilder:$.Class({NewAttr:function(cc,cd){var ce;ce=d.New1(this.HtmlProvider,cc,cd);return ce;}},{New:function(cf){var cg;cg=$.New(this,{});cg.HtmlProvider=cf;return cg;}}),DeprecatedTagBuilder:$.Class({NewTag:function(ch,ci){var cj,ck,cl;cj=h.New(this.HtmlProvider,ch);ck=i.Get(ci);while(ck.MoveNext()){cl=ck.get_Current();cj.AppendI(cl);}return cj;}},{New:function(cm){var cn;cn=$.New(this,{});cn.HtmlProvider=cm;return cn;}}),Element:$.Class({AppendI:function(co){var cp,cq,cr,cs,ct,cu,cv,cw,cx;cp=co.get_Body();if(cp.nodeType===2){cr=this["HtmlProvider@33"];cs=this.get_Body();cq=cr.AppendAttribute(cs,cp);}else{ct=this["HtmlProvider@33"];cu=this.get_Body();cv=co.get_Body();cq=ct.AppendNode(cu,cv);}if(this.IsRendered){cw=co.Render();}else{cx=this.RenderInternal;cw=void(this.RenderInternal=function(){cx(null);return co.Render();});}return cw;},AppendN:function(cz){var cA,cB;cA=this["HtmlProvider@33"];cB=this.get_Body();return cA.AppendNode(cB,cz);},OnLoad:function(cC){var cD,cE;cD=this["HtmlProvider@33"];cE=this.get_Body();return cD.OnLoad(cE,cC);},Render:function(){var cF;if(!this.IsRendered){this.RenderInternal.call(null,null);cF=void(this.IsRendered=true);}else{cF=null;}return cF;},get_Body:function(){return this.Dom;},get_Html:function(){return this["HtmlProvider@33"].GetHtml(this.get_Body());},get_HtmlProvider:function(){return this["HtmlProvider@33"];},get_Id:function(){var cG,cH,cI,cJ,cK,cL,cM;cG=this["HtmlProvider@33"];cH=this.get_Body();cI=cG.GetProperty(cH,"id");if(cI===undefined?true:cI===""){cK="id"+j.round(j.random()*100000000);cL=this["HtmlProvider@33"];cM=this.get_Body();cL.SetProperty(cM,"id",cK);cJ=cK;}else{cJ=cI;}return cJ;},get_Item:function(cN){var cO,cP,cQ,cR;cO=this["HtmlProvider@33"];cP=this.get_Body();cO.GetAttribute(cP,cN);cQ=this["HtmlProvider@33"];cR=this.get_Body();return cQ.GetAttribute(cR,cN);},get_Text:function(){return this["HtmlProvider@33"].GetText(this.get_Body());},get_Value:function(){return this["HtmlProvider@33"].GetValue(this.get_Body());},set_Html:function(cS){var cT,cU;cT=this["HtmlProvider@33"];cU=this.get_Body();return cT.SetHtml(cU,cS);},set_Item:function(cV,cW){var cX,cY;cX=this["HtmlProvider@33"];cY=this.get_Body();return cX.SetAttribute(cY,cV,cW);},set_Text:function(cZ){var c0,c1;c0=this["HtmlProvider@33"];c1=this.get_Body();return c0.SetText(c1,cZ);},set_Value:function(c2){var c3,c4;c3=this["HtmlProvider@33"];c4=this.get_Body();return c3.SetValue(c4,c2);}},{New:function(c5,c6){var c7,c8;c7=h.New1(c5);c8=k.createElement(c6);c7.RenderInternal=function(){};c7.Dom=c8;c7.IsRendered=false;return c7;},New1:function(c_){var c$;c$=$.New(this,e.New());c$["HtmlProvider@33"]=c_;return c$;}}),Events:{JQueryEventSupport:$.Class({OnBlur:function(da,db){return l(db.get_Body()).bind("blur",function(){return da(db);});},OnChange:function(dd,de){return l(de.get_Body()).bind("change",function(){return dd(de);});},OnClick:function(dg,dh){return this.OnMouse("click",dg,dh);},OnDoubleClick:function(di,dj){return this.OnMouse("dblclick",di,dj);},OnError:function(dk,dl){return l(dl.get_Body()).bind("error",function(){return dk(dl);});},OnFocus:function(dn,_do){return l(_do.get_Body()).bind("focus",function(){return dn(_do);});},OnKeyDown:function(dq,dr){var ds;ds=function(dt){return(dq(dr))({KeyCode:dt.keyCode});};return l(dr.get_Body()).bind("keydown",ds);},OnKeyPress:function(du,dv){return l(dv.get_Body()).keypress(function(dw){return(du(dv))({CharacterCode:dw.which});});},OnKeyUp:function(dx,dy){var dz;dz=function(dA){return(dx(dy))({KeyCode:dA.keyCode});};return l(dy.get_Body()).bind("keyup",dz);},OnLoad:function(dB,dC){return l(dC.get_Body()).bind("load",function(){return dB(dC);});},OnMouse:function(dE,dF,dG){var dH;dH=function(dI){return(dF(dG))({X:dI.pageX,Y:dI.pageY});};return l(dG.get_Body()).bind(dE,dH);},OnMouseDown:function(dJ,dK){return this.OnMouse("mousedown",dJ,dK);},OnMouseEnter:function(dL,dM){return this.OnMouse("mouseenter",dL,dM);},OnMouseLeave:function(dN,dO){return this.OnMouse("mouseleave",dN,dO);},OnMouseMove:function(dP,dQ){return this.OnMouse("mousemove",dP,dQ);},OnMouseOut:function(dR,dS){return this.OnMouse("mouseout",dR,dS);},OnMouseUp:function(dT,dU){return this.OnMouse("mouseup",dT,dU);},OnResize:function(dV,dW){return l(dW.get_Body()).bind("resize",function(){return dV(dW);});},OnScroll:function(dY,dZ){return l(dZ.get_Body()).bind("scroll",function(){return dY(dZ);});},OnSelect:function(d1,d2){return l(d2.get_Body()).bind("select",function(){return d1(d2);});},OnSubmit:function(d4,d5){return l(d5.get_Body()).bind("submit",function(){return d4(d5);});},OnUnLoad:function(d7,d8){return l(d8.get_Body()).bind("unload",function(){return d7(d8);});}},{New:function(){return $.New(this,{});}})},EventsPervasives:{Events:$.Field(function(){return n.New();})},Implementation:{Attr:$.Field(function(){return o.New(g.HtmlProvider());}),DeprecatedHtml:$.Field(function(){return p.New(g.HtmlProvider());}),HtmlProvider:$.Field(function(){return q.New();}),JQueryHtmlProvider:$.Class({AddClass:function(d_,d$){return l(d_).addClass(d$);},AppendAttribute:function(ea,eb){var ec,ed;ec=eb.nodeName;ed=eb.value;return this.SetAttribute(ea,ec,ed);},AppendNode:function(ee,ef){return l(ee).append(l(ef));},Clear:function(eg){return l(eg).contents().detach();},CreateAttribute:function(eh){return k.createAttribute(eh);},CreateElement:function(ei){return k.createElement(ei);},CreateTextNode:function(ej){return k.createTextNode(ej);},GetAttribute:function(ek,el){return l(ek).attr(el);},GetHtml:function(em){return l(em).html();},GetProperty:function(en,eo){var ep;ep=l(en).attr(eo);return ep;},GetText:function(eq){return eq.textContent;},GetValue:function(er){var es;es=l(er).val();return es;},HasAttribute:function(et,eu){return l(et).attr(eu)!=null;},OnDocumentReady:function(ev){return l(k).ready(ev);},OnLoad:function(ew,ex){return l(ew).ready(ex);},Remove:function(ey){return l(ey).remove();},RemoveAttribute:function(ez,eA){return l(ez).removeAttr(eA);},RemoveClass:function(eB,eC){return l(eB).removeClass(eC);},SetAttribute:function(eD,eE,eF){return l(eD).attr(eE,eF);},SetCss:function(eG,eH,eI){return l(eG).css(eH,eI);},SetHtml:function(eJ,eK){return l(eJ).html(eK);},SetProperty:function(eL,eM,eN){var eO;eO=l(eL).prop(eM,eN);return eO;},SetStyle:function(eP,eQ){return l(eP).attr("style",eQ);},SetText:function(eR,eS){eR.textContent=eS;},SetValue:function(eT,eU){return l(eT).val(eU);}},{New:function(){return $.New(this,{});}}),Tags:$.Field(function(){return r.New(g.HtmlProvider());})},Operators:{OnAfterRender:function(eV,eW){var eX;eX=eW.Render;eW.Render=function(){eX.apply(eW);return eV(eW);};return;},OnBeforeRender:function(eZ,e0){var e1;e1=e0.Render;e0.Render=function(){eZ(e0);return e1.apply(e0);};return;},add:function(e3,e4){var e5,e6;e5=i.Get(e4);while(e5.MoveNext()){e6=e5.get_Current();e3.AppendI(e6);}return e3;}},Pagelet:$.Class({AppendTo:function(e7){var e8,e9;e8=k.getElementById(e7);e9=e8.appendChild(this.get_Body());return this.Render();},Render:function(){return null;},ReplaceInDom:function(e_){var e$;e$=e_.parentNode.replaceChild(this.get_Body(),e_);return this.Render();}},{New:function(){return $.New(this,{});}}),TagBuilder:$.Class({Div:function(fa){return this.NewTag("div",fa);},NewTag:function(fb,fc){var fd,fe,ff;fd=h.New(this.HtmlProvider,fb);fe=i.Get(fc);while(fe.MoveNext()){ff=fe.get_Current();fd.AppendI(ff);}return fd;},text:function(fg){return s.New(fg);}},{New:function(fh){var fi;fi=$.New(this,{});fi.HtmlProvider=fh;return fi;}}),Text:$.Class({get_Body:function(){return k.createTextNode(this.text);}},{New:function(fj){var fk;fk=$.New(this,e.New());fk.text=fj;return fk;}})}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Html);c=$.Safe(b.Client);d=$.Safe(c.Attribute);e=$.Safe(c.Pagelet);f=$.Safe(c.Default);g=$.Safe(c.Implementation);h=$.Safe(c.Element);i=$.Safe(a.Enumerator);j=$.Safe($$.Math);k=$.Safe($$.document);l=$.Safe($$.jQuery);m=$.Safe(c.Events);n=$.Safe(m.JQueryEventSupport);o=$.Safe(c.AttributeBuilder);p=$.Safe(c.DeprecatedTagBuilder);q=$.Safe(g.JQueryHtmlProvider);r=$.Safe(c.TagBuilder);s=$.Safe(c.Text);return t=$.Safe(c.EventsPervasives);});$.OnLoad(function(){$.Inherit(d,e);$.Inherit(h,e);$.Inherit(s,e);g.Tags();g.HtmlProvider();g.DeprecatedHtml();g.Attr();t.Events();f.Tags();f.Deprecated();f.Attr();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{IntelliFactory:{WebSharper:{Control:{Disposable:{Of:function(F){return{Dispose:F};}},Event:{Event:$.Class({AddHandler:function(G){return this.Handlers.Add(G);},RemoveHandler:function(H){var I,K,L,N,O;I=function(J){return b.Equals(H,J);};K=this.Handlers;L=function(M){return K.RemoveAt(M);};N=this.Handlers;O=c.tryFindIndex(I,N);return d.iter(L,O);},Subscribe:function(P){var Q,T=this;Q=function(R){return P.OnNext(R);};this.AddHandler(Q);return f.Of(function(){return T.RemoveHandler(Q);});},Trigger:function(U){var V,W,X;V=this.Handlers.ToArray();for(W=0;W<=V.length-1;W++){X=g.GetArray(V,W);X(U);}return;}})},EventModule:{Choose:function(Y,Z){var _0;_0=h.New();i.addListener(Z,function(_1){var _2,_3,_4;_2=Y(_1);if(_2.$==0){_3=null;}else{_4=_2.$0;_3=_0.event.Trigger(_4);}return _3;});return _0.event;},Filter:function(_5,_6){var _7;_7=$.New(k,{Handlers:n.New1()});i.addListener(_6,function(_8){return _5(_8)?_7.Trigger(_8):null;});return _7;},Map:function(_9,_){var ba;ba=$.New(k,{Handlers:n.New1()});i.addListener(_,function(bb){return ba.Trigger(_9(bb));});return ba;},Merge:function(bb,bc){var bd;bd=$.New(k,{Handlers:n.New1()});i.addListener(bb,function(be){return bd.Trigger(be);});i.addListener(bc,function(bf){return bd.Trigger(bf);});return bd;},Pairwise:function(bg){var bh,bi;bh={contents:{$:0}};bi=$.New(k,{Handlers:n.New1()});i.addListener(bg,function(bj){var bk,bl,bm;bk=bh.contents;if(bk.$==1){bm=bk.$0;bh.contents={$:1,$0:bj};bl=bi.Trigger([bm,bj]);}else{bl=void(bh.contents={$:1,$0:bj});}return bl;});return bi;},Partition:function(bn,bo){return[o.Filter(bn,bo),o.Filter(function(bp){var bq;bq=bn(bp);return!bq;},bo)];},Scan:function(br,bs,bt){var bu,bv;bu={contents:bs};bv=function(bw){bu.contents=(br(bu.contents))(bw);return bu.contents;};return o.Map(bv,bt);},Split:function(bx,by){var bz,bE;bz=function(bA){var bB,bC,bD;bB=bx(bA);if(bB.$==0){bD=bB.$0;bC={$:1,$0:bD};}else{bC={$:0};}return bC;};bE=function(bF){var bG,bH,bI;bG=bx(bF);if(bG.$==1){bI=bG.$0;bH={$:1,$0:bI};}else{bH={$:0};}return bH;};return[o.Choose(bz,by),o.Choose(bE,by)];}},FSharpEvent:$.Class({},{New:function(){var bJ;bJ=$.New(this,{});bJ.event=$.New(k,{Handlers:n.New1()});return bJ;}}),HotStream:{HotStream:$.Class({Subscribe:function(bK){var bL,bM;this.Latest.contents.$==1?bK.OnNext(this.Latest.contents.$0):null;bM=this.Event;bL=i.subscribeTo(bM.event,function(bN){return bK.OnNext(bN);});return bL;},Trigger:function(bO){var bP;this.Latest.contents={$:1,$0:bO};bP=this.Event;return bP.event.Trigger(bO);}},{New:function(){return $.New(q,{Latest:{contents:{$:0}},Event:h.New()});}})},MailboxProcessor:$.Class({PostAndAsyncReply:function(bQ,bR){var bS,bV=this;bS=function(){var bU,bW;bU=bV.PostAndTryAsyncReply(bQ,bR);bW=function(bX){var bY,bZ,b0;if(bX.$==1){b0=bX.$0;bZ=b0;}else{bZ=r.Raise(new s("TimeoutException"));}bY=bZ;return t.Return(bY);};return t.Bind(bU,bW);};return t.Delay(bS);},PostAndTryAsyncReply:function(b1,b2){var b3,b4,cb=this;b3=r.DefaultArg(b2,this.get_DefaultTimeout());b4=$.Tupled(function(b5){var b6,b7,b8,b9,b_,ca,cc,cd,cg,ch;b6=b5[0];b7=b5[1];b8=b5[2];if(b3<0){b_=b1(function(b$){return b6({$:1,$0:b$});});ca=cb.mailbox.AddLast(b_);b9=cb.resume();}else{cc={contents:true};cd=b1(function(ce){var cf;if(cc.contents){cc.contents=false;cf=b6({$:1,$0:ce});}else{cf=null;}return cf;});cg=cb.mailbox.AddLast(cd);cb.resume();ch=u(function(){var cj;if(cc.contents){cc.contents=false;cj=b6({$:0});}else{cj=null;}return cj;},b3);b9=void ch;}return b9;});return t.FromContinuations(b4);},Receive:function(ck){var cl,co=this;cl=function(){var cn,cp;cn=co.TryReceive(ck);cp=function(cq){var cr,cs,ct;if(cq.$==1){ct=cq.$0;cs=ct;}else{cs=r.Raise(new s("TimeoutException"));}cr=cs;return t.Return(cr);};return t.Bind(cn,cp);};return t.Delay(cl);},Scan:function(cu,cv){var cw,cz=this;cw=function(){var cy,cA;cy=cz.TryScan(cu,cv);cA=function(cB){var cC,cD,cE;if(cB.$==1){cE=cB.$0;cD=cE;}else{cD=r.Raise(new s("TimeoutException"));}cC=cD;return t.Return(cC);};return t.Bind(cy,cA);};return t.Delay(cw);},Start:function(){var cF,cG,cL=this,cS;if(this.started){cF=r.FailWith("The MailboxProcessor has already been started.");}else{this.started=true;cG=function(){var cI,cO,cP;cI=function(){var cK,cM;cK=cL.initial.call(null,cL);cM=function(){return t.Return(null);};return t.Bind(cK,cM);};cO=t.Delay(cI);cP=function(cQ){var cR;cR=cL.errorEvent;cR.event.Trigger(cQ);return t.Return(null);};return t.TryWith(cO,cP);};cS=t.Delay(cG);cF=cL.startAsync(cS);}return cF;},TryReceive:function(cT){var cU,cV,c0=this;cU=r.DefaultArg(cT,this.get_DefaultTimeout());cV=$.Tupled(function(cW){var cX,cY,cZ,c1,c2,c3,c6,c7,c8,c$,dd,de;cX=cW[0];cY=cW[1];cZ=cW[2];if(b.Equals(c0.mailbox.get_First(),null)){if(cU<0){c3=function(){var c5;c5=c0.dequeue();cX({$:1,$0:c5});return t.Return(null);};c6=t.Delay(c3);c2=void(c0.savedCont={$:1,$0:c6});}else{c7={contents:true};c8=u(function(){var c_;if(c7.contents){c7.contents=false;c0.savedCont={$:0};c_=cX({$:0});}else{c_=null;}return c_;},cU);c$=function(){var db,dc;if(c7.contents){c7.contents=false;v(c8);dc=c0.dequeue();cX({$:1,$0:dc});db=t.Return(null);}else{db=t.Return(null);}return db;};dd=t.Delay(c$);c2=void(c0.savedCont={$:1,$0:dd});}c1=c2;}else{de=c0.dequeue();c1=cX({$:1,$0:de});}return c1;});return t.FromContinuations(cV);},TryScan:function(df,dg){var dh,di,dn=this;dh=r.DefaultArg(dg,this.get_DefaultTimeout());di=function(){var dk,dr,ds,dt,du,dx,d2;dk=function(){var dm,_do,dp,dq;dm=dn.mailbox.get_First();_do={$:0};while(!b.Equals(dm,null)){dp=df(dm.v);if(dp.$==0){dq=dm=dm.n;}else{dn.mailbox.Remove(dm);dm=null;dq=_do=dp;}}return _do;};dr=dk(null);if(dr.$==1){dt=dr.$0;du=function(dv){var dw;dw={$:1,$0:dv};return t.Return(dw);};ds=t.Bind(dt,du);}else{dx=$.Tupled(function(dy){var dz,dA,dB,dC,dD,dN,dO,dR;dz=dy[0];dA=dy[1];dB=dy[2];if(dh<0){dD=function(){var dF,dM;dF=function(){var dH,dI,dJ,dK;dH=df(dn.mailbox.get_First().v);if(dH.$==1){dJ=dH.$0;dn.mailbox.RemoveFirst();dK=function(dL){dz({$:1,$0:dL});return t.Return(null);};dI=t.Bind(dJ,dK);}else{dD(null);dI=t.Return(null);}return dI;};dM=t.Delay(dF);dn.savedCont={$:1,$0:dM};return;};dC=dD(null);}else{dN={contents:true};dO=u(function(){var dQ;if(dN.contents){dN.contents=false;dn.savedCont={$:0};dQ=dz({$:0});}else{dQ=null;}return dQ;},dh);dR=function(){var dT,d1;dT=function(){var dV,dW,dX,dY;dV=df(dn.mailbox.get_First().v);if(dV.$==1){dX=dV.$0;dn.mailbox.RemoveFirst();dY=function(dZ){var d0;if(dN.contents){dN.contents=false;v(dO);dz({$:1,$0:dZ});d0=t.Return(null);}else{d0=t.Return(null);}return d0;};dW=t.Bind(dX,dY);}else{dR(null);dW=t.Return(null);}return dW;};d1=t.Delay(dT);dn.savedCont={$:1,$0:d1};return;};dC=dR(null);}return dC;});d2=t.FromContinuations(dx);ds=d2;}return ds;};return t.Delay(di);},dequeue:function(){var d3;d3=this.mailbox.get_First().v;this.mailbox.RemoveFirst();return d3;},get_CurrentQueueLength:function(){return this.mailbox.get_Count();},get_DefaultTimeout:function(){return this["DefaultTimeout@"];},get_Error:function(){var d4;d4=this.errorEvent;return d4.event;},resume:function(){var d5,d6,d7;d5=this.savedCont;if(d5.$==1){d7=d5.$0;this.savedCont={$:0};d6=this.startAsync(d7);}else{d6=null;}return d6;},set_DefaultTimeout:function(d8){this["DefaultTimeout@"]=d8;return;},startAsync:function(d9){var d_;d_=this.token;return t.Start(d9,d_);}},{New:function(d$,ea){var eb,ec,ed,ee,ef,eh;eb=$.New(this,{});eb.initial=d$;eb.token=ea;eb.started=false;eb.errorEvent=h.New();eb.mailbox=x.New();eb.savedCont={$:0};ec=eb.token;if(ec.$==0){ed=null;}else{ee=ec.$0;ef=function(){return eb.resume();};eh=t.Register(ee,function(){return ef();});ed=void eh;}eb["DefaultTimeout@"]=-1;return eb;},Start:function(ej,ek){var el;el=y.New(ej,ek);el.Start();return el;}}),Observable:{Aggregate:function(em,en,eo){var ep;ep=function(eq){var er,es,ex;er={contents:en};es=function(et){return z.Protect(function(){return(eo(er.contents))(et);},function(ev){er.contents=ev;return eq.OnNext(ev);},function(ew){return eq.OnError(ew);});};ex=A.New(es,function(ey){return eq.OnError(ey);},function(){return eq.OnCompleted();});return em.Subscribe(ex);};return z.New(ep);},Choose:function(eA,eB){var eC;eC=function(eD){var eE,eL;eE=function(eF){var eH;eH=function(eI){return eD.OnNext(eI);};return z.Protect(function(){return eA(eF);},function(eJ){return d.iter(eH,eJ);},function(eK){return eD.OnError(eK);});};eL=A.New(eE,function(eM){return eD.OnError(eM);},function(){return eD.OnCompleted();});return eB.Subscribe(eL);};return z.New(eC);},CombineLatest:function(eO,eP,eQ){var eR;eR=function(eS){var eT,eU,eV,e5,e7,e_,fa,fd,fe;eT={contents:{$:0}};eU={contents:{$:0}};eV=function(){var eX,eY,eZ,e0,e1;eX=[eT.contents,eU.contents];if(eX[0].$==1){if(eX[1].$==1){e0=eX[0].$0;e1=eX[1].$0;eZ=z.Protect(function(){return(eQ(e0))(e1);},function(e3){return eS.OnNext(e3);},function(e4){return eS.OnError(e4);});}else{eZ=null;}eY=eZ;}else{eY=null;}return eY;};e5=function(e6){eT.contents={$:1,$0:e6};return eV(null);};e7=A.New(e5,function(){},function(){});e_=function(e$){eU.contents={$:1,$0:e$};return eV(null);};fa=A.New(e_,function(){},function(){});fd=eO.Subscribe(e7);fe=eP.Subscribe(fa);return f.Of(function(){fd.Dispose();return fe.Dispose();});};return z.New(eR);},Concat:function(fg,fh){var fi;fi=function(fj){var fk,fl,fq;fk={contents:{$:0}};fl=fg.Subscribe(A.New(function(fm){return fj.OnNext(fm);},function(){},function(){var fp;fp=fh.Subscribe(fj);fk.contents={$:1,$0:fp};}));fq=function(){fk.contents.$==1?fk.contents.$0.Dispose():null;return fl.Dispose();};return f.Of(fq);};return z.New(fi);},Drop:function(fs,ft){var fu;fu=function(fv){var fw,fx,fz;fw={contents:0};fx=function(fy){r.Increment(fw);return fw.contents>fs?fv.OnNext(fy):null;};fz=A.New(fx,function(fA){return fv.OnError(fA);},function(){return fv.OnCompleted();});return ft.Subscribe(fz);};return z.New(fu);},Filter:function(fC,fD){var fE;fE=function(fF){var fG,fN;fG=function(fH){var fJ;fJ=function(fK){return fF.OnNext(fK);};return z.Protect(function(){return fC(fH)?{$:1,$0:fH}:{$:0};},function(fL){return d.iter(fJ,fL);},function(fM){return fF.OnError(fM);});};fN=A.New(fG,function(fO){return fF.OnError(fO);},function(){return fF.OnCompleted();});return fD.Subscribe(fN);};return z.New(fE);},Map:function(fQ,fR){var fS;fS=function(fT){var fU,fZ;fU=function(fV){return z.Protect(function(){return fQ(fV);},function(fX){return fT.OnNext(fX);},function(fY){return fT.OnError(fY);});};fZ=A.New(fU,function(f0){return fT.OnError(f0);},function(){return fT.OnCompleted();});return fR.Subscribe(fZ);};return z.New(fS);},Merge:function(f2,f3){var f4;f4=function(f5){var f6,f7,f8,ga,gb,gf;f6={contents:false};f7={contents:false};f8=A.New(function(f9){return f5.OnNext(f9);},function(){},function(){f6.contents=true;return(f6.contents?f7.contents:false)?f5.OnCompleted():null;});ga=f2.Subscribe(f8);gb=A.New(function(gc){return f5.OnNext(gc);},function(){},function(){f7.contents=true;return(f6.contents?f7.contents:false)?f5.OnCompleted():null;});gf=f3.Subscribe(gb);return f.Of(function(){ga.Dispose();return gf.Dispose();});};return z.New(f4);},Never:function(){return z.New(function(){return f.Of(function(){});});},New:function(gj){return $.New(B,{Subscribe1:gj});},Observable:$.Class({Subscribe:function(gk){return this.Subscribe1.call(null,gk);}}),Of:function(gl){return z.New(function(gm){return f.Of(gl(function(gn){return gm.OnNext(gn);}));});},Protect:function(go,gp,gq){var gr,gs,gt,gu,gv,gw;try{gs={$:0,$0:go(null)};}catch(gt){gs={$:1,$0:gt};}gr=gs;if(gr.$==1){gv=gr.$0;gu=gq(gv);}else{gw=gr.$0;gu=gp(gw);}return gu;},Range:function(gx,gy){var gz;gz=function(gA){var gB;for(gB=gx;gB<=gx+gy;gB++){gA.OnNext(gB);}return f.Of(function(){});};return z.New(gz);},Return:function(gD){var gE;gE=function(gF){gF.OnNext(gD);gF.OnCompleted();return f.Of(function(){});};return z.New(gE);},SelectMany:function(gH){return z.New(function(gI){var gJ,gL;gJ={contents:function(){}};gL=i.subscribeTo(gH,function(gM){var gN;gN=i.subscribeTo(gM,function(gO){return gI.OnNext(gO);});gJ.contents=function(){gJ.contents.call(null,null);return gN.Dispose();};return;});return f.Of(function(){gJ.contents.call(null,null);return gL.Dispose();});});},Sequence:function(gR){var gS;gS=function(gT){var gU,gV,gW,gX;if(gT.$==1){gV=gT.$1;gW=gT.$0;gX=gS(gV);gU=z.CombineLatest(gW,gX,function(gY){return function(gZ){return $.New(D,{$:1,$0:gY,$1:gZ});};});}else{gU=z.Return($.New(D,{$:0}));}return gU;};return gS(C.ofSeq(gR));},Switch:function(g0){return z.New(function(g1){var g2,g3,g4;g2={contents:0};g3={contents:{$:0}};g4=i.subscribeTo(g0,function(g5){var g6,g7,g9;r.Increment(g2);g3.contents.$==1?g3.contents.$0.Dispose():null;g6=g2.contents;g7=i.subscribeTo(g5,function(g8){return g6===g2.contents?g1.OnNext(g8):null;});g9={$:1,$0:g7};g3.contents=g9;return;});return g4;});}},ObservableModule:{Pairwise:function(g_){var g$;g$=function(ha){var hb,hc,hh;hb={contents:{$:0}};hc=function(hd){var he,hf,hg;he=hb.contents;if(he.$==1){hg=he.$0;hf=ha.OnNext([hg,hd]);}else{hf=null;}hb.contents={$:1,$0:hd};return;};hh=A.New(hc,function(hi){return ha.OnError(hi);},function(){return ha.OnCompleted();});return g_.Subscribe(hh);};return z.New(g$);},Partition:function(hk,hl){var hm;hm=function(hn){var ho;ho=hk(hn);return!ho;};return[z.Filter(hk,hl),z.Filter(hm,hl)];},Scan:function(hp,hq,hr){var hs;hs=function(ht){var hu,hv,hA;hu={contents:hq};hv=function(hw){return z.Protect(function(){return(hp(hu.contents))(hw);},function(hy){hu.contents=hy;return ht.OnNext(hy);},function(hz){return ht.OnError(hz);});};hA=A.New(hv,function(hB){return ht.OnError(hB);},function(){return ht.OnCompleted();});return hr.Subscribe(hA);};return z.New(hs);},Split:function(hD,hE){var hF,hK,hL,hQ;hF=function(hG){var hH,hI,hJ;hH=hD(hG);if(hH.$==0){hJ=hH.$0;hI={$:1,$0:hJ};}else{hI={$:0};}return hI;};hK=z.Choose(hF,hE);hL=function(hM){var hN,hO,hP;hN=hD(hM);if(hN.$==1){hP=hN.$0;hO={$:1,$0:hP};}else{hO={$:0};}return hO;};hQ=z.Choose(hL,hE);return[hK,hQ];}},Observer:{New:function(hR,hS,hT){return $.New(E,{onNext:hR,onError:hS,onCompleted:hT});},Observer:$.Class({OnCompleted:function(){return this.onCompleted.call(null,null);},OnError:function(hU){return this.onError.call(null,hU);},OnNext:function(hV){return this.onNext.call(null,hV);}}),Of:function(hW){return $.New(E,{onNext:function(hX){return hW(hX);},onError:function(hY){return r.Raise(hY);},onCompleted:function(){return null;}});}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Unchecked);c=$.Safe(a.Seq);d=$.Safe(a.Option);e=$.Safe(a.Control);f=$.Safe(e.Disposable);g=$.Safe(a.IntrinsicFunctionProxy);h=$.Safe(e.FSharpEvent);i=$.Safe(a.Util);j=$.Safe(e.Event);k=$.Safe(j.Event);l=$.Safe(a.Collections);m=$.Safe(l.ResizeArray);n=$.Safe(m.ResizeArrayProxy);o=$.Safe(e.EventModule);p=$.Safe(e.HotStream);q=$.Safe(p.HotStream);r=$.Safe(a.Operators);s=$.Safe($$.Error);t=$.Safe(a.Concurrency);u=$.Safe($$.setTimeout);v=$.Safe($$.clearTimeout);w=$.Safe(l.LinkedList);x=$.Safe(w.ListProxy);y=$.Safe(e.MailboxProcessor);z=$.Safe(e.Observable);A=$.Safe(e.Observer);B=$.Safe(z.Observable);C=$.Safe(a.List);D=$.Safe(C.T);return E=$.Safe(A.Observer);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{IntelliFactory:{WebSharper:{Collections:{BalancedTree:{Add:function(F,G){return c.Put(function(){return function(I){return I;};},F,G);},Branch:function(J,K,L){return{Node:J,Left:K,Right:L,Height:1+d.Max(K==null?0:K.Height,L==null?0:L.Height),Count:1+(K==null?0:K.Count)+(L==null?0:L.Count)};},Build:function(M,N,O){var P,Q,R,S,T;P=O-N+1;if(P<=0){Q=null;}else{R=(N+O)/2>>0;S=c.Build(M,N,R-1);T=c.Build(M,R+1,O);Q=c.Branch(e.GetArray(M,R),S,T);}return Q;},Contains:function(U,V){return!((c.Lookup(U,V))[0]==null);},Enumerate:function(W,X){var Y;Y=$.Tupled(function(Z){var _0,_1,_2,_3,_4,_5,_6;_0=Z[0];_1=Z[1];if(_0==null){if(_1.$==1){_4=_1.$0[0];_5=_1.$1;_6=_1.$0[1];_3={$:1,$0:[_4,[_6,_5]]};}else{_3={$:0};}_2=_3;}else{_2=W?Y([_0.Right,$.New(h,{$:1,$0:[_0.Node,_0.Left],$1:_1})]):Y([_0.Left,$.New(h,{$:1,$0:[_0.Node,_0.Right],$1:_1})]);}return _2;});return f.unfold(Y,[X,$.New(h,{$:0})]);},Lookup:function(_7,_8){var _9,_,ba,bb,bc,bd;_9=[];_=_8;ba=true;while(ba){if(_==null){bb=ba=false;}else{bc=d.Compare(_7,_.Node);if(bc===0){bd=ba=false;}else{if(bc===1){_9.unshift([true,_.Node,_.Left]);bd=_=_.Right;}else{_9.unshift([false,_.Node,_.Right]);bd=_=_.Left;}}bb=bd;}}return[_,_9];},OfSeq:function(bd){var be;be=i.sort(f.toArray(f.distinct(bd)));return c.Build(be,0,be.length-1);},Put:function(bf,bg,bh){var bi,bj,bk;bi=c.Lookup(bg,bh);bj=bi[0];bk=bi[1];return bj==null?c.Rebuild(bk,c.Branch(bg,null,null)):c.Rebuild(bk,c.Branch((bf(bj.Node))(bg),bj.Left,bj.Right));},Rebuild:function(bl,bm){var bn,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC;bn=function(bo){return bo==null?0:bo.Height;};bp=bm;for(bq=0;bq<=e.GetLength(bl)-1;bq++){br=e.GetArray(bl,bq);if(br[0]){bt=br[1];bu=br[2];if(bn(bp)>bn(bu)+1){if(bn(bp.Left)===bn(bp.Right)+1){bx=bp.Left;bw=c.Branch(bx.Node,c.Branch(bt,bu,bx.Left),c.Branch(bp.Node,bx.Right,bp.Right));}else{bw=c.Branch(bp.Node,c.Branch(bt,bu,bp.Left),bp.Right);}bv=bw;}else{bv=c.Branch(bt,bu,bp);}bs=bv;}else{by=br[1];bz=br[2];if(bn(bp)>bn(bz)+1){if(bn(bp.Right)===bn(bp.Left)+1){bC=bp.Right;bB=c.Branch(bC.Node,c.Branch(bp.Node,bp.Left,bC.Left),c.Branch(by,bC.Right,bz));}else{bB=c.Branch(bp.Node,bp.Left,c.Branch(by,bp.Right,bz));}bA=bB;}else{bA=c.Branch(by,bp,bz);}bs=bA;}bp=bs;}return bp;},Remove:function(bD,bE){var bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP;bF=c.Lookup(bD,bE);bG=bF[0];bH=bF[1];if(bG==null){bI=bE;}else{if(bG.Right==null){bJ=c.Rebuild(bH,bG.Left);}else{if(bG.Left==null){bK=c.Rebuild(bH,bG.Right);}else{bM=bG.Left;bN=bG.Right;bL=f.append(c.Enumerate(false,bM),c.Enumerate(false,bN));bO=f.toArray(bL);bP=c.Build(bO,0,bO.length-1);bK=c.Rebuild(bH,bP);}bJ=bK;}bI=bJ;}return bI;},TryFind:function(bQ,bR){var bS;bS=(c.Lookup(bQ,bR))[0];return bS==null?{$:0}:{$:1,$0:bS.Node};}},Dictionary:$.Class({Add:function(bT,bU){var bV,bW;bV=this.hash.call(null,bT);if(this.data.hasOwnProperty(bV)){bW=d.FailWith("An item with the same key has already been added.");}else{this.data[bV]={K:bT,V:bU};bW=void(this.count=this.count+1);}return bW;},Clear:function(){this.data={};this.count=0;return;},ContainsKey:function(bX){return this.data.hasOwnProperty(this.hash.call(null,bX));},GetEnumerator:function(){var bY;bY=k.GetFieldValues(this.data);return l.Get(bY);},Remove:function(bZ){var b0,b1;b0=this.hash.call(null,bZ);if(this.data.hasOwnProperty(b0)){k.Delete(this.data,b0);this.count=this.count-1;b1=true;}else{b1=false;}return b1;},get_Item:function(b2){var b3,b4,b5;b3=this.hash.call(null,b2);if(this.data.hasOwnProperty(b3)){b5=this.data[b3];b4=b5.V;}else{b4=m.notPresent();}return b4;},set_Item:function(b6,b7){var b8;b8=this.hash.call(null,b6);!this.data.hasOwnProperty(b8)?void(this.count=this.count+1):null;this.data[b8]={K:b6,V:b7};return;}},{New:function(b9,b_){return $.New(this,n.New11(b9,function(b$){return function(ca){return b_.Equals(b$,ca);};},function(cb){return b_.GetHashCode(cb);}));},New1:function(cc){return $.New(this,n.New11(cc,function(cd){return function(ce){return o.Equals(cd,ce);};},function(cf){return o.Hash(cf);}));},New11:function(cg,ch,ci){var cj,ck,cl,cm;cj=$.New(this,{});cj.hash=ci;cj.count=0;cj.data={};ck=l.Get(cg);while(ck.MoveNext()){cl=ck.get_Current();cm=cl.K;cj.data[cj.hash.call(null,cm)]=cl.V;}return cj;},New12:function(cn){return $.New(this,n.New11([],function(co){return function(cp){return cn.Equals(co,cp);};},function(cq){return cn.GetHashCode(cq);}));},New2:function(){return $.New(this,n.New11([],function(cr){return function(cs){return o.Equals(cr,cs);};},function(ct){return o.Hash(ct);}));},New3:function(){return $.New(this,n.New2());},New4:function(cv,cw){return $.New(this,n.New12(cw));}}),DictionaryUtil:{notPresent:function(){return d.FailWith("The given key was not present in the dictionary.");}},FSharpMap:$.Class({Add:function(cx,cy){var cz,cA;cz=this.tree;cA=$.New(q,{Key:cx,Value:cy});return p.New1(c.Add(cA,cz));},CompareTo:function(cB){return f.compareWith(function(cC){return function(cD){return d.Compare(cC,cD);};},this,cB);},ContainsKey:function(cE){var cF,cG;cF=this.tree;cG=$.New(q,{Key:cE,Value:undefined});return c.Contains(cG,cF);},Equals:function(cH){return this.get_Count()===cH.get_Count()?f.forall2(function(cI){return function(cJ){return o.Equals(cI,cJ);};},this,cH):false;},GetEnumerator:function(){var cK,cL,cN,cO;cK=this.tree;cL=function(cM){return{K:cM.Key,V:cM.Value};};cN=c.Enumerate(false,cK);cO=f.map(cL,cN);return l.Get(cO);},GetHashCode:function(){var cP;cP=f.toArray(this);return o.Hash(cP);},Remove:function(cQ){var cR,cS;cR=this.tree;cS=$.New(q,{Key:cQ,Value:undefined});return p.New1(c.Remove(cS,cR));},TryFind:function(cT){var cU,cV,cW,cY;cU=this.tree;cV=$.New(q,{Key:cT,Value:undefined});cW=function(cX){return cX.Value;};cY=c.TryFind(cV,cU);return r.map(cW,cY);},get_Count:function(){var cZ;cZ=this.tree;return cZ==null?0:cZ.Count;},get_IsEmpty:function(){return this.tree==null;},get_Item:function(c0){var c1,c2,c3;c1=this.TryFind(c0);if(c1.$==0){c2=d.FailWith("The given key was not present in the dictionary.");}else{c3=c1.$0;c2=c3;}return c2;},get_Tree:function(){return this.tree;}},{New:function(c4){return $.New(this,p.New1(s.fromSeq(c4)));},New1:function(c5){var c6;c6=$.New(this,{});c6.tree=c5;return c6;}}),FSharpSet:$.Class({Add:function(c7){return t.New1(c.Add(c7,this.tree));},CompareTo:function(c8){return f.compareWith(function(c9){return function(c_){return d.Compare(c9,c_);};},this,c8);},Contains:function(c$){return c.Contains(c$,this.tree);},Equals:function(da){return this.get_Count()===da.get_Count()?f.forall2(function(db){return function(dc){return o.Equals(db,dc);};},this,da):false;},GetEnumerator:function(){var dd,de;dd=this.tree;de=c.Enumerate(false,dd);return l.Get(de);},GetHashCode:function(){var df;df=f.toArray(this);return-1741749453+o.Hash(df);},IsProperSubsetOf:function(dg){return this.IsSubsetOf(dg)?this.get_Count()<dg.get_Count():false;},IsProperSupersetOf:function(dh){return this.IsSupersetOf(dh)?this.get_Count()>dh.get_Count():false;},IsSubsetOf:function(di){return f.forall(function(dj){return di.Contains(dj);},this);},IsSupersetOf:function(dk){var dm=this;return f.forall(function(dl){return dm.Contains(dl);},dk);},Remove:function(dn){return t.New1(c.Remove(dn,this.tree));},add:function(_do){var dp,dq;dp=f.append(this,_do);dq=c.OfSeq(dp);return t.New1(dq);},get_Count:function(){var dr;dr=this.tree;return dr==null?0:dr.Count;},get_IsEmpty:function(){return this.tree==null;},get_MaximumElement:function(){var ds;ds=this.tree;return f.head(c.Enumerate(true,ds));},get_MinimumElement:function(){var dt;dt=this.tree;return f.head(c.Enumerate(false,dt));},get_Tree:function(){return this.tree;},sub:function(du){return u.Filter(function(dv){return!du.Contains(dv);},this);}},{New:function(dw){return $.New(this,t.New1(v.ofSeq(dw)));},New1:function(dx){var dy;dy=$.New(this,{});dy.tree=dx;return dy;}}),HashSet:{HashSet:$.Class({Add:function(dz){return this.add(dz);},Clear:function(){this.data=w.prototype.constructor.apply(undefined,[].concat([]));this.count=0;return;},Contains:function(dA){var dB;dB=this.data[this.hash.call(null,dA)];return dB==null?false:this.arrContains(dA,dB);},CopyTo:function(dC){var dD,dE,dF;dD=0;dE=y.concat(this.data);for(dF=0;dF<=dE.length-1;dF++){e.SetArray(dC,dF,dE[dF]);}return;},ExceptWith:function(dG){var dH,dI,dJ;dH=l.Get(dG);while(dH.MoveNext()){dI=dH.get_Current();dJ=this.Remove(dI);}return;},GetEnumerator:function(){var dK;dK=y.concat(this.data);return l.Get(dK);},IntersectWith:function(dL){var dM,dN,dO,dP,dQ,dR,dS;dM=z.New3(dL,this.equals,this.hash);dN=y.concat(this.data);for(dO=0;dO<=dN.length-1;dO++){dP=dN[dO];dQ=dM.Contains(dP);if(!dQ){dS=this.Remove(dP);dR=void dS;}else{dR=null;}}return;},IsProperSubsetOf:function(dT){var dU;dU=i.ofSeq(dT);return this.count<e.GetLength(dU)?this.IsSubsetOf(dU):false;},IsProperSupersetOf:function(dV){var dW;dW=i.ofSeq(dV);return this.count>e.GetLength(dW)?this.IsSupersetOf(dW):false;},IsSubsetOf:function(dX){var dY,dZ,d1;dY=z.New3(dX,this.equals,this.hash);dZ=function(d0){return dY.Contains(d0);};d1=y.concat(this.data);return f.forall(dZ,d1);},IsSupersetOf:function(d2){var d3,d5=this;d3=function(d4){return d5.Contains(d4);};return f.forall(d3,d2);},Overlaps:function(d6){var d7,d9=this;d7=function(d8){return d9.Contains(d8);};return f.exists(d7,d6);},Remove:function(d_){var d$,ea,eb,ec;d$=this.hash.call(null,d_);ea=this.data[d$];if(ea==null){eb=false;}else{if(this.arrRemove(d_,ea)){this.count=this.count-1;ec=true;}else{ec=false;}eb=ec;}return eb;},RemoveWhere:function(ed){var ee,ef,eg,eh,ei;ee=y.concat(this.data);for(ef=0;ef<=ee.length-1;ef++){eg=ee[ef];if(ed(eg)){ei=this.Remove(eg);eh=void ei;}else{eh=null;}}return;},SetEquals:function(ej){var ek;ek=z.New3(ej,this.equals,this.hash);return this.get_Count()===ek.get_Count()?this.IsSupersetOf(ek):false;},SymmetricExceptWith:function(el){var em,en,eo,ep,eq;em=l.Get(el);while(em.MoveNext()){en=em.get_Current();if(this.Contains(en)){ep=this.Remove(en);eo=void ep;}else{eq=this.Add(en);eo=void eq;}}return;},UnionWith:function(er){var es,et,eu;es=l.Get(er);while(es.MoveNext()){et=es.get_Current();eu=this.Add(et);}return;},add:function(ev){var ew,ex,ey,ez,eA,eB;ew=this.hash.call(null,ev);ex=this.data[ew];if(ex==null){this.data[ew]=[ev];this.count=this.count+1;ey=true;}else{if(this.arrContains(ev,ex)){ez=false;}else{eA=[ev];eB=ex.push.apply(ex,[].concat(eA));this.count=this.count+1;ez=true;}ey=ez;}return ey;},arrContains:function(eC,eD){var eE,eF,eG;eE=true;eF=0;eG=eD.length;while(eE?eF<eG:false){(this.equals.call(null,eD[eF]))(eC)?eE=false:eF=eF+1;}return!eE;},arrRemove:function(eH,eI){var eJ,eK,eL,eM,eN,eO,eP;eJ=true;eK=0;eL=eI.length;while(eJ?eK<eL:false){if((this.equals.call(null,eI[eK]))(eH)){eN=eK;eO=[];eP=eI.splice.apply(eI,[eN,1].concat(eO));eM=eJ=false;}else{eM=eK=eK+1;}}return!eJ;},get_Count:function(){return this.count;}},{New:function(eQ){return $.New(this,z.New3(f.empty(),function(eR){return function(eS){return eQ.Equals(eR,eS);};},function(eT){return eQ.GetHashCode(eT);}));},New1:function(eU,eV){return $.New(this,z.New3(eU,function(eW){return function(eX){return eV.Equals(eW,eX);};},function(eY){return eV.GetHashCode(eY);}));},New11:function(eZ){return $.New(this,z.New3(eZ,function(e0){return function(e1){return o.Equals(e0,e1);};},function(e2){return o.Hash(e2);}));},New2:function(){return $.New(this,z.New3(f.empty(),function(e3){return function(e4){return o.Equals(e3,e4);};},function(e5){return o.Hash(e5);}));},New3:function(e6,e7,e8){var e9,e_,e$,fa;e9=$.New(this,{});e9.equals=e7;e9.hash=e8;e9.data=w.prototype.constructor.apply(undefined,[].concat([]));e9.count=0;e_=l.Get(e6);while(e_.MoveNext()){e$=e_.get_Current();fa=e9.add(e$);}return e9;}}),HashSetUtil:{concat:function($o){var $0=this,$this=this;var r=[];for(var k in $o){r.push.apply(r,$o[k]);};return r;}}},LinkedList:{EnumeratorProxy:$.Class({Dispose:function(){return null;},MoveNext:function(){this.c=this.c.n;return!o.Equals(this.c,null);},get_Current:function(){return this.c.v;}},{New:function(fb){var fc;fc=$.New(this,{});fc.c=fb;return fc;}}),ListProxy:$.Class({AddAfter:function(fd,fe){var ff,fg,fh;ff=fd.n;fg={p:fd,n:ff,v:fe};o.Equals(fd.n,null)?void(this.p=fg):null;fd.n=fg;if(!o.Equals(ff,null)){ff.p=fg;fh=fg;}else{fh=null;}this.c=this.c+1;return fg;},AddBefore:function(fi,fj){var fk,fl,fm;fk=fi.p;fl={p:fk,n:fi,v:fj};o.Equals(fi.p,null)?void(this.n=fl):null;fi.p=fl;if(!o.Equals(fk,null)){fk.n=fl;fm=fl;}else{fm=null;}this.c=this.c+1;return fl;},AddFirst:function(fn){var fo,fp;if(this.c===0){fp={p:null,n:null,v:fn};this.n=fp;this.p=this.n;this.c=1;fo=fp;}else{fo=this.AddBefore(this.n,fn);}return fo;},AddLast:function(fq){var fr,fs;if(this.c===0){fs={p:null,n:null,v:fq};this.n=fs;this.p=this.n;this.c=1;fr=fs;}else{fr=this.AddAfter(this.p,fq);}return fr;},Clear:function(){this.c=0;this.n=null;this.p=null;return;},Contains:function(ft){var fu,fv;fu=false;fv=this.n;while(!o.Equals(fv,null)?!fu:false){fv.v==ft?fu=true:fv=fv.n;}return fu;},Find:function(fw){var fx,fy;fx=this.n;fy=true;while(fy?!o.Equals(fx,null):false){fx.v==fw?fy=false:fx=fx.n;}return fy?null:fx;},FindLast:function(fz){var fA,fB;fA=this.p;fB=true;while(fB?!o.Equals(fA,null):false){fA.v==fz?fB=false:fA=fA.p;}return fB?null:fA;},GetEnumerator:function(){return B.New(this);},Remove:function(fC){var fD,fE,fF,fG;fD=fC.p;fE=fC.n;if(o.Equals(fD,null)){fF=void(this.n=fE);}else{fD.n=fE;fF=fE;}if(o.Equals(fE,null)){fG=void(this.p=fD);}else{fE.p=fD;fG=fD;}this.c=this.c-1;return;},Remove1:function(fH){var fI,fJ;fI=this.Find(fH);if(o.Equals(fI,null)){fJ=false;}else{this.Remove(fI);fJ=true;}return fJ;},RemoveFirst:function(){return this.Remove(this.n);},RemoveLast:function(){return this.Remove(this.p);},get_Count:function(){return this.c;},get_First:function(){return this.n;},get_Last:function(){return this.p;}},{New:function(){return $.New(this,C.New1(f.empty()));},New1:function(fK){var fL,fM,fN,fO;fL=$.New(this,{});fL.c=0;fL.n=null;fL.p=null;fM=l.Get(fK);if(fM.MoveNext()){fL.n={p:null,n:null,v:fM.get_Current()};fL.p=fL.n;fN=void(fL.c=1);}else{fN=null;}while(fM.MoveNext()){fO={p:fL.p,n:null,v:fM.get_Current()};fL.p.n=fO;fL.p=fO;fL.c=fL.c+1;}return fL;}})},MapModule:{Exists:function(fP,fQ){var fR;fR=function(fS){return(fP(fS.K))(fS.V);};return f.exists(fR,fQ);},Filter:function(fT,fU){var fV,fW,fY,fZ,f0,f1;fV=fU.get_Tree();fW=function(fX){return(fT(fX.Key))(fX.Value);};fY=c.Enumerate(false,fV);fZ=f.filter(fW,fY);f0=f.toArray(fZ);f1=c.Build(f0,0,f0.length-1);return p.New1(f1);},FindKey:function(f2,f3){var f4;f4=function(f5){return(f2(f5.K))(f5.V)?{$:1,$0:f5.K}:{$:0};};return f.pick(f4,f3);},Fold:function(f6,f7,f8){var f9,f_,gb;f9=f8.get_Tree();f_=function(f$){return function(ga){return((f6(f$))(ga.Key))(ga.Value);};};gb=c.Enumerate(false,f9);return f.fold(f_,f7,gb);},FoldBack:function(gc,gd,ge){var gf,gg,gj;gf=gd.get_Tree();gg=function(gh){return function(gi){return((gc(gi.Key))(gi.Value))(gh);};};gj=c.Enumerate(true,gf);return f.fold(gg,ge,gj);},ForAll:function(gk,gl){var gm;gm=function(gn){return(gk(gn.K))(gn.V);};return f.forall(gm,gl);},Iterate:function(go,gp){var gq;gq=function(gr){return(go(gr.K))(gr.V);};return f.iter(gq,gp);},Map:function(gs,gt){var gu,gv,gx,gy,gz;gu=gt.get_Tree();gv=function(gw){return $.New(q,{Key:gw.Key,Value:(gs(gw.Key))(gw.Value)});};gx=c.Enumerate(false,gu);gy=f.map(gv,gx);gz=c.OfSeq(gy);return p.New1(gz);},OfArray:function(gA){var gB,gF,gG;gB=$.Tupled(function(gC){var gD,gE;gD=gC[0];gE=gC[1];return $.New(q,{Key:gD,Value:gE});});gF=f.map(gB,gA);gG=c.OfSeq(gF);return p.New1(gG);},Partition:function(gH,gI){var gJ,gL,gM,gN,gO,gP,gQ,gR;gJ=function(gK){return(gH(gK.Key))(gK.Value);};gM=gI.get_Tree();gL=f.toArray(c.Enumerate(false,gM));gN=i.partition(gJ,gL);gO=gN[1];gP=gN[0];gQ=c.Build(gP,0,gP.length-1);gR=c.Build(gO,0,gO.length-1);return[p.New1(gQ),p.New1(gR)];},Pick:function(gS,gT){var gU;gU=function(gV){return(gS(gV.K))(gV.V);};return f.pick(gU,gT);},ToSeq:function(gW){var gX,gY,g0;gX=gW.get_Tree();gY=function(gZ){return[gZ.Key,gZ.Value];};g0=c.Enumerate(false,gX);return f.map(gY,g0);},TryFind:function(g1,g2){return g2.TryFind(g1);},TryFindKey:function(g3,g4){var g5;g5=function(g6){return(g3(g6.K))(g6.V)?{$:1,$0:g6.K}:{$:0};};return f.tryPick(g5,g4);},TryPick:function(g7,g8){var g9;g9=function(g_){return(g7(g_.K))(g_.V);};return f.tryPick(g9,g8);}},MapUtil:{fromSeq:function(g$){var ha;ha=f.toArray(f.delay(function(){return f.collect($.Tupled(function(hc){var hd,he;hd=hc[1];he=hc[0];return[$.New(q,{Key:he,Value:hd})];}),f.distinctBy($.Tupled(function(hf){return hf[0];}),g$));}));i.sortInPlace(ha);return c.Build(ha,0,ha.length-1);}},Pair:$.Class({CompareTo:function(hg){return d.Compare(this.Key,hg.Key);},Equals:function(hh){return o.Equals(this.Key,hh.Key);},GetHashCode:function(){var hi;hi=this.Key;return o.Hash(hi);}}),ResizeArray:{ResizeArrayProxy:$.Class({Add:function(hj){return this.arr.push(hj);},AddRange:function(hk){var hm=this;return f.iter(function(hl){return hm.Add(hl);},hk);},Clear:function(){var hn,ho;ho=this.arr;hn=D.splice(this.arr,0,e.GetLength(ho),[]);return;},CopyTo:function(hp){return this.CopyTo1(hp,0);},CopyTo1:function(hq,hr){return this.CopyTo2(0,hq,hr,this.get_Count());},CopyTo2:function(hs,ht,hu,hv){return i.blit(this.arr,hs,ht,hu,hv);},GetEnumerator:function(){var hw;hw=this.arr;return l.Get(hw);},GetRange:function(hx,hy){return E.New(i.sub(this.arr,hx,hy));},Insert:function(hz,hA){var hB;hB=D.splice(this.arr,hz,0,[hA]);return;},InsertRange:function(hC,hD){var hE;hE=D.splice(this.arr,hC,0,f.toArray(hD));return;},RemoveAt:function(hF){var hG;hG=D.splice(this.arr,hF,1,[]);return;},RemoveRange:function(hH,hI){var hJ;hJ=D.splice(this.arr,hH,hI,[]);return;},Reverse:function(){return this.arr.reverse();},Reverse1:function(hK,hL){return i.reverse(this.arr,hK,hL);},ToArray:function(){return this.arr.slice();},get_Count:function(){var hM;hM=this.arr;return e.GetLength(hM);},get_Item:function(hN){return e.GetArray(this.arr,hN);},set_Item:function(hO,hP){return e.SetArray(this.arr,hO,hP);}},{New:function(hQ){var hR;hR=$.New(this,{});hR.arr=hQ;return hR;},New1:function(){return $.New(this,E.New([]));},New11:function(hS){return $.New(this,E.New(f.toArray(hS)));},New2:function(){return $.New(this,E.New([]));}}),splice:function($arr,$index,$howMany,$items){var $0=this,$this=this;return $$.Array.prototype.splice.apply($arr,[$index,$howMany].concat($items));}},SetModule:{Filter:function(hU,hV){var hW,hX;hW=f.toArray(f.filter(hU,hV));hX=c.Build(hW,0,hW.length-1);return t.New1(hX);},FoldBack:function(hY,hZ,h0){var h3;h3=hZ.get_Tree();return f.fold(function(h1){return function(h2){return(hY(h2))(h1);};},h0,c.Enumerate(true,h3));},Partition:function(h4,h5){var h6,h7,h8,h9,h_;h6=i.partition(h4,f.toArray(h5));h7=h6[1];h8=h6[0];h9=c.OfSeq(h8);h_=c.OfSeq(h7);return[t.New1(h9),t.New1(h_)];}},SetUtil:{ofSeq:function(h$){var ia;ia=f.toArray(h$);i.sortInPlace(ia);return c.Build(ia,0,ia.length-1);}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Collections);c=$.Safe(b.BalancedTree);d=$.Safe(a.Operators);e=$.Safe(a.IntrinsicFunctionProxy);f=$.Safe(a.Seq);g=$.Safe(a.List);h=$.Safe(g.T);i=$.Safe(a.Arrays);j=$.Safe(a.JavaScript);k=$.Safe(j.JSModule);l=$.Safe(a.Enumerator);m=$.Safe(b.DictionaryUtil);n=$.Safe(b.Dictionary);o=$.Safe(a.Unchecked);p=$.Safe(b.FSharpMap);q=$.Safe(b.Pair);r=$.Safe(a.Option);s=$.Safe(b.MapUtil);t=$.Safe(b.FSharpSet);u=$.Safe(b.SetModule);v=$.Safe(b.SetUtil);w=$.Safe($$.Array);x=$.Safe(b.HashSet);y=$.Safe(x.HashSetUtil);z=$.Safe(x.HashSet);A=$.Safe(b.LinkedList);B=$.Safe(A.EnumeratorProxy);C=$.Safe(A.ListProxy);D=$.Safe(b.ResizeArray);return E=$.Safe(D.ResizeArrayProxy);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{IntelliFactory:{Reactive:{Disposable:$.Class({Dispose:function(){return this.Dispose1.call(null,null);}},{New:function(r){return $.New(b,{Dispose1:r});}}),HotStream:$.Class({Subscribe:function(s){var t;this.Latest.contents.$==1?s.OnNext(this.Latest.contents.$0):null;t=this.Event;return t.event.Subscribe(s);},Trigger:function(u){var v;this.Latest.contents={$:1,$0:u};v=this.Event;return v.event.Trigger(u);}},{New:function(w){var x;x={$:1,$0:w};return $.New(c,{Latest:{contents:x},Event:f.New()});},New1:function(){return $.New(c,{Latest:{contents:{$:0}},Event:f.New()});}}),Observable:$.Class({Subscribe:function(y){return this.OnSubscribe.call(null,y);},SubscribeWith:function(z,A){return this.OnSubscribe.call(null,g.New(z,A));}},{New:function(B){return $.New(h,{OnSubscribe:B});}}),Observer:$.Class({OnCompleted:function(){return this.OnCompleted1.call(null,null);},OnError:function(){return null;},OnNext:function(D){return this.OnNext1.call(null,D);}},{New:function(E,F){return $.New(g,{OnNext1:E,OnCompleted1:F});}}),Reactive:{Aggregate:function(G,H,I){return h.New(function(J){var K;K={contents:H};return i.subscribeTo(G,function(L){K.contents=(I(K.contents))(L);return J.OnNext(K.contents);});});},Choose:function(M,N){var O;O=function(P){return i.subscribeTo(M,function(Q){var R,S,T;R=N(Q);if(R.$==0){S=null;}else{T=R.$0;S=P.OnNext(T);}return S;});};return h.New(O);},CollectLatest:function(U){return h.New(function(V){var W,X;W=k.New2();X={contents:0};return i.subscribeTo(U,function(Y){var Z,_0;l.Increment(X);Z=X.contents;_0=i.subscribeTo(Y,function(_1){var _2;W.set_Item(Z,_1);_2=m.delay(function(){return m.map(function(_4){return _4.V;},W);});return V.OnNext(_2);});return;});});},CombineLatest:function(_5,_6,_7){var _8;_8=function(_9){var _,ba,bb,bi,bk,bm,bn,bp,br,bs,bt;_={contents:{$:0}};ba={contents:{$:0}};bb=function(){var bd,be,bf,bg,bh;bd=[_.contents,ba.contents];if(bd[0].$==1){if(bd[1].$==1){bg=bd[0].$0;bh=bd[1].$0;bf=_9.OnNext((_7(bg))(bh));}else{bf=null;}be=bf;}else{be=null;}return be;};bi=function(bj){_.contents={$:1,$0:bj};return bb(null);};bk=function(){};bm=g.New(bi,bk);bn=function(bo){ba.contents={$:1,$0:bo};return bb(null);};bp=function(){};br=g.New(bn,bp);bs=_5.Subscribe(bm);bt=_6.Subscribe(br);return b.New(function(){bs.Dispose();return bt.Dispose();});};return h.New(_8);},Concat:function(bu,bv){var bw;bw=function(bx){var by,bz,bB,bD,bE;by={contents:{$:0}};bz=function(bA){return bx.OnNext(bA);};bB=function(){by.contents={$:1,$0:bv.Subscribe(bx)};};bD=g.New(bz,bB);bE=bu.Subscribe(bD);return b.New(function(){by.contents.$==1?by.contents.$0.Dispose():null;return bE.Dispose();});};return h.New(bw);},Default:$.Field(function(){return o.New();}),Drop:function(bG,bH){var bI;bI=function(bJ){var bK;bK={contents:0};return i.subscribeTo(bG,function(bL){l.Increment(bK);return bK.contents>bH?bJ.OnNext(bL):null;});};return h.New(bI);},Heat:function(bM){var bN;bN=c.New1();i.subscribeTo(bM,function(bO){return bN.Trigger(bO);});return bN;},Merge:function(bP,bQ){var bR;bR=function(bS){var bT,bU,bV,bX,bZ,b0,b1,b3,b5,b6;bT={contents:false};bU={contents:false};bV=function(bW){return bS.OnNext(bW);};bX=function(){bT.contents=true;return(bT.contents?bU.contents:false)?bS.OnCompleted():null;};bZ=g.New(bV,bX);b0=bP.Subscribe(bZ);b1=function(b2){return bS.OnNext(b2);};b3=function(){bU.contents=true;return(bT.contents?bU.contents:false)?bS.OnCompleted():null;};b5=g.New(b1,b3);b6=bQ.Subscribe(b5);return b.New(function(){b0.Dispose();return b6.Dispose();});};return h.New(bR);},Never:function(){return h.New(function(){return b.New(function(){});});},Range:function(b_,b$){var ca;ca=function(cb){var cc;for(cc=b_;cc<=b_+b$;cc++){cb.OnNext(cc);}return b.New(function(){});};return h.New(ca);},Reactive:$.Class({Aggregate:function(ce,cf,cg){return n.Aggregate(ce,cf,cg);},Choose:function(ch,ci){return n.Choose(ch,ci);},CollectLatest:function(cj){return n.CollectLatest(cj);},CombineLatest:function(ck,cl,cm){return n.CombineLatest(ck,cl,cm);},Concat:function(cn,co){return n.Concat(cn,co);},Drop:function(cp,cq){return n.Drop(cp,cq);},Heat:function(cr){return n.Heat(cr);},Merge:function(cs,ct){return n.Merge(cs,ct);},Never:function(){return n.Never();},Return:function(cu){return n.Return(cu);},Select:function(cv,cw){return n.Select(cv,cw);},SelectMany:function(cx){return n.SelectMany(cx);},Sequence:function(cy){return n.Sequence(cy);},Switch:function(cz){return n.Switch(cz);},Where:function(cA,cB){return n.Where(cA,cB);}},{New:function(){return $.New(this,{});}}),Return:function(cC){var cD;cD=function(cE){cE.OnNext(cC);cE.OnCompleted();return b.New(function(){});};return h.New(cD);},Select:function(cG,cH){return h.New(function(cI){return i.subscribeTo(cG,function(cJ){return cI.OnNext(cH(cJ));});});},SelectMany:function(cK){return h.New(function(cL){var cM,cO;cM={contents:function(){}};cO=i.subscribeTo(cK,function(cP){var cQ;cQ=i.subscribeTo(cP,function(cR){return cL.OnNext(cR);});cM.contents=function(){cM.contents.call(null,null);return cQ.Dispose();};return;});return b.New(function(){cM.contents.call(null,null);return cO.Dispose();});});},Sequence:function(cU){var cV;cV=function(cW){var cX,cY,cZ,c0;if(cW.$==1){cY=cW.$1;cZ=cW.$0;c0=cV(cY);cX=n.CombineLatest(cZ,c0,function(c1){return function(c2){return $.New(q,{$:1,$0:c1,$1:c2});};});}else{cX=n.Return($.New(q,{$:0}));}return cX;};return n.Select(cV(p.ofSeq(cU)),function(c3){return c3;});},Switch:function(c4){return h.New(function(c5){var c6,c7,c8;c6={contents:0};c7={contents:{$:0}};c8=i.subscribeTo(c4,function(c9){var c_,c$,db;l.Increment(c6);c7.contents.$==1?c7.contents.$0.Dispose():null;c_=c6.contents;c$=i.subscribeTo(c9,function(da){return c_===c6.contents?c5.OnNext(da):null;});db={$:1,$0:c$};c7.contents=db;return;});return c8;});},Where:function(dc,dd){var de;de=function(df){return i.subscribeTo(dc,function(dg){return dd(dg)?df.OnNext(dg):null;});};return h.New(de);}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.Reactive);b=$.Safe(a.Disposable);c=$.Safe(a.HotStream);d=$.Safe($$.IntelliFactory.WebSharper);e=$.Safe(d.Control);f=$.Safe(e.FSharpEvent);g=$.Safe(a.Observer);h=$.Safe(a.Observable);i=$.Safe(d.Util);j=$.Safe(d.Collections);k=$.Safe(j.Dictionary);l=$.Safe(d.Operators);m=$.Safe(d.Seq);n=$.Safe(a.Reactive);o=$.Safe(n.Reactive);p=$.Safe(d.List);return q=$.Safe(p.T);});$.OnLoad(function(){n.Default();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{IntelliFactory:{Formlets:{Base:{D:$.Class({Dispose:function(){return null;}},{New:function(){return $.New(this,{});}}),Form:$.Class({Dispose:function(){return this.Dispose1.call(null,null);}}),Formlet:$.Class({Build:function(){return this.Build1.call(null,null);},MapResult:function(q){var t=this;return $.New(c,{Layout:this.Layout,Build1:function(){var s,u,v,w,y;s=t.Build1.call(null,null);u=t.Utils.Reactive;v=s.State;w=function(x){return q(x);};u.Select(v,w);y=s.State;return $.New(d,{Body:s.Body,Dispose1:s.Dispose1,Notify:s.Notify,State:y});},Utils:t.Utils});},get_Layout:function(){return this.Layout;}}),FormletBuilder:$.Class({Bind:function(z,A){var B;B=this.F;return B.Bind(z,A);},Delay:function(C){return this.F.Delay(C);},Return:function(D){return this.F.Return(D);},ReturnFrom:function(E){return E;}},{New:function(F){var G;G=$.New(this,{});G.F=F;return G;}}),FormletProvider:$.Class({AppendLayout:function(H,I){var J;J=this.ApplyLayout(I);return this.WithLayout(H,J);},Apply:function(K,L){var M,P=this;M=function(){var O,Q,R,S,T,V,W,X,Y,_0,_1,_2,_3,_4,_5,_6,_9;O=P.BuildForm(K);Q=P.BuildForm(L);R=P.U.Reactive;S=O.Body;T=function(U){return $.New(f,{$:1,$0:U});};V=R.Select(S,T);W=P.U.Reactive;X=Q.Body;Y=function(Z){return $.New(f,{$:2,$0:Z});};_0=W.Select(X,Y);_1=P.U.Reactive;_2=_1.Merge(V,_0);_3=P.U.Reactive;_4=Q.State;_5=O.State;_6=function(_7){return function(_8){return g.Apply(_8,_7);};};_9=_3.CombineLatest(_4,_5,_6);return $.New(d,{Body:_2,Dispose1:function(){Q.Dispose1.call(null,null);return O.Dispose1.call(null,null);},Notify:function(ba){Q.Notify.call(null,ba);return O.Notify.call(null,ba);},State:_9});};return P.New(M);},ApplyLayout:function(ba){var bb,bi=this;bb=function(){var bd,be,bf,bg,bh;bd=ba.Build();be=ba.get_Layout().Apply.call(null,bd.Body);if(be.$==0){bg=bd.Body;}else{be.$0[1];bh=be.$0[0];bg=bi.U.Reactive.Return(e.Set(bh));}bf=bg;return $.New(d,{Body:bf,Dispose1:bd.Dispose1,Notify:bd.Notify,State:bd.State});};return bi.New(bb);},Bind:function(bj,bk){var bl;bl=this.Map(bk,bj);return this.Join(bl);},BindWith:function(bm,bn,bo){var bp,bs=this;bp=function(){var br,bt,bu,bv,bw,by,bz,bA,bB,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;br=bs.Bind(bn,bo);bt=br.Build();bu=bs.U.Reactive;bv=bt.Body;bw=function(bx){return bx.$==1?true:false;};by=bs.U.DefaultLayout.Apply.call(null,bu.Where(bv,bw));bz=bs.U.Reactive;bA=bt.Body;bB=function(bC){return bC.$==2?true:false;};bD=bs.U.DefaultLayout.Apply.call(null,bz.Where(bA,bB));bE=[by,bD];if(bE[0].$==1){if(bE[1].$==1){bI=bE[0].$0[0];bJ=bE[1].$0[0];bK=bs.U.Reactive;bL=(bm(bI))(bJ);bM=e.Set(bL);bH=bK.Return(bM);}else{bH=bs.U.Reactive.Never();}bG=bH;}else{bG=bs.U.Reactive.Never();}bF=bG;return $.New(d,{Body:bF,Dispose1:bt.Dispose1,Notify:bt.Notify,State:bt.State});};return bs.New(bp);},BuildForm:function(bN){var bO,bP,bQ,bR,bS;bO=bN.Build();bP=bN.get_Layout().Apply.call(null,bO.Body);if(bP.$==1){bR=bP.$0[1];bS=bP.$0[0];bQ=$.New(d,{Body:this.U.Reactive.Return(e.Set(bS)),Dispose1:function(){bO.Dispose1.call(null,null);return bR.Dispose();},Notify:bO.Notify,State:bO.State});}else{bQ=bO;}return bQ;},Delay:function(bU){var bV,bX=this;bV=function(){return bX.BuildForm(bU(null));};return $.New(c,{Layout:bX.L.Delay(function(){return bU(null).get_Layout();}),Build1:bV,Utils:bX.U});},Deletable:function(bZ){var b0,b4=this;b0=function(b1){var b2,b3;if(b1.$==1){b3=b1.$0;b2=b4.Return({$:1,$0:b3});}else{b2=b4.ReturnEmpty({$:0});}return b2;};return b4.Replace(bZ,b0);},Empty:function(){var b5,b7=this;b5=function(){return $.New(d,{Body:b7.U.Reactive.Return(e.Delete()),Dispose1:function(){},Notify:function(){},State:b7.U.Reactive.Never()});};return b7.New(b5);},EmptyForm:function(){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:this.U.Reactive.Never()});},Fail:function(ca){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(cb){return cb;},Notify:function(){},State:this.U.Reactive.Return($.New(g,{$:1,$0:ca}))});},FailWith:function(cd){var ce,cg=this;ce=function(){return cg.Fail(cd);};return cg.New(ce);},FlipBody:function(ch){var ci,cm=this,cr,cs;ci=function(){var ck,cl,cn,co,cq;ck=ch.Build();cl=cm.U.Reactive;cn=ck.Body;co=function(cp){return e.FlipEdit(cp);};cq=cl.Select(cn,co);return $.New(d,{Body:cq,Dispose1:ck.Dispose1,Notify:ck.Notify,State:ck.State});};cr=cm.New(ci);cs=ch.get_Layout();return cm.WithLayout(cs,cr);},FromState:function(ct){var cu,cw=this;cu=function(){return $.New(d,{Body:cw.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:ct});};return cw.New(cu);},InitWith:function(cz,cA){var cB,cF=this,cJ,cK;cB=function(){var cD,cE,cG,cH,cI;cD=cA.Build();cE=cF.U.Reactive;cG=cF.U.Reactive.Return($.New(g,{$:0,$0:cz}));cH=cD.State;cI=cE.Concat(cG,cH);return $.New(d,{Body:cD.Body,Dispose1:cD.Dispose1,Notify:cD.Notify,State:cI});};cJ=cF.New(cB);cK=cA.get_Layout();return cF.WithLayout(cK,cJ);},InitWithFailure:function(cL){var cM,cQ=this,cU,cV;cM=function(){var cO,cP,cR,cS,cT;cO=cL.Build();cP=cQ.U.Reactive;cR=cQ.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));cS=cO.State;cT=cP.Concat(cR,cS);return $.New(d,{Body:cO.Body,Dispose1:cO.Dispose1,Notify:cO.Notify,State:cT});};cU=cQ.New(cM);cV=cL.get_Layout();return cQ.WithLayout(cV,cU);},Join:function(cW){var cX,c0=this;cX=function(){var cZ,c1,c2,c3,c8,c9,c_,c$,da,df,dg,dh,di,dk,dl,dm,dn,_do,dq,dr,ds,dt,du,dw,dy;cZ=c0.BuildForm(cW);c1=c0.U.Reactive;c2=cZ.State;c3=function(c4){var c5,c6,c7;if(c4.$==1){c6=c4.$0;c5=c0.Fail(c6);}else{c7=c4.$0;c5=c0.BuildForm(c7);}return c5;};c8=c0.U.Reactive;c9=c1.Select(c2,c3);c_=c8.Heat(c9);c$=c0.U.Reactive;da=function(db){var dc,dd,de;dc=c0.U.Reactive.Return(e.Delete());dd=c0.U.Reactive;de=db.Body;return dd.Concat(dc,de);};df=c$.Select(c_,da);dg=c0.U.Reactive;dh=c0.U.Reactive.Switch(df);di=function(dj){return $.New(f,{$:2,$0:dj});};dk=dg.Select(dh,di);dl=c0.U.Reactive;dm=c0.U.Reactive;dn=cZ.Body;_do=function(dp){return $.New(f,{$:1,$0:dp});};dq=dm.Select(dn,_do);dr=dl.Merge(dq,dk);dt=c0.U.Reactive;du=function(dv){return dv.State;};ds=c0.U.Reactive.Switch(dt.Select(c_,du));dw=function(dx){return cZ.Notify.call(null,dx);};dy=function(){return cZ.Dispose1.call(null,null);};return $.New(d,{Body:dr,Dispose1:dy,Notify:dw,State:ds});};return c0.New(cX);},LiftResult:function(dA){var dB;dB=function(dC){return $.New(g,{$:0,$0:dC});};return this.MapResult(dB,dA);},Map:function(dD,dE){var dF;dF=function(dG){return g.Map(dD,dG);};return this.MapResult(dF,dE);},MapBody:function(dH,dI){var dJ,dO=this;dJ={Apply:function(dK){var dL,dM,dN,dP,dQ,dR,dS,dT;dL=dI.get_Layout().Apply.call(null,dK);if(dL.$==0){dN=dO.U.DefaultLayout.Apply.call(null,dK);if(dN.$==0){dP={$:0};}else{dQ=dN.$0[1];dR=dN.$0[0];dP={$:1,$0:[dH(dR),dQ]};}dM=dP;}else{dS=dL.$0[1];dT=dL.$0[0];dM={$:1,$0:[dH(dT),dS]};}return dM;}};return dO.WithLayout(dJ,dI);},MapResult:function(dU,dV){var dW,d0=this;dW=function(){var dY,dZ,d1,d2,d4;dY=dV.Build();dZ=d0.U.Reactive;d1=dY.State;d2=function(d3){return dU(d3);};d4=dZ.Select(d1,d2);return $.New(d,{Body:dY.Body,Dispose1:dY.Dispose1,Notify:dY.Notify,State:d4});};return $.New(c,{Layout:dV.get_Layout(),Build1:dW,Utils:d0.U});},Never:function(){var d5,d7=this;d5=function(){return $.New(d,{Body:d7.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:d7.U.Reactive.Never()});};return d7.New(d5);},New:function(d_){return $.New(c,{Layout:this.L.Default(),Build1:d_,Utils:this.U});},Replace:function(d$,ea){var eb,ed;eb=function(ec){return ea(ec);};ed=this.Map(eb,d$);return this.Switch(ed);},ReplaceFirstWithFailure:function(ee){var ef,ej=this,ep,eq;ef=function(){var eh,ei,ek,el,em,en,eo;eh=ee.Build();ei=ej.U.Reactive;ek=eh.State;el=ei.Drop(ek,1);em=ej.U.Reactive;en=ej.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));eo=em.Concat(en,el);return $.New(d,{Body:eh.Body,Dispose1:eh.Dispose1,Notify:eh.Notify,State:eo});};ep=ej.New(ef);eq=ee.get_Layout();return ej.WithLayout(eq,ep);},Return:function(er){var es,eu=this;es=function(){return $.New(d,{Body:eu.U.Reactive.Never(),Dispose1:function(ev){return ev;},Notify:function(){},State:eu.U.Reactive.Return($.New(g,{$:0,$0:er}))});};return eu.New(es);},ReturnEmpty:function(ex){var ey,eA=this;ey=function(){return $.New(d,{Body:eA.U.Reactive.Return(e.Delete()),Dispose1:function(eB){return eB;},Notify:function(){},State:eA.U.Reactive.Return($.New(g,{$:0,$0:ex}))});};return eA.New(ey);},SelectMany:function(eD){var eE,eH=this;eE=function(){var eG,eI,eJ,eK,eP,eQ,eR,eS,eT,eU,eW,eX,eZ,e4,e5,e_,e$,fa,fb,fc,fd,ff,fg,fh,fi,fk,fl,fn;eG=eH.BuildForm(eD);eI=eH.U.Reactive;eJ=eG.State;eK=function(eL){var eM,eN,eO;if(eL.$==1){eL.$0;eM={$:0};}else{eN=eL.$0;eO=eH.BuildForm(eN);eM={$:1,$0:eO};}return eM;};eP=eH.U.Reactive;eQ=eI.Choose(eJ,eK);eR=eP.Heat(eQ);eS=eH.U.Reactive;eT=eG.Body;eU=function(eV){return $.New(f,{$:1,$0:eV});};eW=eS.Select(eT,eU);eX={contents:function(eY){return $.New(f,{$:1,$0:eY});}};eZ=function(){var e1;e1=eX.contents;eX.contents=function(e2){var e3;e3=e1(e2);return $.New(f,{$:2,$0:e3});};return;};e4=eH.U.Reactive;e5=function(e6){var e7,e8,e9;eZ(null);e7=eX.contents;e8=eH.U.Reactive;e9=e6.Body;return e8.Select(e9,e7);};e_=e4.Select(eR,e5);e$=eH.U.Reactive.SelectMany(e_);fa=eH.U.Reactive;fb=fa.Merge(eW,e$);fc=eH.U.Reactive;fd=function(fe){return fe.State;};ff=fc.Select(eR,fd);fg=eH.U.Reactive;fh=eH.U.Reactive.CollectLatest(ff);fi=function(fj){return g.Sequence(fj);};fk=fg.Select(fh,fi);fl=function(fm){return eG.Notify.call(null,fm);};fn=function(){return eG.Dispose1.call(null,null);};return $.New(d,{Body:fb,Dispose1:fn,Notify:fl,State:fk});};return eH.New(eE);},Sequence:function(fp){var fq,fr,fs,ft,fu,fx,fy;fq=i.ofSeq(fp);if(fq.$==1){fs=fq.$1;ft=fq.$0;fu=this.Return(function(fv){return function(fw){return $.New(j,{$:1,$0:fv,$1:fw});};});fx=this.Sequence(fs);fy=this.Apply(fu,ft);fr=this.Apply(fy,fx);}else{fr=this.Return($.New(j,{$:0}));}return fr;},Switch:function(fz){var fA,fD=this;fA=function(){var fC,fE,fF,fG,fH,fI,fN,fO,fP,fQ,fR,fS,fT,fU,fW,fX,fY,fZ,f1,f3;fC=fD.WithLayoutOrDefault(fz);fE=fD.ApplyLayout(fC);fF=fD.BuildForm(fE);fG=fD.U.Reactive;fH=fF.State;fI=function(fJ){var fK,fL,fM;if(fJ.$==1){fJ.$0;fK={$:0};}else{fL=fJ.$0;fM=fD.BuildForm(fL);fK={$:1,$0:fM};}return fK;};fN=fD.U.Reactive;fO=fG.Choose(fH,fI);fP=fN.Heat(fO);fQ=fD.U.Reactive;fR=fF.Body;fT=fD.U.Reactive;fU=function(fV){return fV.Body;};fS=fD.U.Reactive.Switch(fT.Select(fP,fU));fW=fQ.Concat(fR,fS);fY=fD.U.Reactive;fZ=function(f0){return f0.State;};fX=fD.U.Reactive.Switch(fY.Select(fP,fZ));f1=function(f2){return fF.Notify.call(null,f2);};f3=function(){return fF.Dispose1.call(null,null);};return $.New(d,{Body:fW,Dispose1:f3,Notify:f1,State:fX});};return fD.New(fA);},WithCancelation:function(f5,f6){var f7,gd,ge,gf,gg,gh,gj;f7=function(f8){return function(f9){var f_,f$,ga,gb,gc;f_=[f8,f9];if(f_[1].$==0){f$=$.New(g,{$:0,$0:{$:0}});}else{if(f_[0].$==1){gb=f_[0].$0;ga=$.New(g,{$:1,$0:gb});}else{gc=f_[0].$0;ga=$.New(g,{$:0,$0:{$:1,$0:gc}});}f$=ga;}return f$;};};gd=this.Return(f7);ge=this.LiftResult(f5);gf=this.LiftResult(f6);gg=this.Apply(gd,ge);gh=function(gi){return g.Join(gi);};gj=this.Apply(gg,gf);return this.MapResult(gh,gj);},WithLayout:function(gk,gl){return $.New(c,{Layout:gk,Build1:function(){return gl.Build();},Utils:this.U});},WithLayoutOrDefault:function(gn){var go;go=function(gp){return gp;};return this.MapBody(go,gn);},WithNotification:function(gq,gr){var gs,gv=this,gy,gz;gs=function(){var gu,gw;gu=gv.BuildForm(gr);gw=function(gx){gu.Notify.call(null,gx);return gq(gx);};return $.New(d,{Body:gu.Body,Dispose1:gu.Dispose1,Notify:gw,State:gu.State});};gy=gv.New(gs);gz=gr.get_Layout();return gv.WithLayout(gz,gy);},WithNotificationChannel:function(gA){var gB,gF=this,gN,gO;gB=function(){var gD,gE,gG,gH,gJ,gL,gM;gD=gA.Build();gE=gF.U.Reactive;gG=gD.State;gH=function(gI){return[gI,gD.Notify];};gJ=function(gK){return g.Map(gH,gK);};gL=gE.Select(gG,gJ);gM=gD.Notify;return $.New(d,{Body:gD.Body,Dispose1:gD.Dispose1,Notify:gM,State:gL});};gN=gF.New(gB);gO=gA.get_Layout();return gF.WithLayout(gO,gN);}},{New:function(gP){var gQ;gQ=$.New(this,{});gQ.U=gP;gQ.L=k.New({Reactive:gQ.U.Reactive});return gQ;}}),LayoutUtils:$.Class({Default:function(){return{Apply:function(){return{$:0};}};},Delay:function(gS){return{Apply:function(gT){return gS(null).Apply.call(null,gT);}};},New:function(gU){return{Apply:function(gV){var gW,gX,gY;gW=gU(null);gX={contents:$.New(l,{$:0})};gY=m.subscribeTo(gV,function(gZ){var g0,g1,g2,g3;g0=e.ReplacedTree(gZ,gX.contents);gX.contents=e.Apply(gZ,gX.contents);g1=e.Range(gZ,gX.contents);g2=g1[0];gW.Remove.call(null,g0.get_Sequence());g3=function(g4){return function(g5){return(gW.Insert.call(null,g2+g4))(g5);};};return n.iteri(g3,gZ);});return{$:1,$0:[gW.Body,gY]};}};}},{New:function(){return $.New(this,{});}}),Result:$.Class({},{Apply:function(g7,g8){var g9,g_,g$,ha,hb,hc,hd,he,hf,hg;g9=[g7,g8];if(g9[0].$==1){if(g9[1].$==1){ha=g9[0].$0;hb=g9[1].$0;g$=$.New(g,{$:1,$0:i.append(ha,hb)});}else{hc=g9[0].$0;g$=$.New(g,{$:1,$0:hc});}g_=g$;}else{if(g9[1].$==1){g9[0].$0;he=g9[1].$0;hd=$.New(g,{$:1,$0:he});}else{hf=g9[0].$0;hg=g9[1].$0;hd=$.New(g,{$:0,$0:hf(hg)});}g_=hd;}return g_;},Join:function(hh){var hi,hj,hk;if(hh.$==1){hj=hh.$0;hi=$.New(g,{$:1,$0:hj});}else{hk=hh.$0;hi=hk;}return hi;},Map:function(hl,hm){var hn,ho,hp;if(hm.$==1){ho=hm.$0;hn=$.New(g,{$:1,$0:ho});}else{hp=hm.$0;hn=$.New(g,{$:0,$0:hl(hp)});}return hn;},OfOption:function(hq){var hr,hs;if(hq.$==0){hr=$.New(g,{$:1,$0:$.New(j,{$:0})});}else{hs=hq.$0;hr=$.New(g,{$:0,$0:hs});}return hr;},Sequence:function(ht){var hu;hu=function(hv){return function(hw){var hx,hy,hz,hA,hB,hC,hD,hE,hF;if(hv.$==1){hy=hv.$0;if(hw.$==1){hA=hw.$0;hz=$.New(g,{$:1,$0:i.append(hy,hA)});}else{hw.$0;hz=$.New(g,{$:1,$0:hy});}hx=hz;}else{hB=hv.$0;if(hw.$==1){hD=hw.$0;hC=$.New(g,{$:1,$0:hD});}else{hE=hw.$0;hF=i.ofArray([hE]);hC=$.New(g,{$:0,$0:i.append(hB,hF)});}hx=hC;}return hx;};};return n.fold(hu,$.New(g,{$:0,$0:$.New(j,{$:0})}),ht);}}),Tree:{Apply:function(hG,hH){var hI;hI=function(hJ,hK){var hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU;if(hJ.$==1){hM=hJ.$0;if(hK.$==2){hO=hK.$1;hP=hK.$0;hN=$.New(l,{$:2,$0:hI(hM,hP),$1:hO});}else{hN=hI($.New(f,{$:1,$0:hM}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:hK}));}hL=hN;}else{if(hJ.$==2){hQ=hJ.$0;if(hK.$==2){hS=hK.$1;hT=hK.$0;hR=$.New(l,{$:2,$0:hT,$1:hI(hQ,hS)});}else{hR=hI($.New(f,{$:2,$0:hQ}),$.New(l,{$:2,$0:hK,$1:$.New(l,{$:0})}));}hL=hR;}else{hU=hJ.$0;hL=hU;}}return hL;};return hI(hG,hH);},Count:function(hV){var hW,hX,hY,hZ,h0,h1,h2,h3,h4,h5,h6,h7,h8;hW=[];hX=$.New(j,{$:0});hW[3]=hV;hW[2]=hX;hW[1]=0;hW[0]=1;while(hW[0]){if(hW[3].$==2){hZ=hW[3].$1;h0=hW[3].$0;h1=$.New(j,{$:1,$0:hZ,$1:hW[2]});h2=hW[1];hW[3]=h0;hW[2]=h1;hW[1]=h2;hY=void(hW[0]=1);}else{h3=hW[3];h4=h3.$==0?0:1;if(hW[2].$==1){h6=hW[2].$1;h7=hW[2].$0;h8=hW[1]+h4;hW[3]=h7;hW[2]=h6;hW[1]=h8;h5=void(hW[0]=1);}else{hW[0]=0;h5=void(hW[1]=hW[1]+h4);}hY=h5;}}return hW[1];},DeepFlipEdit:function(h9){var h_,h$,ia,ib;if(h9.$==1){h$=h9.$0;h_=$.New(f,{$:2,$0:e.DeepFlipEdit(h$)});}else{if(h9.$==2){ia=h9.$0;h_=$.New(f,{$:1,$0:e.DeepFlipEdit(ia)});}else{ib=h9.$0;h_=$.New(f,{$:0,$0:ib});}}return h_;},Delete:function(){return $.New(f,{$:0,$0:$.New(l,{$:0})});},Edit:$.Class({GetEnumerator:function(){var ic;ic=this.get_Sequence();return o.Get(ic);},GetEnumerator1:function(){var id;id=this.get_Sequence();return o.Get(id);},get_Sequence:function(){var ie,_if,ig,ih;if(this.$==1){_if=this.$0;ie=_if.get_Sequence();}else{if(this.$==2){ig=this.$0;ie=ig.get_Sequence();}else{ih=this.$0;ie=ih.get_Sequence();}}return ie;}}),FlipEdit:function(ii){var ij,ik,il,im;if(ii.$==1){ik=ii.$0;ij=$.New(f,{$:2,$0:ik});}else{if(ii.$==2){il=ii.$0;ij=$.New(f,{$:1,$0:il});}else{im=ii.$0;ij=$.New(f,{$:0,$0:im});}}return ij;},FromSequence:function(_in){var io,ir;io=function(ip){return function(iq){return $.New(l,{$:2,$0:ip,$1:$.New(l,{$:1,$0:iq})});};};ir=$.New(l,{$:0});return n.fold(io,ir,_in);},Range:function(is,it){var iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH;iu=[];iu[3]=0;iu[2]=it;iu[1]=is;iu[0]=1;while(iu[0]){if(iu[1].$==1){iw=iu[1].$0;if(iu[2].$==2){iu[2].$1;iy=iu[2].$0;iu[3]=iu[3];iu[2]=iy;iu[1]=iw;ix=void(iu[0]=1);}else{iz=iu[3];iA=$.New(l,{$:0});iu[3]=iz;iu[2]=iA;iu[1]=iw;ix=void(iu[0]=1);}iv=ix;}else{if(iu[1].$==2){iB=iu[1].$0;if(iu[2].$==2){iD=iu[2].$1;iE=iu[2].$0;iu[3]=iu[3]+e.Count(iE);iu[2]=iD;iu[1]=iB;iC=void(iu[0]=1);}else{iF=iu[2];iG=iu[3]+e.Count(iF);iH=$.New(l,{$:0});iu[3]=iG;iu[2]=iH;iu[1]=iB;iC=void(iu[0]=1);}iv=iC;}else{iu[1].$0;iu[0]=0;iv=void(iu[1]=[iu[3],e.Count(iu[2])]);}}}return iu[1];},ReplacedTree:function(iI,iJ){var iK,iL,iM,iN,iO,iP,iQ;if(iI.$==1){iL=iI.$0;if(iJ.$==2){iJ.$1;iN=iJ.$0;iM=e.ReplacedTree(iL,iN);}else{iM=e.ReplacedTree($.New(f,{$:1,$0:iL}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:iJ}));}iK=iM;}else{if(iI.$==2){iO=iI.$0;if(iJ.$==2){iQ=iJ.$1;iJ.$0;iP=e.ReplacedTree(iO,iQ);}else{iP=e.ReplacedTree($.New(f,{$:2,$0:iO}),$.New(l,{$:2,$0:iJ,$1:$.New(l,{$:0})}));}iK=iP;}else{iI.$0;iK=iJ;}}return iK;},Set:function(iR){return $.New(f,{$:0,$0:$.New(l,{$:1,$0:iR})});},ShowEdit:function(iS){var iT;iT=function(iU){var iV,iW,iX;if(iU.$==1){iW=iU.$0;iV="Left > "+iT(iW);}else{if(iU.$==2){iX=iU.$0;iV="Right > "+iT(iX);}else{iV="Replace";}}return iV;};return iT(iS);},Transform:function(iY,iZ){var i0,i1,i2,i3,i4,i5;if(iZ.$==1){i1=iZ.$0;i2=e.Transform(iY,i1);i0=$.New(f,{$:1,$0:i2});}else{if(iZ.$==2){i3=iZ.$0;i4=e.Transform(iY,i3);i0=$.New(f,{$:2,$0:i4});}else{i5=iZ.$0;i0=$.New(f,{$:0,$0:iY(i5)});}}return i0;},Tree:$.Class({GetEnumerator:function(){var i6;i6=this.get_Sequence();return o.Get(i6);},GetEnumerator1:function(){var i7;i7=this.get_Sequence();return o.Get(i7);},Map:function(i8){var i9,i_,i$,ja;if(this.$==1){i_=this.$0;i9=$.New(l,{$:1,$0:i8(i_)});}else{if(this.$==2){i$=this.$1;ja=this.$0;i9=$.New(l,{$:2,$0:ja.Map(i8),$1:i$.Map(i8)});}else{i9=$.New(l,{$:0});}}return i9;},get_Sequence:function(){var jb,jc,jd,je;if(this.$==1){jc=this.$0;jb=[jc];}else{if(this.$==2){jd=this.$1;je=this.$0;jb=n.append(je.get_Sequence(),jd.get_Sequence());}else{jb=n.empty();}}return jb;}})},Validator:$.Class({Is:function(jf,jg,jh){return this.Validate(jf,jg,jh);},IsEmail:function(ji){var jk=this;return function(jj){return jk.IsRegexMatch("^[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?$",ji,jj);};},IsEqual:function(jl,jm,jn){var jo;jo=function(jp){return p.Equals(jp,jl);};return this.Validate(jo,jm,jn);},IsFloat:function(jq){var js=this;return function(jr){return js.IsRegexMatch("^\\s*(\\+|-)?((\\d+(\\.\\d+)?)|(\\.\\d+))\\s*$",jq,jr);};},IsGreaterThan:function(jt,ju,jv){var jw;jw=function(jx){return p.Compare(jx,jt)===1;};return this.Validate(jw,ju,jv);},IsInt:function(jy){var jA=this;return function(jz){return jA.IsRegexMatch("^-?\\d+$",jy,jz);};},IsLessThan:function(jB,jC,jD){var jE;jE=function(jF){return p.Compare(jF,jB)===-1;};return this.Validate(jE,jC,jD);},IsNotEmpty:function(jG,jH){var jI;jI=function(jJ){return jJ!=="";};return this.Validate(jI,jG,jH);},IsNotEqual:function(jK,jL,jM){var jN;jN=function(jO){return!p.Equals(jO,jK);};return this.Validate(jN,jL,jM);},IsRegexMatch:function(jP,jQ,jR){var jS,jV=this;jS=function(jT){var jU;jU=jV.VP;return jU.Matches(jP,jT);};return jV.Validate(jS,jQ,jR);},IsTrue:function(jW,jX){var jY;jY=function(jZ){return jZ;};return this.Validate(jY,jW,jX);},Validate:function(j0,j1,j2){var j3;j3=j2.MapResult(function(j4){var j5,j6,j7;if(j4.$==1){j6=j4.$0;j5=$.New(g,{$:1,$0:j6});}else{j7=j4.$0;j5=j0(j7)?$.New(g,{$:0,$0:j7}):$.New(g,{$:1,$0:i.ofArray([j1])});}return j5;});return j3;}},{New:function(j8){var j9;j9=$.New(this,{});j9.VP=j8;return j9;}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.Formlets);b=$.Safe(a.Base);c=$.Safe(b.Formlet);d=$.Safe(b.Form);e=$.Safe(b.Tree);f=$.Safe(e.Edit);g=$.Safe(b.Result);h=$.Safe($$.IntelliFactory.WebSharper);i=$.Safe(h.List);j=$.Safe(i.T);k=$.Safe(b.LayoutUtils);l=$.Safe(e.Tree);m=$.Safe(h.Util);n=$.Safe(h.Seq);o=$.Safe(h.Enumerator);return p=$.Safe(h.Unchecked);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3;$.Define($$,{IntelliFactory:{WebSharper:{Formlets:{Body:$.Class({},{New:function(_4,_5){return $.New(c,{Element:_4,Label:_5});}}),Controls:{Button:function(_6){var _7;_7=function(){return f.Button(g.ofArray([f.Text(_6)]));};return h.ElementButton(_7);},Checkbox:function(_9){return h.CheckboxControl(false,_9);},CheckboxControl:function(_,ba){var bb;bb=function(){var bd,be,bf,bg,bh,bi,bj,bp,bq,br,bs,bt,bu,bv;bd=j.New($.New(m,{$:0,$0:ba}));if(_){bg=f.Attr();bf=g.ofArray([bg.NewAttr("disabled","disabled")]);}else{bf=$.New(n,{$:0});}be=bf;bi=f.Attr();bh=o.add(f.Input(g.ofArray([bi.NewAttr("type","checkbox"),f.Attr().Class("inputCheckbox")])),be);bj=function(bk){return function(){var bm,bn,bo;if(!_){bn=p(bk.get_Body()).prop("checked");bo=$.New(m,{$:0,$0:bn});bm=bd.Trigger(bo);}else{bm=null;}return bm;};};q.Events().OnClick(bj,bh);bp=bh;if(ba){br=bp["HtmlProvider@33"];bs=bp.get_Body();bq=br.SetAttribute(bs,"defaultChecked","true");}else{bt=bp["HtmlProvider@33"];bu=bp.get_Body();bq=bt.RemoveAttribute(bu,"checked");}bv=function(){var bx,by,bz,bA,bB,bC,bD;if(ba){by=bp["HtmlProvider@33"];bz=bp.get_Body();bx=by.SetProperty(bz,"checked",true);}else{bA=bp["HtmlProvider@33"];bB=bp.get_Body();bA.RemoveAttribute(bB,"checked");bC=bp["HtmlProvider@33"];bD=bp.get_Body();bx=bC.SetProperty(bD,"checked",false);}return bd.Trigger($.New(m,{$:0,$0:ba}));};bv(null);return[bp,bv,bd];};return r.MkFormlet(bb);},CheckboxGroup:function(bD){return h.CheckboxGroupControl(false,bD);},CheckboxGroupControl:function(bE,bF){var bG,bU,bV,bW,b0;bG=$.Tupled(function(bH){var bI,bJ,bK,bL,bM,bQ,bR,bT;bI=bH[0];bJ=bH[1];bK=bH[2];bL=h.CheckboxControl(bE,bK);bM=function(){var bO,bP;bO=g.ofArray([f.Text(bI)]);bP=f.Tags();return bP.NewTag("label",bO);};bQ={$:1,$0:bM};bR=function(bS){return[bS,bJ];};bT=s.WithLabel(bQ,bL);return s.Map(bR,bT);});bU=g.map(bG,bF);bV=s.Sequence(bU);bW=$.Tupled(function(bX){var bY,bZ;bY=bX[0];bZ=bX[1];return bY?{$:1,$0:bZ}:{$:0};});b0=function(b1){return g.choose(bW,b1);};return s.Map(b0,bV);},ElementButton:function(b2){var b3;b3=function(){var b5,b6,b7,b8,b$,ca;b5=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));b6={contents:0};b7=b2(null);b8=function(){return function(){b5.Trigger($.New(m,{$:0,$0:b6.contents}));return t.Increment(b6);};};q.Events().OnClick(b8,b7);b$=b7;ca=function(){b6.contents=0;return b5.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};return[b$,ca,b5];};return r.MkFormlet(b3);},Input:function(cc){return h.InputField(false,"text",u.InputTextClass(),cc);},InputControl:function(cd,ce){var cf;cf=function(){var ch,ci,cj;ch=j.New($.New(m,{$:0,$0:cd}));ci=ce(ch);ci.set_Value(cd);cj=function(){ci.set_Value(cd);return ch.Trigger($.New(m,{$:0,$0:cd}));};return[ci,cj,ch];};return r.MkFormlet(cf);},InputField:function(cl,cm,cn,co){return h.InputControl(co,function(cp){var cq,cr,cs,ct,cu,cv,cw,cx;if(cl){cs=f.Attr();cr=g.ofArray([cs.NewAttr("readonly","readonly")]);}else{cr=$.New(n,{$:0});}cq=cr;cu=f.Attr();ct=g.ofArray([cu.NewAttr("type",cm),f.Attr().Class(cn)]);cv=g.append(ct,cq);cw=f.Input(cv);cx=function(){return!cl?cp.Trigger($.New(m,{$:0,$0:cw.get_Value()})):null;};h.OnTextChange(cx,cw);return cw;});},OnTextChange:function(cz,cA){var cB,cC,cF,cH;cB={contents:cA.get_Value()};cC=function(){var cE;if(cA.get_Value()!==cB.contents){cB.contents=cA.get_Value();cE=cz(null);}else{cE=null;}return cE;};cF=function(){return cC(null);};q.Events().OnChange(cF,cA);cH=function(){return function(){return cC(null);};};q.Events().OnKeyUp(cH,cA);cA.Dom.oninput=cC;return;},Password:function(cK){return h.InputField(false,"password","inputPassword",cK);},RadioButtonGroup:function(cL,cM){return h.RadioButtonGroupControl(false,cL,cM);},RadioButtonGroupControl:function(cN,cO,cP){var cQ;cQ=function(){var cS,cT,cU,cV,cW,c0,c1,c7,c8,c_,c$,di,dj,dw,dD,dQ,dR,dS,dT;cS="id"+v.round(v.random()*100000000);if(cO.$==0){cU={$:0};}else{cV=cO.$0;cW=function(cX){return $.Tupled(function(cY){var cZ;cY[0];cZ=cY[1];return[cX,cZ];});};c0=g.mapi(cW,cP);c1=$.Tupled(function(c2){var c3,c4,c5,c6;c3=c2[0];c4=c2[1];if(cO.$==0){c5={$:0};}else{c6=cO.$0;c5=c6===c3?{$:1,$0:$.New(m,{$:0,$0:c4})}:{$:0};}return c5;});cU=w.tryPick(c1,c0);}cT=cU;c7=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));c8=function(c9){return j.New(c9);};c_=x.Maybe(c7,c8,cT);c$=$.Tupled(function(da){var db,dc,dd,de,df,dg,dh;db=da[0];dc=da[1];de=f.Attr();df=f.Attr();if(cN){dh=f.Attr();dg=g.ofArray([dh.NewAttr("disabled","disabled")]);}else{dg=$.New(n,{$:0});}dd=o.add(f.Input(g.ofArray([f.Attr().Class("inputRadio"),de.NewAttr("type","radio"),df.NewAttr("name",cS)])),dg);return[dd,db,dc];});di=g.map(c$,cP);dj=function(dk,dl,dm){var dn,_do,dp,dq,dr,ds,dt,du,dv;if(cO.$==0){_do=dk["HtmlProvider@33"];dp=dk.get_Body();_do.RemoveAttribute(dp,"checked");dn=c_.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));}else{dq=cO.$0;if(dq===dm){ds=dk["HtmlProvider@33"];dt=dk.get_Body();ds.SetProperty(dt,"checked",true);dr=c_.Trigger($.New(m,{$:0,$0:dl}));}else{du=dk["HtmlProvider@33"];dv=dk.get_Body();dr=du.SetProperty(dv,"checked",false);}dn=dr;}return dn;};dw=function(){var dy;dy=function(dz){return $.Tupled(function(dA){var dB,dC;dB=dA[0];dA[1];dC=dA[2];return dj(dB,dC,dz);});};return w.iteri(dy,di);};dD=function(dE){return $.Tupled(function(dF){var dG,dH,dI,dJ,dM;dG=dF[0];dH=dF[1];dI=dF[2];dj(dG,dI,dE);dJ=function(){return function(){return!cN?c_.Trigger($.New(m,{$:0,$0:dI})):null;};};q.Events().OnClick(dJ,dG);dM={$:1,$0:function(){var dO,dP;dO=g.ofArray([f.Text(dH)]);dP=f.Tags();return dP.NewTag("label",dO);}};return $.New(c,{Element:dG,Label:dM});});};dQ=g.mapi(dD,di);dR=y.FromSequence(dQ);dS=$.New(z,{$:0,$0:dR});dT=r.RX().Return(dS);return $.New(A,{Body:dT,Dispose1:function(){},Notify:function(){return dw(null);},State:c_});};return s.New(cQ);},ReadOnlyCheckbox:function(dW){return h.CheckboxControl(true,dW);},ReadOnlyInput:function(dX){return h.InputField(true,"text",u.InputTextClass(),dX);},ReadOnlyRadioButtonGroup:function(dY,dZ){return h.RadioButtonGroupControl(true,dY,dZ);},ReadOnlySelect:function(d0,d1){return h.SelectControl(true,d0,d1);},ReadOnlyTextArea:function(d2){return h.TextAreaControl(true,d2);},Select:function(d3,d4){return h.SelectControl(false,d3,d4);},SelectControl:function(d5,d6,d7){var d8;d8=function(){var d_,ea,eb,ec,ed,el,em,en,eo,ep,eq,er,es,ex;d_=$.Tupled(function(d$){return d$[1];});ea=g.map(d_,d7);eb=B.ofSeq(ea);ec=(d6>=0?d6<d7.get_Length():false)?d6:0;ed=function(ee){return $.Tupled(function(ef){var eg,eh,ei,ej,ek;eg=ef[0];ef[1];eh=f.Tags();ej=f.Attr();ek=$$.String(ee);ei=g.ofArray([f.Text(eg),ej.NewAttr("value",ek)]);return eh.NewTag("option",ei);});};el=g.mapi(ed,d7);em=f.Select(el);if(d5){ep=f.Attr();eo=o.add(em,g.ofArray([ep.NewAttr("disabled","disabled")]));}else{eo=em;}en=eo;eq=$.New(m,{$:0,$0:C.GetArray(eb,ec)});er=j.New(eq);es=function(){var eu,ev,ew;eu=$$.String(ec);ev=en["HtmlProvider@33"];ew=en.get_Body();ev.SetProperty(ew,"value",eu);return er.Trigger(eq);};es(null);ex=function(){var ez,eA,eB,eC;if(!d5){eA=en.get_Value();eB=C.GetArray(eb,eA<<0);eC=$.New(m,{$:0,$0:eB});ez=er.Trigger(eC);}else{ez=null;}return ez;};q.Events().OnChange(ex,en);es(null);return[en,es,er];};return r.MkFormlet(d8);},TextArea:function(eD){return h.TextAreaControl(false,eD);},TextAreaControl:function(eE,eF){return h.InputControl(eF,function(eG){var eH,eI,eJ,eK,eL;if(eE){eJ=f.Attr();eI=g.ofArray([eJ.NewAttr("readonly","readonly")]);}else{eI=$.New(n,{$:0});}eH=eI;eK=f.TextArea(eH);eL=function(){return!eE?eG.Trigger($.New(m,{$:0,$0:eK.get_Value()})):null;};h.OnTextChange(eL,eK);return eK;});}},CssConstants:{InputTextClass:$.Field(function(){return"inputText";})},Data:{$:function(eN,eO){var eP,eQ;eP=r.BaseFormlet();eQ=eP.Apply(eN,eO);return r.OfIFormlet(eQ);},BaseFormlet:function(){return D.New(r.UtilsProvider());},DefaultLayout:$.Field(function(){return r.Layout().get_Vertical();}),Formlet:$.Class({Build:function(){return this.buildInternal.call(null,null);},MapResult:function(eR){var eS,eV=this;eS=E.New(function(){var eU,eW,eX,eY;eU=eV.buildInternal.call(null,null);eW=eV.utils.Reactive;eX=eU.State;eY=function(eZ){return eR(eZ);};return $.New(A,{Body:eU.Body,Dispose1:eU.Dispose1,Notify:eU.Notify,State:eW.Select(eX,eY)});},eV.layoutInternal,eV.formletBase,eV.utils);return eS;},Render:function(){return this.Run(function(){}).Render();},Run:function(e1){var e2,e3,e4,e5,e6,e9,e_,e$,fa,fb,fc,fd;e2=this.get_ElementInternal();if(e2.$==0){e4=this.formletBase.ApplyLayout(this);e5=e4.Build();e6=G.subscribeTo(e5.State,function(e7){var e8;e8=m.Map(e1,e7);return;});e9=e4.get_Layout().Apply.call(null,e5.Body);if(e9.$==0){fa=r.DefaultLayout().Apply.call(null,e5.Body).$0;fb=fa[0];e$=fb.Element;}else{fc=e9.$0[0];e$=fc.Element;}e_=e$;this.set_ElementInternal({$:1,$0:e_});e3=e_;}else{fd=e2.$0;e3=fd;}return e3;},get_Body:function(){return this.Run(function(){}).get_Body();},get_ElementInternal:function(){return this["ElementInternal@"];},get_Layout:function(){return this.layoutInternal;},set_ElementInternal:function(ff){this["ElementInternal@"]=ff;return;}},{New:function(fg,fh,fi,fj){var fk;fk=$.New(this,F.New());fk.buildInternal=fg;fk.layoutInternal=fh;fk.formletBase=fi;fk.utils=fj;fk["ElementInternal@"]={$:0};return fk;}}),Layout:$.Field(function(){return H.New(I.New({Reactive:J.Default()}));}),MkFormlet:function(fl){var fm,fn,fy;fm=r.BaseFormlet();fn=function(){var fp,fq,fr,fs,ft,fv,fw;fp=fl(null);fq=fp[2];fr=fp[1];fs=fp[0];ft=function(){return fr(null);};fv=r.NewBody(fs,{$:0});fw=y.Set(fv);return $.New(A,{Body:r.RX().Return(fw),Dispose1:function(){return null;},Notify:ft,State:fq});};fy=fm.New(fn);return r.OfIFormlet(fy);},NewBody:function(fz,fA){return c.New(fz,fA);},OfIFormlet:function(fB){var fC;fC=E.New(function(){return fB.Build();},fB.get_Layout(),r.BaseFormlet(),r.UtilsProvider());return r.PropagateRenderFrom(fB,fC);},PropagateRenderFrom:function(fE,fF){fE.hasOwnProperty("Render")?void(fF.Render=fE.Render):null;return fF;},RX:$.Field(function(){return J.Default();}),UtilsProvider:function(){return{Reactive:r.RX(),DefaultLayout:r.DefaultLayout()};},Validator:$.Field(function(){return K.New(L.New());}),ValidatorProvidor:$.Class({Matches:function(fG,fH){return fH.match(new M(fG));}},{New:function(){return $.New(this,{});}})},ElementStore:$.Class({Init:function(){this.store=O.New2();return;},RegisterElement:function(fI,fJ){var fK;fK=this.store.ContainsKey(fI);return!fK?this.store.set_Item(fI,fJ):null;},Remove:function(fL){var fM,fN;if(this.store.ContainsKey(fL)){(this.store.get_Item(fL))(null);fN=this.store.Remove(fL);fM=void fN;}else{fM=null;}return fM;}},{New:function(){return $.New(this,{});},NewElementStore:function(){var fO;fO=P.New();fO.Init();return fO;}}),Enhance:{Cancel:function(fP,fQ){return s.Replace(fP,function(fR){return fQ(fR)?s.Empty():s.Return(fR);});},CustomMany:function(fS,fT){var fU,fW,fX,fZ,f1,f2,f3,f4,f5,f6,gc,gd,ge,gf,gh,gi;fU=h.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(fS.AddIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));});fW=s.InitWith(1,fU);fX=function(){};fZ=h.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(fS.RemoveIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));});f1=s.Map(fX,fZ);f2=s.WithCancelation(fT,f1);f3=r.Layout().get_Horizontal();f4=s.WithLayout(f3,f2);f5=Q.Deletable(f4);f6=function(){var f8,f_,ga,gb;f8=function(f9){return g.ofSeq(f9);};f_=Q.Many_(fW,function(){return f5;});ga=s.Map(f8,f_);gb=s.WithLayoutOrDefault(ga);return s.ApplyLayout(gb);};gc=j.New($.New(m,{$:0,$0:null}));gd=r.BaseFormlet().FromState(gc);ge=r.OfIFormlet(gd);gf=function(){return gc.Trigger($.New(m,{$:0,$0:null}));};gh=s.Do();gi=gh.Delay(function(){return gh.Bind(ge,function(){return gh.ReturnFrom(f6(null));});});return s.WithNotification(gf,gi);},Deletable:function(gl){return Q.Replace(gl,function(gm){var gn,go;if(gm.$==1){go=gm.$0;gn=s.Return({$:1,$0:go});}else{gn=s.ReturnEmpty({$:0});}return gn;});},FormButtonConfiguration:$.Class({},{get_Default:function(){return $.New(R,{Label:{$:0},Style:{$:0},Class:{$:0}});}}),FormContainerConfiguration:$.Class({},{get_Default:function(){var gp;gp={$:0};return $.New(S,{Header:{$:0},Padding:T.get_Default(),Description:gp,BackgroundColor:{$:0},BorderColor:{$:0},CssClass:{$:0},Style:{$:0}});}}),InputButton:function(gq,gr){var gs;gs=function(){var gu,gv,gw,gy,gz,gA,gB,gE,gF,gG,gH,gI,gJ,gK,gL,gM,gN,gO,gP,gQ,gR,gS,gT;gu=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));gv={contents:0};gw=x.Maybe("Submit",function(gx){return gx;},gq.Label);gz=f.Attr();gA=f.Attr();gy=o.add(f.Input(g.ofArray([gz.NewAttr("type","button")])),g.ofArray([f.Attr().Class("submitButton"),gA.NewAttr("value",gw)]));gB=function(){return function(){t.Increment(gv);return gu.Trigger($.New(m,{$:0,$0:gv.contents}));};};q.Events().OnClick(gB,gy);gE=gy;if(!gr){gH=gE["HtmlProvider@33"];gI=gE.get_Body();gG=gH.AddClass(gI,"disabledButton");}else{gG=null;}gJ=gq.Style;if(gJ.$==1){gL=gJ.$0;gM=gE["HtmlProvider@33"];gN=gE.get_Body();gK=gM.SetStyle(gN,gL);}else{gK=null;}gO=gq.Class;if(gO.$==1){gQ=gO.$0;gR=gE["HtmlProvider@33"];gS=gE.get_Body();gP=gR.AddClass(gS,gQ);}else{gP=null;}gF=gE;gT=function(){gv.contents=0;return gu.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};gu.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));return[gF,gT,gu];};return r.MkFormlet(gs);},Many:function(gV){return Q.CustomMany(U.get_Default(),gV);},ManyConfiguration:$.Class({},{get_Default:function(){return $.New(U,{AddIconClass:"addIcon",RemoveIconClass:"removeIcon"});}}),Many_:function(gW,gX){var gY,g0,g2,g4,g5,g6;gY=function(gZ){return gX(gZ);};g0=function(g1){return g1;};g2=function(g3){return w.choose(g0,g3);};g4=s.Map(gY,gW);g5=s.SelectMany(g4);g6=s.FlipBody(g5);return s.Map(g2,g6);},Padding:$.Class({},{get_Default:function(){return $.New(T,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}}),Replace:function(g7,g8){var g9,hd;g9=function(g_){var g$,ha,hb,hc;if(g_.$==1){ha=g_.$0;hb=s.FailWith(ha);g$=$.New(m,{$:0,$0:hb});}else{hc=g_.$0;g$=$.New(m,{$:0,$0:g8(hc)});}return g$;};hd=s.MapResult(g9,g7);return s.Switch(hd);},ValidationFrameConfiguration:$.Class({},{get_Default:function(){return $.New(V,{ValidClass:{$:1,$0:"successFormlet"},ValidStyle:{$:0},ErrorClass:{$:1,$0:"errorFormlet"},ErrorStyle:{$:0}});}}),ValidationIconConfiguration:$.Class({},{get_Default:function(){return $.New(W,{ValidIconClass:"validIcon",ErrorIconClass:"errorIcon"});}}),WithCssClass:function(he,hf){var hg;hg=function(hh){var hi,hj;hi=hh["HtmlProvider@33"];hj=hh.get_Body();hi.AddClass(hj,he);return hh;};return s.MapElement(hg,hf);},WithCustomFormContainer:function(hk,hl){var hm,hn;hm=s.ApplyLayout(hl);hn=function(ho){var hp,hq,hr,hw,hx,hy,hz,hG,hH,hI,hN,hO,hP,hR,hS,hU,hV,hX,hY,h0,h1,h3,h4,ia,ib,ic,id,ie,_if,ig,ih,ii,ij;hp=hk.Description;hq=$.New(n,{$:0});hr=function(hs){var ht,hu,hv;if(hs.$==1){hu=hs.$0;ht=g.ofArray([hu(null)]);}else{hv=hs.$0;ht=g.ofArray([f.P(g.ofArray([f.Tags().text(hv)]))]);}return ht;};hw=x.Maybe(hq,hr,hp);hx=hk.Header;hy=x.InTable(g.ofArray([g.ofArray([o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),hw)]),g.ofArray([ho])]));hz=function(hA){var hB,hC,hD,hE,hF;if(hA.$==1){hD=hA.$0;hC=hD(null);}else{hE=hA.$0;hC=f.H1(g.ofArray([f.Tags().text(hE)]));}hB=hC;hF=o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),$.New(n,{$:1,$0:hB,$1:hw}));return x.InTable(g.ofArray([g.ofArray([hF]),g.ofArray([ho])]));};hG=x.Maybe(hy,hz,hx);hH=o.add(f.TD(g.ofArray([f.Attr().Class("formlet")])),g.ofArray([hG]));hI=function(hJ){var hK,hL,hM;hK="border-color: "+hJ;hL=hH["HtmlProvider@33"];hM=hH.get_Body();return hL.SetStyle(hM,hK);};hN=hk.BorderColor;x.Maybe(null,hI,hN);hP=function(hQ){return hQ;};hR=hk.BackgroundColor;hS=function(hT){return $$.String(hT)+"px";};hU=hk.Padding.Left;hV=function(hW){return $$.String(hW)+"px";};hX=hk.Padding.Right;hY=function(hZ){return $$.String(hZ)+"px";};h0=hk.Padding.Top;h1=function(h2){return $$.String(h2)+"px";};h3=hk.Padding.Bottom;hO=g.ofArray([["background-color",x.MapOption(hP,hR)],["padding-left",x.MapOption(hS,hU)],["padding-right",x.MapOption(hV,hX)],["padding-top",x.MapOption(hY,h0)],["padding-bottom",x.MapOption(h1,h3)]]);h4=$.Tupled(function(h5){var h6,h7,h8,h9,h_,h$;h6=h5[0];h7=h5[1];if(h7.$==0){h8=null;}else{h9=h7.$0;h_=hH["HtmlProvider@33"];h$=hH.get_Body();h8=h_.SetCss(h$,h6,h9);}return h8;});w.iter(h4,hO);ia=hk.Style;if(ia.$==0){ib=null;}else{ic=ia.$0;id=hH["HtmlProvider@33"];ie=hH.get_Body();ib=id.SetStyle(ie,ic);}_if=hk.CssClass;if(_if.$==0){ig=null;}else{ih=_if.$0;ii=hH["HtmlProvider@33"];ij=hH.get_Body();ig=ii.AddClass(ij,ih);}return f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([hH]))]))]));};return s.MapElement(hn,hm);},WithCustomResetButton:function(ik,il){var im,_in,io,ip;im=ik.Label;if(im.$==0){io=$.New(R,{Label:{$:1,$0:"Reset"},Style:ik.Style,Class:ik.Class});}else{im.$0;io=ik;}_in=io;ip=Q.InputButton(_in,true);return Q.WithResetFormlet(il,ip);},WithCustomSubmitAndResetButtons:function(iq,ir,is){var it;it=function(iu){return function(iv){var iw,ix,iy,iz,iB,iC,iD,iF,iG,iH,iK,iN;if(iv.$==1){iy=iv.$0;iz=function(){return $.New(m,{$:1,$0:iy});};iB=Q.InputButton(iq,false);ix=s.MapResult(iz,iB);}else{iC=iv.$0;iD=function(){return iC;};iF=Q.InputButton(iq,true);ix=s.Map(iD,iF);}iw=ix;iG=s.Do();iH=iG.Delay(function(){return iG.Bind(s.LiftResult(Q.InputButton(ir,true)),function(iJ){iJ.$==0?iu(null):null;return iG.Return(null);});});iK=r.$(r.$(s.Return(function(iL){return function(){return iL;};}),iw),iH);iN=r.Layout().get_Horizontal();return s.WithLayout(iN,iK);};};return Q.WithSubmitAndReset(is,it);},WithCustomSubmitButton:function(iO,iP){var iQ,iR,iS;iQ=iO.Label;if(iQ.$==0){iS=$.New(R,{Label:{$:1,$0:"Submit"},Style:iO.Style,Class:iO.Class});}else{iQ.$0;iS=iO;}iR=iS;return Q.WithSubmitFormlet(iP,function(iT){var iU,iW,iX;iU=function(){};iW=iT.$==0?true:false;iX=Q.InputButton(iR,iW);return s.Map(iU,iX);});},WithCustomValidationFrame:function(iY,iZ){var i0;i0=function(i1){return function(i2){var i3,i4;i3=f.Div(g.ofArray([i2.Element]));i4=function(i5){var i6;i6=G.subscribeTo(i1,function(i7){var i8,i9,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx,jy,jz,jA,jB,jC,jD,jE,jF;if(i7.$==1){i9=i7.$0;i_=iY.ValidClass;if(i_.$==1){ja=i_.$0;jb=i5["HtmlProvider@33"];jc=i5.get_Body();i$=jb.RemoveClass(jc,ja);}else{i$=null;}jd=iY.ErrorClass;if(jd.$==1){jf=jd.$0;jg=i5["HtmlProvider@33"];jh=i5.get_Body();je=jg.AddClass(jh,jf);}else{je=null;}ji=iY.ErrorStyle;if(ji.$==1){jk=ji.$0;jl=i5["HtmlProvider@33"];jm=i5.get_Body();jj=jl.SetStyle(jm,jk);}else{jn=i5["HtmlProvider@33"];jo=i5.get_Body();jj=jn.SetStyle(jo,"");}i8=jj;}else{jp=iY.ErrorClass;if(jp.$==1){jr=jp.$0;js=i5["HtmlProvider@33"];jt=i5.get_Body();jq=js.RemoveClass(jt,jr);}else{jq=null;}ju=iY.ValidClass;if(ju.$==1){jw=ju.$0;jx=i5["HtmlProvider@33"];jy=i5.get_Body();jv=jx.AddClass(jy,jw);}else{jv=null;}jz=iY.ValidStyle;if(jz.$==1){jB=jz.$0;jC=i5["HtmlProvider@33"];jD=i5.get_Body();jA=jC.SetStyle(jD,jB);}else{jE=i5["HtmlProvider@33"];jF=i5.get_Body();jA=jE.SetStyle(jF,"");}i8=jA;}return i8;});return;};o.OnAfterRender(i4,i3);return i3;};};return Q.WrapFormlet(i0,iZ);},WithCustomValidationIcon:function(jG,jH){var jI,jJ,jV,jW,jY,j2,j3;jI=s.WithLayoutOrDefault(jH);jJ=function(jK){var jL;jL=function(){var jN,jO,jP,jS,jT,jU;if(jK.$==1){jO=jK.$0;jP=function(jQ){return function(jR){return jQ+" "+jR;};};jS=w.fold(jP,"",jO);jT=f.Attr();jN=o.add(f.Div(g.ofArray([f.Attr().Class(jG.ErrorIconClass),jT.NewAttr("title",jS)])),g.ofArray([f.Div($.New(n,{$:0}))]));}else{jU=f.Attr();jN=o.add(f.Div(g.ofArray([f.Attr().Class(jG.ValidIconClass),jU.NewAttr("title","")])),g.ofArray([f.Div($.New(n,{$:0}))]));}return jN;};return s.OfElement(jL);};jV=s.Do();jW=function(jX){return m.Join(jX);};jY=jV.Delay(function(){return jV.Bind(s.LiftResult(jI),function(j0){return jV.Bind(jJ(j0),function(){return jV.Return(j0);});});});j2=s.MapResult(jW,jY);j3=r.Layout().get_Horizontal();return s.WithLayout(j3,j2);},WithErrorFormlet:function(j4,j5){var j6,j7,j9;j6=s.Do();j7=function(j8){return m.Join(j8);};j9=j6.Delay(function(){return j6.Bind(s.LiftResult(j5),function(j$){var ka,kb,kc;if(j$.$==1){kb=j$.$0;kc=s.Do();ka=kc.Delay(function(){return kc.Bind(j4(kb),function(){return kc.Return(j$);});});}else{j$.$0;ka=s.Return(j$);}return j6.ReturnFrom(ka);});});return s.MapResult(j7,j9);},WithErrorSummary:function(kf,kg){var kh,kr,ks,ku;kh=function(ki){return s.OfElement(function(){var kk,kl,km,kn,kp,kq;kl=g.ofArray([f.Text(kf)]);km=f.Tags();kn=function(ko){return f.LI(g.ofArray([f.Text(ko)]));};kp=g.map(kn,ki);kk=g.ofArray([km.NewTag("legend",kl),f.UL(kp)]);kq=f.Tags();return kq.NewTag("fieldset",kk);});};kr=s.Do();ks=function(kt){return m.Join(kt);};ku=kr.Delay(function(){return kr.Bind(s.LiftResult(kg),function(kw){var kx,ky,kz,kB;if(kw.$==1){ky=kw.$0;kz=function(){return kw;};kB=kh(ky);kx=s.Map(kz,kB);}else{kw.$0;kx=s.Return(kw);}return kr.ReturnFrom(kx);});});return s.MapResult(ks,ku);},WithFormContainer:function(kC){return Q.WithCustomFormContainer(S.get_Default(),kC);},WithJsonPost:function(kD,kE){var kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,kY,kZ,k0,k1,k2,k3,k4,k5,la,lb,le;kF=kD.PostUrl;if(kF.$==0){kH=$.New(n,{$:0});}else{kI=kF.$0;kJ=f.Attr();kH=g.ofArray([kJ.NewAttr("action",kI)]);}kG=kH;kK=kD.EncodingType;if(kK.$==0){kM=$.New(n,{$:0});}else{kN=kK.$0;kO=f.Attr();kM=g.ofArray([kO.NewAttr("enctype",kN)]);}kL=kM;kP=f.Tags();kR=f.Attr();kS=f.Attr();kT=kD.ParameterName;kQ=g.ofArray([kR.NewAttr("type","hidden"),kS.NewAttr("name",kT)]);kU=kP.NewTag("input",kQ);kV=f.Tags();kX=f.Attr();kY=f.Attr();kW=g.ofArray([kX.NewAttr("type","submit"),kY.NewAttr("value","Submit")]);kZ=kV.NewTag("input",kW);k1=f.Attr();k2=f.Attr();k0=$.New(n,{$:1,$0:k1.NewAttr("method","POST"),$1:$.New(n,{$:1,$0:k2.NewAttr("style","display:none"),$1:kG})});k3=g.append(k0,kL);k4=o.add(f.Form(k3),g.ofArray([kU,kZ]));k5=function(k6){var k7,k8,k9,k_,k$;k7=kD.EncodingType;if(k7.$==0){k8=null;}else{k9=k7.$0;if(k9==="multipart/form-data"){k$=p(k6.get_Body()).attr("encoding","multipart/form-data");k_=void k$;}else{k_=null;}k8=k_;}return k8;};o.OnAfterRender(k5,k4);la=k4;lb=function(lc){var ld;ld=X.stringify(lc);p(kU.get_Body()).val(ld);return p(kZ.get_Body()).click();};le=s.Map(lb,kE);return f.Div(g.ofArray([la,le]));},WithLabel:function(lf,lg){return s.WithLabel({$:1,$0:lf},lg);},WithLabelAbove:function(lh){var li;li=function(lj){var lk,ll,lm,ln,lo,lp;lk=lj.Label;if(lk.$==0){lm=f.Span($.New(n,{$:0}));}else{ln=lk.$0;lm=ln(null);}ll=lm;lo=f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([ll]))])),f.TR(g.ofArray([f.TD(g.ofArray([lj.Element]))]))]))]));lp={$:0};return $.New(c,{Element:lo,Label:lp});};return s.MapBody(li,lh);},WithLabelAndInfo:function(lq,lr,ls){var lt;lt=function(){var lv,lw,lx;lv=g.ofArray([f.Text(lq)]);lw=f.Tags();lx=f.Attr();return x.InTable(g.ofArray([g.ofArray([lw.NewTag("label",lv),f.Span(g.ofArray([lx.NewAttr("title",lr),f.Attr().Class("infoIcon")]))])]));};return Q.WithLabel(lt,ls);},WithLabelConfiguration:function(ly,lz){var lA,lB;lA=s.ApplyLayout(lz);lB=r.Layout().LabelLayout(ly);return s.WithLayout(lB,lA);},WithLabelLeft:function(lC){var lD;lD=function(lE){var lF,lG,lH,lI,lJ,lK;lF=lE.Label;if(lF.$==0){lH=f.Span($.New(n,{$:0}));}else{lI=lF.$0;lH=lI(null);}lG=lH;lJ=f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([lE.Element])),f.TD(g.ofArray([lG]))]))]))]));lK={$:0};return $.New(c,{Element:lJ,Label:lK});};return s.MapBody(lD,lC);},WithLegend:function(lL,lM){var lN;lN=function(lO){var lP,lQ,lR,lS,lT,lU,lV,lW;lQ=g.ofArray([f.Tags().text(lL)]);lR=f.Tags();lS=lO.Label;if(lS.$==0){lT=lO.Element;}else{lU=lS.$0;lT=x.InTable(g.ofArray([g.ofArray([lU(null),lO.Element])]));}lP=g.ofArray([lR.NewTag("legend",lQ),lT]);lV=f.Tags();lW=lV.NewTag("fieldset",lP);return $.New(c,{Element:lW,Label:{$:0}});};return s.MapBody(lN,lM);},WithResetAction:function(lX,lY){var lZ,l4,l5,l6,l7;lZ=function(){var l1,l2;l1=lY.Build();l2=function(l3){return lX(null)?l1.Notify.call(null,l3):null;};return $.New(A,{Body:l1.Body,Dispose1:l1.Dispose1,Notify:l2,State:l1.State});};l4=s.New(lZ);l5=lY.get_Layout();l6=s.WithLayout(l5,l4);l7=r.PropagateRenderFrom(lY,l6);return r.OfIFormlet(l7);},WithResetButton:function(l8){return Q.WithCustomResetButton(R.get_Default(),l8);},WithResetFormlet:function(l9,l_){var l$,ma,mb,mc,md,me,mf,mg,mi,mo,mp;l$=s.WithLayoutOrDefault(l9);ma=s.ApplyLayout(l$);mb=s.InitWithFailure(ma);mc=s.LiftResult(mb);md=s.WithNotificationChannel(mc);me=s.LiftResult(l_);mf=s.Do();mg=function(mh){return m.Join(mh);};mi=mf.Delay(function(){return mf.Bind(md,$.Tupled(function(mk){var ml,mm;ml=mk[0];mm=mk[1];return mf.Bind(me,function(mn){mn.$==0?mm(null):null;return mf.Return(ml);});}));});mo=s.MapResult(mg,mi);mp=r.PropagateRenderFrom(md,mo);return r.OfIFormlet(mp);},WithRowConfiguration:function(mq,mr){var ms,mt;ms=s.ApplyLayout(mr);mt=r.Layout().RowLayout(mq);return s.WithLayout(mt,ms);},WithSubmitAndReset:function(mu,mv){var mw,mx,mF;mw=s.Do();mx=mw.Delay(function(){var mz,mA;mz=s.InitWithFailure(mu);mA=s.LiftResult(mz);return mw.Bind(s.WithNotificationChannel(mA),$.Tupled(function(mB){var mC,mD;mC=mB[0];mD=mB[1];return mw.ReturnFrom((mv(function(mE){return mD(mE);}))(mC));}));});mF=r.PropagateRenderFrom(mu,mx);return r.OfIFormlet(mF);},WithSubmitAndResetButtons:function(mG){var mH,mI,mJ,mK;mH=R.get_Default();mI=$.New(R,{Label:{$:1,$0:"Submit"},Style:mH.Style,Class:mH.Class});mJ=R.get_Default();mK=$.New(R,{Label:{$:1,$0:"Reset"},Style:mJ.Style,Class:mJ.Class});return Q.WithCustomSubmitAndResetButtons(mI,mK,mG);},WithSubmitButton:function(mL){return Q.WithCustomSubmitButton(R.get_Default(),mL);},WithSubmitFormlet:function(mM,mN){var mO,mP,mR,mW,mX;mO=s.Do();mP=function(mQ){return m.Join(mQ);};mR=mO.Delay(function(){var mT;mT=s.InitWithFailure(mM);return mO.Bind(s.LiftResult(mT),function(mU){return mO.Bind(mN(mU),function(){return mO.Return(mU);});});});mW=s.MapResult(mP,mR);mX=r.PropagateRenderFrom(mM,mW);return r.OfIFormlet(mX);},WithTextLabel:function(mY,mZ){return Q.WithLabel(function(){var m1,m2;m1=g.ofArray([f.Text(mY)]);m2=f.Tags();return m2.NewTag("label",m1);},mZ);},WithValidationFrame:function(m3){return Q.WithCustomValidationFrame(V.get_Default(),m3);},WithValidationIcon:function(m4){return Q.WithCustomValidationIcon(W.get_Default(),m4);},WrapFormlet:function(m5,m6){var m7;m7=function(){var m9,m_,m$,na,nb;m9=s.WithLayoutOrDefault(m6);m_=s.BuildForm(m9);m$=m9.get_Layout().Apply.call(null,m_.Body).$0;m$[1];na=m$[0];nb=(m5(m_.State))(na);return[nb,function(){return m_.Notify.call(null,null);},m_.State];};return r.MkFormlet(m7);}},Formlet:{ApplyLayout:function(nd){var ne,nf;ne=r.BaseFormlet().ApplyLayout(nd);nf=r.PropagateRenderFrom(nd,ne);return r.OfIFormlet(nf);},Bind:function(ng,nh){var ni,nj,nm,nn;ni=r.BaseFormlet();nj=function(nk){var nl;nl=nh(nk);return nl;};nm=ni.Bind(ng,nj);nn=r.PropagateRenderFrom(ng,nm);return r.OfIFormlet(nn);},BindWith:function(no,np,nq){var nr,ns,nu,nv;nr=r.BaseFormlet();ns=function(nt){return nq(nt);};nu=nr.BindWith(no,np,ns);nv=r.PropagateRenderFrom(np,nu);return r.OfIFormlet(nv);},BuildForm:function(nw){return r.BaseFormlet().BuildForm(nw);},BuildFormlet:function(nx){return r.MkFormlet(nx);},Choose:function(ny){var nz,nA,nG,nH,nI,nX,nY,n0,n1;nz={contents:0};nA=function(nB){var nC,nE,nF;nC=function(nD){t.Increment(nz);return[nD,nz.contents];};nE=s.Map(nC,nB);nF=s.InitWithFailure(nE);return s.LiftResult(nF);};nG=w.map(nA,ny);nH=s.Sequence(nG);nI=function(nJ){var nK,nO,nP,nS,nT,nU;nK=function(nL){var nM,nN;if(nL.$==0){nN=nL.$0;nM={$:1,$0:nN};}else{nM={$:0};}return nM;};nO=g.choose(nK,nJ);nP=$.Tupled(function(nQ){var nR;nQ[0];nR=nQ[1];return nR;});nS=g.sortBy(nP,nO);nT=g.rev(nS);nU=$.Tupled(function(nV){var nW;nW=nV[0];nV[1];return{$:1,$0:nW};});return w.tryPick(nU,nT);};nX=s.Map(nI,nH);nY=function(nZ){return nZ.$==1;};n0=r.Validator().Is(nY,"",nX);n1=function(n2){return n2.$0;};return s.Map(n1,n0);},Delay:function(n3){var n4;n4=r.BaseFormlet().Delay(function(){return n3(null);});return r.OfIFormlet(n4);},Deletable:function(n6){var n7,n8;n7=r.BaseFormlet().Deletable(n6);n8=r.PropagateRenderFrom(n6,n7);return r.OfIFormlet(n8);},Do:$.Field(function(){return Y.New();}),Empty:function(){var n9;n9=r.BaseFormlet().Empty();return r.OfIFormlet(n9);},FailWith:function(n_){var n$;n$=r.BaseFormlet().FailWith(n_);return r.OfIFormlet(n$);},FlipBody:function(oa){var ob,oc;ob=r.BaseFormlet().FlipBody(oa);oc=r.PropagateRenderFrom(oa,ob);return r.OfIFormlet(oc);},Flowlet:function(od){var oe,of,og,oh;oe=r.BaseFormlet();of=r.Layout().get_Flowlet();og=oe.WithLayout(of,od);oh=r.PropagateRenderFrom(od,og);return r.OfIFormlet(oh);},Horizontal:function(oi){var oj,ok,ol,om;oj=r.BaseFormlet();ok=r.Layout().get_Horizontal();ol=oj.WithLayout(ok,oi);om=r.PropagateRenderFrom(oi,ol);return r.OfIFormlet(om);},InitWith:function(on,oo){var op,oq,or;op=r.BaseFormlet();oq=op.InitWith(on,oo);or=r.PropagateRenderFrom(oo,oq);return r.OfIFormlet(or);},InitWithFailure:function(os){var ot,ou;ot=r.BaseFormlet().InitWithFailure(os);ou=r.PropagateRenderFrom(os,ot);return r.OfIFormlet(ou);},Join:function(ov){var ow,oy,oz,oA,oB;ow=function(ox){return ox;};oy=s.Map(ow,ov);oz=r.BaseFormlet();oA=oz.Join(oy);oB=r.PropagateRenderFrom(ov,oA);return r.OfIFormlet(oB);},LiftResult:function(oC){var oD,oE;oD=r.BaseFormlet().LiftResult(oC);oE=r.PropagateRenderFrom(oC,oD);return r.OfIFormlet(oE);},Map:function(oF,oG){var oH,oI,oJ;oH=r.BaseFormlet();oI=oH.Map(oF,oG);oJ=r.PropagateRenderFrom(oG,oI);return r.OfIFormlet(oJ);},MapBody:function(oK,oL){var oM,oN,oO;oM=r.BaseFormlet();oN=oM.MapBody(oK,oL);oO=r.PropagateRenderFrom(oL,oN);return r.OfIFormlet(oO);},MapElement:function(oP,oQ){var oR,oS,oU,oV;oR=r.BaseFormlet();oS=function(oT){return $.New(c,{Element:oP(oT.Element),Label:oT.Label});};oU=oR.MapBody(oS,oQ);oV=r.PropagateRenderFrom(oQ,oU);return r.OfIFormlet(oV);},MapResult:function(oW,oX){var oY,oZ,o0;oY=r.BaseFormlet();oZ=oY.MapResult(oW,oX);o0=r.PropagateRenderFrom(oX,oZ);return r.OfIFormlet(o0);},Never:function(){var o1;o1=r.BaseFormlet().Never();return r.OfIFormlet(o1);},New:function(o2){var o3;o3=r.BaseFormlet().New(o2);return r.OfIFormlet(o3);},OfElement:function(o4){var o5;o5=function(){var o7;o7=o4(null);return[o7,function(){},r.RX().Return($.New(m,{$:0,$0:null}))];};return r.MkFormlet(o5);},Render:function(o9){var o_;o_=o9.Run(function(){});return r.PropagateRenderFrom(o9,o_);},Replace:function(pa,pb){var pc,pd,pf,pg;pc=r.BaseFormlet();pd=function(pe){return pb(pe);};pf=pc.Replace(pa,pd);pg=r.PropagateRenderFrom(pa,pf);return r.OfIFormlet(pg);},ReplaceFirstWithFailure:function(ph){var pi,pj;pi=r.BaseFormlet().ReplaceFirstWithFailure(ph);pj=r.PropagateRenderFrom(ph,pi);return r.OfIFormlet(pj);},Return:function(pk){var pl;pl=r.BaseFormlet().Return(pk);return r.OfIFormlet(pl);},ReturnEmpty:function(pm){var pn;pn=r.BaseFormlet().ReturnEmpty(pm);return r.OfIFormlet(pn);},Run:function(po,pp){return pp.Run(po);},SelectMany:function(pq){var pr,pt,pu,pv,pw;pr=function(ps){return ps;};pt=s.Map(pr,pq);pu=r.BaseFormlet();pv=pu.SelectMany(pt);pw=r.PropagateRenderFrom(pq,pv);return r.OfIFormlet(pw);},Sequence:function(px){var py,pA,pB,pC;py=function(pz){return pz;};pA=w.map(py,px);pB=r.BaseFormlet();pC=pB.Sequence(pA);return r.OfIFormlet(pC);},Switch:function(pD){var pE,pG,pH,pI,pJ;pE=function(pF){return pF;};pG=s.Map(pE,pD);pH=r.BaseFormlet();pI=pH.Switch(pG);pJ=r.PropagateRenderFrom(pD,pI);return r.OfIFormlet(pJ);},Vertical:function(pK){var pL,pM,pN,pO;pL=r.BaseFormlet();pM=r.Layout().get_Vertical();pN=pL.WithLayout(pM,pK);pO=r.PropagateRenderFrom(pK,pN);return r.OfIFormlet(pO);},WithCancelation:function(pP,pQ){var pR,pS,pT;pR=r.BaseFormlet();pS=pR.WithCancelation(pP,pQ);pT=r.PropagateRenderFrom(pP,pS);return r.OfIFormlet(pT);},WithLabel:function(pU,pV){var pW,pX,pZ,p0;pW=r.BaseFormlet();pX=function(pY){return $.New(c,{Element:pY.Element,Label:pU});};pZ=pW.MapBody(pX,pV);p0=r.PropagateRenderFrom(pV,pZ);return r.OfIFormlet(p0);},WithLayout:function(p1,p2){var p3,p4,p5;p3=r.BaseFormlet();p4=p3.WithLayout(p1,p2);p5=r.PropagateRenderFrom(p2,p4);return r.OfIFormlet(p5);},WithLayoutOrDefault:function(p6){var p7,p8;p7=r.BaseFormlet().WithLayoutOrDefault(p6);p8=r.PropagateRenderFrom(p6,p7);return r.OfIFormlet(p8);},WithNotification:function(p9,p_){var p$,qa,qb;p$=r.BaseFormlet();qa=p$.WithNotification(p9,p_);qb=r.PropagateRenderFrom(p_,qa);return r.OfIFormlet(qb);},WithNotificationChannel:function(qc){var qd,qe;qd=r.BaseFormlet().WithNotificationChannel(qc);qe=r.PropagateRenderFrom(qc,qd);return r.OfIFormlet(qe);}},FormletBuilder:$.Class({Bind:function(qf,qg){var qh,qi,ql,qm;qh=r.BaseFormlet();qi=function(qj){var qk;qk=qg(qj);return qk;};ql=qh.Bind(qf,qi);qm=r.PropagateRenderFrom(qf,ql);return r.OfIFormlet(qm);},Delay:function(qn){var qo;qo=r.BaseFormlet().Delay(function(qp){return qn(qp);});return r.OfIFormlet(qo);},Return:function(qq){var qr;qr=r.BaseFormlet().Return(qq);return r.OfIFormlet(qr);},ReturnFrom:function(qs){return r.OfIFormlet(qs);}},{New:function(){return $.New(this,{});}}),Layout:{FormRowConfiguration:$.Class({},{get_Default:function(){return $.New(_0,{Padding:{$:0},Color:{$:0},Class:{$:0},Style:{$:0},LabelConfiguration:{$:0}});}}),LabelConfiguration:$.Class({},{get_Default:function(){return $.New(_1,{Align:{$:0},VerticalAlign:{$:1},Placement:{$:0}});}}),Padding:$.Class({},{get_Default:function(){return $.New(_2,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}})},LayoutProvider:$.Class({ColumnLayout:function(qt){var qu,qv,qF=this;qu=this.LayoutUtils;qv=function(){var qx,qy,qz,qA,qM;qx=f.TR($.New(n,{$:0}));qy=f.Table(g.ofArray([f.TBody(g.ofArray([qx]))]));qz=P.NewElementStore();qA=function(qB){return function(qC){var qD,qE,qG,qH,qI;qD=qC.Element.get_Id();qE=f.TD(g.ofArray([f.Table(g.ofArray([f.TBody(g.ofArray([qF.MakeRow(qt,qB,qC)]))]))]));qG=p(qx.get_Body());qH={contents:0};qI={contents:false};qG.children().each(function(){var qJ,qK;qJ=p(this);if(qB===qH.contents){p(qE.get_Body()).insertBefore(qJ);qE.Render();qK=void(qI.contents=true);}else{qK=null;}return t.Increment(qH);});!qI.contents?qx.AppendI(qE):null;return qz.RegisterElement(qD,function(){return qE["HtmlProvider@33"].Remove(qE.get_Body());});};};qM=function(qN){var qO,qP;qO=_3.Get(qN);while(qO.MoveNext()){qP=qO.get_Current();qz.Remove(qP.Element.get_Id());}return;};return{Body:$.New(c,{Element:qy,Label:{$:0}}),SyncRoot:null,Insert:qA,Remove:qM};};return qu.New(qv);},HorizontalAlignElem:function(qQ,qR){var qS,qT,qU;qS=qQ.$==0?"left":"right";qT=f.Attr();qU="float:"+qS+";";return o.add(f.Div(g.ofArray([qT.NewAttr("style",qU)])),g.ofArray([qR]));},LabelLayout:function(qV){var qW,qX;qW=_0.get_Default();qX={$:1,$0:qV};return this.RowLayout($.New(_0,{Padding:qW.Padding,Color:qW.Color,Class:qW.Class,Style:qW.Style,LabelConfiguration:qX}));},MakeLayout:function(qY){var qZ,q0;qZ=this.LayoutUtils;q0=function(){var q2,q3,q4,ra;q2=qY(null);q3=P.NewElementStore();q4=function(q5){return function(q6){var q7,q8;q7=q6.Element.get_Id();q8=(q2.Insert.call(null,q5))(q6);return q3.RegisterElement(q7,function(){var q_,q$;q_=_3.Get(q8);while(q_.MoveNext()){q$=q_.get_Current();q$["HtmlProvider@33"].Remove(q$.get_Body());}return;});};};ra=function(rb){var rc,rd;rc=_3.Get(rb);while(rc.MoveNext()){rd=rc.get_Current();q3.Remove(rd.Element.get_Id());}return;};return{Body:$.New(c,{Element:q2.Panel,Label:{$:0}}),SyncRoot:null,Insert:q4,Remove:ra};};return qZ.New(q0);},MakeRow:function(re,rf,rg){var rh,ri,rj,rl,rm,ro,rp,rq,rs,rt,ru,rw,rx,ry,rA,rB,rC,r7,r8,r9,r_,r$,sa,sb,sc,se,sf,sg,sh,si,sj,sk,sl,sm,sn,so,sr,ss,st,su,sx,sy,sz,sA,sC,sD,sE,sF,sG,sJ,sK,sL,sM;rh=re.Padding;ri=_2.get_Default();rj=function(rk){return rk;};rl=x.Maybe(ri,rj,rh);rm=function(rn){return rn;};ro=rl.Left;rp=x.Maybe(0,rm,ro);rq=function(rr){return rr;};rs=rl.Top;rt=x.Maybe(0,rq,rs);ru=function(rv){return rv;};rw=rl.Right;rx=x.Maybe(0,ru,rw);ry=function(rz){return rz;};rA=rl.Bottom;rB=x.Maybe(0,ry,rA);rC=function(rD){return function(rE){return function(rF){return function(rG){return function(rH){return function(rI){return function(rJ){var rK,rL,rP,rS,rT,rU,rX,rY,rZ,r0,r1,r2,r3,r4,r5,r6;rK=g.ofArray([["padding-left: ",rD],["padding-top: ",rE],["padding-right: ",rF],["padding-bottom: ",rG]]);rL=$.Tupled(function(rM){var rN,rO;rN=rM[0];rO=rM[1];return rN+$$.String(rO)+"px;";});rP=function(rQ){return function(rR){return rQ+rR;};};rS=g.map(rL,rK);rT=w.reduce(rP,rS);rU=function(rV){var rW;rW=rV.$==1?"middle":rV.$==2?"bottom":"top";return"vertical-align: "+rW+";";};rX=x.Maybe("",rU,rI);rY=f.Attr();rZ=rT+";"+rX;r0=rY.NewAttr("style",rZ);if(rH){r3=f.Attr();r2=g.ofArray([r3.NewAttr("colspan","2")]);}else{r2=$.New(n,{$:0});}r1=r2;r4=$.New(n,{$:1,$0:r0,$1:r1});r5=g.ofArray([rJ]);r6=g.append(r4,r5);return f.TD(r6);};};};};};};};r7=rg.Element;r8=rg.Label;if(r8.$==1){r$=r8.$0;sa=re.LabelConfiguration;sb=_1.get_Default();sc=function(sd){return sd;};se=x.Maybe(sb,sc,sa);sf=se.Align;sg=r$(null);sh=this.HorizontalAlignElem(sf,sg);si=se.Placement;if(si.$==3){sk=x.InTable(g.ofArray([g.ofArray([r7]),g.ofArray([sh])]));sj=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(sk)]);}else{if(si.$==0){sj=g.ofArray([((((((rC(rp))(rt))(0))(rB))(false))({$:1,$0:se.VerticalAlign}))(sh),((((((rC(0))(rt))(rx))(rB))(false))({$:0}))(r7)]);}else{if(si.$==1){sj=g.ofArray([((((((rC(rp))(rt))(0))(rB))(false))({$:1,$0:se.VerticalAlign}))(r7),((((((rC(0))(rt))(rx))(rB))(false))({$:0}))(sh)]);}else{sl=x.InTable(g.ofArray([g.ofArray([sh]),g.ofArray([r7])]));sj=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(sl)]);}}}r_=sj;}else{r_=g.ofArray([((((((rC(rp))(rt))(rx))(rB))(true))({$:0}))(r7)]);}r9=r_;sm=re.Class;sn=$.New(n,{$:0});so=function(sp){var sq;sq=sp(rf);return g.ofArray([f.Attr().Class(sq)]);};sr=x.Maybe(sn,so,sm);ss=re.Color;st=$.New(n,{$:0});su=function(sv){var sw;sw=sv(rf);return g.ofArray(["background-color: "+sw]);};sx=x.Maybe(st,su,ss);sy=re.Style;sz=$.New(n,{$:0});sA=function(sB){return g.ofArray([sB(rf)]);};sC=x.Maybe(sz,sA,sy);sD=g.append(sx,sC);if(sD.$==0){sF=$.New(n,{$:0});}else{sG=w.reduce(function(sH){return function(sI){return sH+";"+sI;};},sD);sJ=f.Attr();sF=g.ofArray([sJ.NewAttr("style",sG)]);}sE=sF;sK=g.append(sE,r9);sL=g.append(sE,sK);sM=g.append(sr,sL);return f.TR(sM);},RowLayout:function(sN){var sO,sP,sZ=this;sO=this.LayoutUtils;sP=function(){var sR,sS,sT,sU,s6;sR=f.TBody($.New(n,{$:0}));sS=f.Table(g.ofArray([sR]));sT=P.NewElementStore();sU=function(sV){return function(sW){var sX,sY,s0,s1,s2;sX=sW.Element.get_Id();sY=sZ.MakeRow(sN,sV,sW);s0=p(sR.get_Body());s1={contents:0};s2={contents:false};s0.children().each(function(){var s3,s4;s3=p(this);if(sV===s1.contents){p(sY.get_Body()).insertBefore(s3);sY.Render();s4=void(s2.contents=true);}else{s4=null;}return t.Increment(s1);});!s2.contents?sR.AppendI(sY):null;return sT.RegisterElement(sX,function(){return sY["HtmlProvider@33"].Remove(sY.get_Body());});};};s6=function(s7){var s8,s9;s8=_3.Get(s7);while(s8.MoveNext()){s9=s8.get_Current();sT.Remove(s9.Element.get_Id());}return;};return{Body:$.New(c,{Element:sS,Label:{$:0}}),SyncRoot:null,Insert:sU,Remove:s6};};return sO.New(sP);},VerticalAlignedTD:function(s_,s$){var ta,tb,tc,td;ta=s_.$==1?"middle":s_.$==2?"bottom":"top";tb=f.TD(g.ofArray([s$]));tc=tb["HtmlProvider@33"];td=tb.get_Body();tc.SetCss(td,"vertical-align",ta);return tb;},get_Flowlet:function(){var te;te=function(){var tg,th;tg=f.Div($.New(n,{$:0}));th=function(){return function(tj){var tk,tl;tk=tj.Label.$==1?tj.Label.$0.call(null,null):f.Span($.New(n,{$:0}));tl=x.InTable(g.ofArray([g.ofArray([tk,f.Div(g.ofArray([tj.Element]))])]));tg["HtmlProvider@33"].Clear(tg.get_Body());tg.AppendI(tl);return g.ofArray([tl]);};};return{Insert:th,Panel:tg};};return this.MakeLayout(te);},get_Horizontal:function(){return this.ColumnLayout(_0.get_Default());},get_Vertical:function(){return this.RowLayout(_0.get_Default());}},{New:function(tm){var tn;tn=$.New(this,{});tn.LayoutUtils=tm;return tn;}}),Utils:{InTable:function(to){var tp,tu,tv;tp=function(tq){var tr,tt;tr=function(ts){return f.TD(g.ofArray([ts]));};tt=g.map(tr,tq);return f.TR(tt);};tu=g.map(tp,to);tv=f.TBody(tu);return f.Table(g.ofArray([tv]));},MapOption:function(tw,tx){var ty,tz;if(tx.$==1){tz=tx.$0;ty={$:1,$0:tw(tz)};}else{ty={$:0};}return ty;},Maybe:function(tA,tB,tC){var tD,tE;if(tC.$==0){tD=tA;}else{tE=tC.$0;tD=tB(tE);}return tD;}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlets);c=$.Safe(b.Body);d=$.Safe(a.Html);e=$.Safe(d.Client);f=$.Safe(e.Default);g=$.Safe(a.List);h=$.Safe(b.Controls);i=$.Safe($$.IntelliFactory.Reactive);j=$.Safe(i.HotStream);k=$.Safe($$.IntelliFactory.Formlets);l=$.Safe(k.Base);m=$.Safe(l.Result);n=$.Safe(g.T);o=$.Safe(e.Operators);p=$.Safe($$.jQuery);q=$.Safe(e.EventsPervasives);r=$.Safe(b.Data);s=$.Safe(b.Formlet);t=$.Safe(a.Operators);u=$.Safe(b.CssConstants);v=$.Safe($$.Math);w=$.Safe(a.Seq);x=$.Safe(b.Utils);y=$.Safe(l.Tree);z=$.Safe(y.Edit);A=$.Safe(l.Form);B=$.Safe(a.Arrays);C=$.Safe(a.IntrinsicFunctionProxy);D=$.Safe(l.FormletProvider);E=$.Safe(r.Formlet);F=$.Safe(e.Pagelet);G=$.Safe(a.Util);H=$.Safe(b.LayoutProvider);I=$.Safe(l.LayoutUtils);J=$.Safe(i.Reactive);K=$.Safe(l.Validator);L=$.Safe(r.ValidatorProvidor);M=$.Safe($$.RegExp);N=$.Safe(a.Collections);O=$.Safe(N.Dictionary);P=$.Safe(b.ElementStore);Q=$.Safe(b.Enhance);R=$.Safe(Q.FormButtonConfiguration);S=$.Safe(Q.FormContainerConfiguration);T=$.Safe(Q.Padding);U=$.Safe(Q.ManyConfiguration);V=$.Safe(Q.ValidationFrameConfiguration);W=$.Safe(Q.ValidationIconConfiguration);X=$.Safe($$.JSON);Y=$.Safe(b.FormletBuilder);Z=$.Safe(b.Layout);_0=$.Safe(Z.FormRowConfiguration);_1=$.Safe(Z.LabelConfiguration);_2=$.Safe(Z.Padding);return _3=$.Safe(a.Enumerator);});$.OnLoad(function(){$.Inherit(E,F);s.Do();r.Validator();r.RX();r.Layout();r.DefaultLayout();u.InputTextClass();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;$.Define($$,{ellipsoid:{org:{SharpAngles:{Samples:{FirstExample:{Client:{Main:$.Field(function(){return a.module("todoApp",[]).controller("TodoController",["$scope",function(A){A.todos=d.Sync("ellipsoid.org.SharpAngles.Samples:0",[]);A.addTodo=function(){var C,D;C=A.todos;D=[{text:A.todoText,done:false}];C.push.apply(C,[].concat(D));A.todoText="";return;};A.remaining=function(){return e.filter(function(F){return!F.done;},A.todos).length;};A.archive=function(){A.todos=e.filter(function(H){return!H.done;},A.todos);return;};return;}]);})}},SecondExample:{Client:{DataSource:$.Class({},{New:function(){return $.New(this,{});}}),Main:$.Field(function(){return a.module("project",["ngRoute","firebase"]).value("fbURL","https://angularjs-projects.firebaseio.com/").factory("Projects",["$firebase","fbURL",$.Tupled(function(I){return I[0].call(null,new f(I[1])).$asArray();})]).config(["$routeProvider",function(J){return J.when("/",{controller:"ListCtrl",templateUrl:"list.html"}).when("/edit/:projectId",{controller:"EditCtrl",templateUrl:"detail.html"}).when("/new",{controller:"CreateCtrl",templateUrl:"detail.html"}).otherwise({redirectTo:"/"});}]).controller("ListCtrl",["$scope","Projects",$.Tupled(function(K){K[0].projects=K[1];return;})]).controller("CreateCtrl",["$scope","$location","Projects",$.Tupled(function(L){var M,N,O;M=L[0];N=L[1];O=L[2];M.save=function(){O.$add(M.project).then(function(){return N.path("/");});};return;})]).controller("EditCtrl",["$scope","$location","$routeParams","Projects",$.Tupled(function(R){var S,T,U,V,W;S=R[0];T=R[1];U=R[2];V=R[3];W=V.$indexFor(U.projectId);S.projects=V;S.project=S.projects[W];S.destroy=function(){S.projects.$remove(S.project).then(function(){return T.path("/");});};S.save=function(){S.projects.$save(S.project).then(function(){return T.path("/");});};return;})]);}),Project:$.Class({get_$id:function(){return"";},get_description:function(){return"";},get_name:function(){return"";},get_site:function(){return"";}},{New:function(){return $.New(this,{});}})}},Tests:{TestsApp:$.Field(function(){return a.module("testsApp",["ui.router"]).config(["$resource",function(){return null;}]).config(["$routeProvider",function(_2){return _2.when("/foo",{templateUrl:function(_3){return"/foo/bar/"+g.toSafe(_3.test);}});}]).config(["$stateProvider","$urlRouterProvider",$.Tupled(function(_4){return _4[0].state("state1",{url:"/state1",templateUrl:"partials/state1.html"}).state("state1.list",{url:"/list",templateUrl:"partials/state1.list.html"}).state("state2",{url:"/state2",templateUrl:"partials/state2.html"});})]).config(["$urlMatcherFactory",function(_5){return _5.strictMode(false);}]).controller("TestController",["$scope",function(_6){return _6.$on("blah",function(){return null;});}]).run(["$state",function(_8){return _8.transitionTo("foo");}]).run(["$sce",function(){return null;}]);})},ThirdExample:{Client:{Main:$.Field(function(){var _,ba,bb,bc,bd,be;_=j.add(k.Div(l.ofArray([k.Attr().Class("tabbable")])),l.ofArray([j.add(k.UL(l.ofArray([k.Attr().Class("nav nav-tabs")])),l.ofArray([j.add(k.LI(l.ofArray([(r.NgRepeat())("pane in panes"),(r.NgClass())("{active:pane.selected}")])),l.ofArray([j.add(k.A(l.ofArray([k.HRef(""),(r.NgClick())("select(pane)")])),l.ofArray([k.Text("{{pane.title}}")]))]))])),k.Div(l.ofArray([k.Attr().Class("tab-content"),(r.NgTransclude())("")]))]));ba=r.Templatify(_);bb=k.Div(l.ofArray([k.Attr().Class("tab-pane"),(r.NgClass())("{active: selected}"),(r.NgTransclude())("")]));bc=r.Templatify(bb);bd=a.module("components",[]);be=bd.controller("TabsCtrl",["$scope","$element",function(bf){bf.panes=[];bf.select=function(bh){e.iter(function(bi){bi.selected=false;return;},bf.panes);bh.selected=true;return;};this.addPane=function(bi){var bj,bk,bl;bj=bf.panes;if(s.GetLength(bj)===0){bf.select.call(null,bi);}bk=bf.panes;bl=[bi];bk.push.apply(bk,[].concat(bl));return;};return;}]);bd.directive("tabs",function(){return{restrict:"E",transclude:true,scope:{},controller:"TabsCtrl",template:ba,replace:true};}).directive("pane",function(){return{require:"^tabs",restrict:"E",transclude:true,scope:{title:"@"},link:$.Tupled(function(bo){return bo[3].addPane.call(null,bo[0]);}),template:bc,replace:true};});return a.module("app",["components"]).controller("BeerCounter",["$scope","$locale",$.Tupled(function(bp){var bq,br;bq=bp[0];br=bp[1];bq.beers=t.toArray(u.range(0,6));return br.id==="en-us"?void(bq.beerForms={"0":"no beers",one:"{} beer",few:"{} beer",other:"{} beers"}):void(bq.beerForms={"0":"\ufffdiadne pivo",one:"{} pivo",few:"{} piv\ufffd",other:"{} p\ufffdv"});})]);}),NgClass:$.Field(function(){return function(bs){return k.Attr().NewAttr("ng-class",bs);};}),NgClick:$.Field(function(){return function(bt){return k.Attr().NewAttr("ng-click",bt);};}),NgRepeat:$.Field(function(){return function(bu){return k.Attr().NewAttr("ng-repeat",bu);};}),NgTransclude:$.Field(function(){return function(bv){return k.Attr().NewAttr("ng-transclude",bv);};}),Templatify:function(bw){return k.Div(l.ofArray([bw])).get_Html();}}}}}}}});$.OnInit(function(){a=$.Safe($$.angular);b=$.Safe($$.IntelliFactory.WebSharper);c=$.Safe(b.Remoting);d=$.Safe(c.AjaxRemotingProvider);e=$.Safe(b.Arrays);f=$.Safe($$.Firebase);g=$.Safe(b.PrintfHelpers);h=$.Safe(b.Html);i=$.Safe(h.Client);j=$.Safe(i.Operators);k=$.Safe(i.Default);l=$.Safe(b.List);m=$.Safe($$.ellipsoid);n=$.Safe(m.org);o=$.Safe(n.SharpAngles);p=$.Safe(o.Samples);q=$.Safe(p.ThirdExample);r=$.Safe(q.Client);s=$.Safe(b.IntrinsicFunctionProxy);t=$.Safe(b.Seq);u=$.Safe(b.Operators);v=$.Safe(p.FirstExample);w=$.Safe(v.Client);x=$.Safe(p.SecondExample);y=$.Safe(x.Client);return z=$.Safe(p.Tests);});$.OnLoad(function(){r.NgTransclude();r.NgRepeat();r.NgClick();r.NgClass();r.Main();z.TestsApp();y.Main();w.Main();return;});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
